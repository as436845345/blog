{"meta":{"version":1,"warehouse":"5.0.1"},"models":{"Asset":[{"_id":"source/images/arraylist/arraylist_add_valuetype_il_code.png","path":"images/arraylist/arraylist_add_valuetype_il_code.png","modified":1,"renderable":0},{"_id":"themes/cactus/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes/cactus/source/js/search.js","path":"js/search.js","modified":1,"renderable":1},{"_id":"themes/cactus/source/css/rtl.styl","path":"css/rtl.styl","modified":1,"renderable":1},{"_id":"themes/cactus/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/cactus/source/images/apple-touch-icon.png","path":"images/apple-touch-icon.png","modified":1,"renderable":1},{"_id":"themes/cactus/source/images/favicon-192x192.png","path":"images/favicon-192x192.png","modified":1,"renderable":1},{"_id":"themes/cactus/source/images/favicon.ico","path":"images/favicon.ico","modified":1,"renderable":1},{"_id":"themes/cactus/source/images/logo.png","path":"images/logo.png","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/clipboard/clipboard.min.js","path":"lib/clipboard/clipboard.min.js","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/jquery/jquery.min.js","path":"lib/jquery/jquery.min.js","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Bold.ttf","path":"lib/meslo-LG/MesloLGL-Bold.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-BoldItalic.ttf","path":"lib/meslo-LG/MesloLGL-BoldItalic.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Italic.ttf","path":"lib/meslo-LG/MesloLGL-Italic.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Bold.ttf","path":"lib/meslo-LG/MesloLGM-Bold.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Regular.ttf","path":"lib/meslo-LG/MesloLGL-Regular.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-BoldItalic.ttf","path":"lib/meslo-LG/MesloLGM-BoldItalic.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Italic.ttf","path":"lib/meslo-LG/MesloLGM-Italic.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Regular.ttf","path":"lib/meslo-LG/MesloLGM-Regular.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-BoldItalic.ttf","path":"lib/meslo-LG/MesloLGS-BoldItalic.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Italic.ttf","path":"lib/meslo-LG/MesloLGS-Italic.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Regular.ttf","path":"lib/meslo-LG/MesloLGS-Regular.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Bold.ttf","path":"lib/meslo-LG/MesloLGS-Bold.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.eot","path":"lib/vazir-font/Vazir-Black.eot","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.ttf","path":"lib/vazir-font/Vazir-Black.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.woff","path":"lib/vazir-font/Vazir-Black.woff","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.woff2","path":"lib/vazir-font/Vazir-Black.woff2","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.eot","path":"lib/vazir-font/Vazir-Bold.eot","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.ttf","path":"lib/vazir-font/Vazir-Bold.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.woff","path":"lib/vazir-font/Vazir-Bold.woff","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.woff2","path":"lib/vazir-font/Vazir-Bold.woff2","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.eot","path":"lib/vazir-font/Vazir-Light.eot","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.ttf","path":"lib/vazir-font/Vazir-Light.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.woff2","path":"lib/vazir-font/Vazir-Light.woff2","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.eot","path":"lib/vazir-font/Vazir-Medium.eot","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.ttf","path":"lib/vazir-font/Vazir-Medium.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.woff","path":"lib/vazir-font/Vazir-Medium.woff","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.woff2","path":"lib/vazir-font/Vazir-Medium.woff2","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Regular.eot","path":"lib/vazir-font/Vazir-Regular.eot","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.woff","path":"lib/vazir-font/Vazir-Light.woff","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Regular.ttf","path":"lib/vazir-font/Vazir-Regular.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Regular.woff","path":"lib/vazir-font/Vazir-Regular.woff","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Regular.woff2","path":"lib/vazir-font/Vazir-Regular.woff2","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.ttf","path":"lib/vazir-font/Vazir-Thin.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.woff","path":"lib/vazir-font/Vazir-Thin.woff","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.eot","path":"lib/vazir-font/Vazir-Thin.eot","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.woff2","path":"lib/vazir-font/Vazir-Thin.woff2","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Variable.eot","path":"lib/vazir-font/Vazir-Variable.eot","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Variable.ttf","path":"lib/vazir-font/Vazir-Variable.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Variable.woff2","path":"lib/vazir-font/Vazir-Variable.woff2","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Variable.woff","path":"lib/vazir-font/Vazir-Variable.woff","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/vazir-font/font-face.css","path":"lib/vazir-font/font-face.css","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/css/all.min.css","path":"lib/font-awesome/css/all.min.css","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.ttf","path":"lib/font-awesome/webfonts/fa-regular-400.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.woff2","path":"lib/font-awesome/webfonts/fa-regular-400.woff2","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.ttf","path":"lib/font-awesome/webfonts/fa-brands-400.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.woff2","path":"lib/font-awesome/webfonts/fa-solid-900.woff2","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.ttf","path":"lib/font-awesome/webfonts/fa-solid-900.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.woff2","path":"lib/font-awesome/webfonts/fa-brands-400.woff2","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-v4compatibility.ttf","path":"lib/font-awesome/webfonts/fa-v4compatibility.ttf","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-v4compatibility.woff2","path":"lib/font-awesome/webfonts/fa-v4compatibility.woff2","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/justified-gallery/css/justifiedGallery.min.css","path":"lib/justified-gallery/css/justifiedGallery.min.css","modified":1,"renderable":1},{"_id":"themes/cactus/source/lib/justified-gallery/js/jquery.justifiedGallery.min.js","path":"lib/justified-gallery/js/jquery.justifiedGallery.min.js","modified":1,"renderable":1}],"Cache":[{"_id":"source/_data/projects.json","hash":"f321eccf9a603e8b88c0341df4513b1f2fd21cff","modified":1768533332485},{"_id":"source/categories/index.md","hash":"4c84eee767b1faf0750d2ff0baef992ac39a9bd6","modified":1768536744382},{"_id":"source/_posts/readonlyspan-usage.md","hash":"a9aff2ff894cfee1d4561e752cb54a72f15f601f","modified":1768718037728},{"_id":"source/_posts/arraypool-what-you-should-know.md","hash":"a0d3e32567db083415d08d6455a9c87e70851406","modified":1768635247279},{"_id":"source/_posts/do-not-use-arraylist.md","hash":"f7cd6ea9855e3c9a6f4ae9d85d6aaee4b30d17c9","modified":1768615144924},{"_id":"source/_posts/logarithm-formulas-guide-md.md","hash":"7effc8b8eeecb35d31799aba16f30e1039e1b875","modified":1772100187339},{"_id":"source/_posts/perfer-stackalloc-usage.md","hash":"9eff46e8f06f79548e3291088bc8e80c1c003b68","modified":1771588502368},{"_id":"source/_posts/span-usage.md","hash":"eed1fb23625d84ab39aa2b422638aceff04ca8c6","modified":1768789862552},{"_id":"source/_posts/perfer-arraypool-usage.md","hash":"6d0231fc407150f29b4411dc66e31485f338c8b4","modified":1768635697417},{"_id":"source/tags/index.md","hash":"6e685bd2b3cfa7fc0e447f95554ac0450789fa95","modified":1768536625078},{"_id":"source/about/index.md","hash":"45a52bf4b7be17c8df45e478af95af30a5ec27da","modified":1768536300933},{"_id":"source/_posts/vector-based-arrow-rendering-for-line-segments-md.md","hash":"6945bde69fad0900e1e8329b367761a2384836ed","modified":1771592932016},{"_id":"source/images/arraylist/arraylist_add_valuetype_il_code.png","hash":"1de4f95187e0e231681673dcca3469fee1de94fb","modified":1768544269281},{"_id":"source/search/index.md","hash":"a97170a0381dcfcaef12098f28bdb61fb83f3981","modified":1768535354568},{"_id":"themes/cactus/README.md","hash":"78c23f149de6869b91e4e1bb9067915f6520d6fc","modified":1768524206491},{"_id":"themes/cactus/.gitignore","hash":"044711463cfff978c57dbe9612deeb221269890e","modified":1768524206489},{"_id":"themes/cactus/.stylintrc","hash":"8bbbee5eae70fbe7dd53c9ce43d244b47d58385b","modified":1768524206490},{"_id":"themes/cactus/.jshintrc","hash":"d6ee46102ed2ff00acb555557f47241b701e99a4","modified":1768524206490},{"_id":"themes/cactus/LICENSE","hash":"06806c75801c9ae870a1b47d588ef8e00d3c7c94","modified":1768524206490},{"_id":"themes/cactus/_config.yml","hash":"cafd535d03174d14be1d489852d98823eda67cf9","modified":1771590459213},{"_id":"themes/cactus/gulpfile.js","hash":"23b5f0ea4c4d4319dfa8c3d3eaecb7bd70d90336","modified":1768524206492},{"_id":"themes/cactus/languages/de.yml","hash":"0734bfc33861585a12327142bf52489c882ad34f","modified":1768524206494},{"_id":"themes/cactus/package.json","hash":"768e4f07b7bc6406d37b84878e1d34be668f5ea4","modified":1768524206512},{"_id":"themes/cactus/languages/ar.yml","hash":"2f1258875dbffa89d192a1d6481c4bd3c337126b","modified":1768524206493},{"_id":"themes/cactus/languages/ca.yml","hash":"6f9897fe8c7b7bf23be7fa58c530602217aea898","modified":1768524206493},{"_id":"themes/cactus/languages/default.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1768524206494},{"_id":"themes/cactus/languages/fa.yml","hash":"05fb8dad765af2b9eec32582f5d277eb2735ffc3","modified":1768524206496},{"_id":"themes/cactus/languages/en.yml","hash":"491c87ff300815df52220f6cead8e28edea129df","modified":1768524206495},{"_id":"themes/cactus/languages/es.yml","hash":"56ddfd9081641c45272bdc2df750e41ab8b600bf","modified":1768524206495},{"_id":"themes/cactus/languages/it.yml","hash":"501bfc9aed86964ee75354a805378740a02af799","modified":1768524206496},{"_id":"themes/cactus/languages/fr.yml","hash":"4604fc8f94d98f6d53c80535fbae78814f88f32d","modified":1768524206496},{"_id":"themes/cactus/languages/nl.yml","hash":"4c36921322e782775ccff9aec78d4261153cf5e5","modified":1768524206497},{"_id":"themes/cactus/languages/kr.yml","hash":"ab5be04a1b4c4d87e164b1a045e220f855e85a38","modified":1768524206497},{"_id":"themes/cactus/languages/pt-br.yml","hash":"417d25e3dae260a2503ec6a8f1b590fa00534b14","modified":1768524206498},{"_id":"themes/cactus/languages/tr.yml","hash":"fcde93b8a92117706b019b51a95385c940e29190","modified":1768524206499},{"_id":"themes/cactus/languages/pl.yml","hash":"3677b782edd98986bb82568c6ff6c8b77140b75a","modified":1768524206498},{"_id":"themes/cactus/languages/ru.yml","hash":"47fb1672f36d5adadf2f6c3a5c4d1714f5bd563b","modified":1768524206498},{"_id":"themes/cactus/languages/ua.yml","hash":"983d0acd3ce19858ec14c641da135a562541c778","modified":1768524206499},{"_id":"themes/cactus/languages/vi.yml","hash":"1a1dfc60e952c3429c038f69a9e0ca2057784fca","modified":1768524206500},{"_id":"themes/cactus/scripts/cdn.js","hash":"6037ad2ddbdc4d87195d91b3bd9f197c1b40467a","modified":1768524206513},{"_id":"themes/cactus/languages/zh-CN.yml","hash":"d163690e48de5cf03914d69a99462d72eb040ad3","modified":1768524206500},{"_id":"themes/cactus/languages/zh-TW.yml","hash":"fa5923f53f6174b044255e2d1655136168ff59c0","modified":1768524206500},{"_id":"themes/cactus/scripts/error_404.js","hash":"099d428e1b96b9c219a789da60b87703c509b2bb","modified":1768524206514},{"_id":"themes/cactus/scripts/meta.js","hash":"96b1a52af341adc741a5581ddc7335105abe780e","modified":1768524206514},{"_id":"themes/cactus/scripts/merge-configs.js","hash":"98b79403945fa7f8dc177e6da283681677d02567","modified":1768524206514},{"_id":"themes/cactus/scripts/page_title.js","hash":"03b5c8b6215f0b305327e8d9b5d49add83b4b95f","modified":1768524206515},{"_id":"themes/cactus/scripts/thumbnail.js","hash":"3d841aa267026703a5cc29f4ffbb613f0a2bbd45","modified":1768524206515},{"_id":"themes/cactus/layout/404.ejs","hash":"c04829c5ddc417d0b9a66cad55a838cc7eed997b","modified":1768524206501},{"_id":"themes/cactus/layout/layout.ejs","hash":"c7b73f887d62fad9f14507504c4a2c036860e76c","modified":1768524206511},{"_id":"themes/cactus/layout/index.ejs","hash":"55b9ce486198b6e50aafa346c375db7e14099cf3","modified":1772099905087},{"_id":"themes/cactus/layout/archive.ejs","hash":"cda7b4d3f3615a9a591d7610f9e40b615ca68c73","modified":1768524206510},{"_id":"themes/cactus/layout/page.ejs","hash":"1700d4f434170e1eeb0e2a9470fc3c0732b2ba7e","modified":1768524206511},{"_id":"themes/cactus/layout/post.ejs","hash":"9b8e937375f56053f497f437c06d527761b98d1c","modified":1768524206512},{"_id":"themes/cactus/layout/_partial/comments.ejs","hash":"162fb8592903605789f516be2cd9c678a1a2d207","modified":1768524206502},{"_id":"themes/cactus/layout/_partial/google_analytics.ejs","hash":"82372a68455c05fa6a07c5ecb8defe11f769da7c","modified":1768524206502},{"_id":"themes/cactus/layout/_partial/header.ejs","hash":"3eae6c39852c3d7cba8978ad93a5570d20580924","modified":1768524206503},{"_id":"themes/cactus/layout/_partial/footer.ejs","hash":"2336c1eb473fea860f4c3e309c50bc32544d0b4e","modified":1771592106550},{"_id":"themes/cactus/layout/_partial/head.ejs","hash":"abfa1c0063936e565225b70f095e94a08ccba9b2","modified":1771592364467},{"_id":"themes/cactus/layout/_partial/pagination.ejs","hash":"ea8692715a8ea49624638dbd7bfb911af58887ee","modified":1768524206504},{"_id":"themes/cactus/layout/_partial/scripts.ejs","hash":"46ad130a7a741ca44928116479c2004180979e40","modified":1768524206508},{"_id":"themes/cactus/layout/_partial/search.ejs","hash":"12dba799ae5736dfbf1548e1923bbb7447de8a6d","modified":1768524206509},{"_id":"themes/cactus/layout/_partial/styles.ejs","hash":"42fd45758d8f8e814bfdd8b26eb676d87b8465b2","modified":1768524206509},{"_id":"themes/cactus/source/js/main.js","hash":"adc9e8e86e82f6bce527d5674df0a9b298ac71a0","modified":1768524206561},{"_id":"themes/cactus/source/js/search.js","hash":"0d2933fa97c4036805011cc219fcc43ae578e230","modified":1768524206561},{"_id":"themes/cactus/layout/_partial/umami_analytics.ejs","hash":"5a39772aa121652f9d54619282fe880006b2a677","modified":1768524206509},{"_id":"themes/cactus/source/css/_mixins.styl","hash":"37093d2a554283ab652b59e5e0ff9b542edced0f","modified":1768524206549},{"_id":"themes/cactus/source/css/_fonts.styl","hash":"5c1727836f5d6076a65cf91dbbeaba8d16b5132b","modified":1768524206518},{"_id":"themes/cactus/source/css/_extend.styl","hash":"1b9b2c69b894343068f3384000581a6092c4e868","modified":1768524206518},{"_id":"themes/cactus/source/css/_util.styl","hash":"1c7bed7376f04d7b77d817e132aee08cf65e6395","modified":1768524206556},{"_id":"themes/cactus/source/css/rtl.styl","hash":"105284f992de848968d818f6200d2ebbdd5342d0","modified":1768524206556},{"_id":"themes/cactus/source/css/_variables.styl","hash":"5dcbf89bd23d9dd3c45d07049a1448b0ae95426b","modified":1768524206556},{"_id":"themes/cactus/source/css/style.styl","hash":"210406274d091be115a6175929ba5671b8b8f946","modified":1768524206557},{"_id":"themes/cactus/source/images/apple-touch-icon.png","hash":"57e2def34682655f41a0be2d083f16765ba7858b","modified":1768524206558},{"_id":"themes/cactus/source/images/favicon.ico","hash":"189f9842bcb79a6f8f9e8445bc8bbd773443826b","modified":1768524206559},{"_id":"themes/cactus/source/images/favicon-192x192.png","hash":"96e6fcbbb13a5914a6131391e210eb7dfd13d692","modified":1768524206558},{"_id":"themes/cactus/layout/_partial/post/actions_desktop.ejs","hash":"53d0225501f4c33abda7059293f00aa22e3d4364","modified":1768524206505},{"_id":"themes/cactus/layout/_partial/post/actions_mobile.ejs","hash":"2170a51e5b2637ef55651f29637cafcd111242b2","modified":1768524206505},{"_id":"themes/cactus/layout/_partial/post/date.ejs","hash":"b64d37f8a2cdb3990a5f4cd686b4fa3f2607b5bb","modified":1768524206506},{"_id":"themes/cactus/layout/_partial/post/share.ejs","hash":"6b037d536ef89c1e7b488f34c20fa977389ae744","modified":1768524206507},{"_id":"themes/cactus/layout/_partial/post/gallery.ejs","hash":"725ab823c2fb4a5e444eca3afa617d88f305ef71","modified":1768524206506},{"_id":"themes/cactus/layout/_partial/post/title.ejs","hash":"524ad82e6d52b91d20cded8224efb76f2fdacf0b","modified":1768524206508},{"_id":"themes/cactus/layout/_partial/post/category.ejs","hash":"62fd0bb73eef411ae0b2d6f529a273d54fd0d277","modified":1768524206506},{"_id":"themes/cactus/source/css/_colors/classic.styl","hash":"3d6c91b03ade77daf1ceb11c5dad48b0e35ac353","modified":1768524206516},{"_id":"themes/cactus/layout/_partial/post/tag.ejs","hash":"424029d2d8e6c51c7370c5f8aabc21799418d3f1","modified":1768524206507},{"_id":"themes/cactus/source/css/_colors/dark.styl","hash":"d2978cb0035ba1da0a58db2ed947a72b0bd41042","modified":1768524206517},{"_id":"themes/cactus/source/css/_colors/light.styl","hash":"9b156c15c855677a50c4a27de17a8cb377b69802","modified":1768524206517},{"_id":"themes/cactus/source/css/_highlight/androidstudio.styl","hash":"4d67bdab6cc9c614486ca42f98199a04d053e7f0","modified":1768524206519},{"_id":"themes/cactus/source/css/_colors/white.styl","hash":"a20de63c1cd7ccf25b8313e2d211866a20e86fbe","modified":1768524206517},{"_id":"themes/cactus/source/css/_highlight/arta.styl","hash":"262167aaebcf28de7f85af7ac77a76fa1fa284f7","modified":1768524206520},{"_id":"themes/cactus/source/css/_highlight/agate.styl","hash":"fc289ba8f47ead6331ec3a51533cfa93251c5634","modified":1768524206519},{"_id":"themes/cactus/source/css/_highlight/atelier-cave-dark.styl","hash":"7e83c7f2acaaaa98864660afe2794745c36c8e51","modified":1768524206521},{"_id":"themes/cactus/source/css/_highlight/ascetic.styl","hash":"ca087a3c70998c7ac6b0b42d5cf7a653b8707591","modified":1768524206521},{"_id":"themes/cactus/source/css/_highlight/atelier-dune-dark.styl","hash":"68584ed0e99c7d0e49ef8a2e67cd4dcdad359de4","modified":1768524206522},{"_id":"themes/cactus/source/css/_highlight/atelier-cave-light.styl","hash":"f47de0b9d66617728f68096ed48371dd6bb9e67a","modified":1768524206522},{"_id":"themes/cactus/source/css/_highlight/atelier-dune-light.styl","hash":"657fe215931fd06e21b56374df699a94890f7ab4","modified":1768524206523},{"_id":"themes/cactus/source/css/_highlight/arduino-light.styl","hash":"591962bfc758a521b4cb907750c19a1a2423b4d5","modified":1768524206520},{"_id":"themes/cactus/source/css/_highlight/atelier-forest-dark.styl","hash":"a741eba35cdfe2cfd67dfbf109655f253d6b4795","modified":1768524206524},{"_id":"themes/cactus/source/css/_highlight/atelier-estuary-light.styl","hash":"2b416a0567a53aa0fa8898b196ddd44315c1a5f3","modified":1768524206523},{"_id":"themes/cactus/source/css/_highlight/atelier-heath-dark.styl","hash":"f186b357dcebded89b7bcc77389b2cff76533d72","modified":1768524206525},{"_id":"themes/cactus/source/css/_highlight/atelier-forest-light.styl","hash":"8d7c7242974aa2454fa792c5d7a47c5f9632355a","modified":1768524206524},{"_id":"themes/cactus/source/css/_highlight/atelier-lakeside-light.styl","hash":"8659eaae6a0c2e00b4b9199803e50adf4ff0128d","modified":1768524206526},{"_id":"themes/cactus/source/css/_highlight/atelier-heath-light.styl","hash":"c1db353e8613607580d40b12ddc162d029560576","modified":1768524206525},{"_id":"themes/cactus/source/css/_highlight/atelier-lakeside-dark.styl","hash":"802979cea895a0a384645cb30a43de9572cb0e3f","modified":1768524206525},{"_id":"themes/cactus/source/css/_highlight/atelier-plateau-dark.styl","hash":"0d51ddc580ccb0a291271fa9632bc91dab632df6","modified":1768524206526},{"_id":"themes/cactus/source/css/_highlight/atelier-plateau-light.styl","hash":"96181544eeadc5b0749229f11607e7c01f81e078","modified":1768524206527},{"_id":"themes/cactus/source/css/_highlight/atelier-savanna-dark.styl","hash":"bbad7a9512b4873294e73ce806e36e43973e6ed8","modified":1768524206527},{"_id":"themes/cactus/source/css/_highlight/atelier-estuary-dark.styl","hash":"1cecd13e0d6b24042ff86372f0596c1441bb834a","modified":1768524206523},{"_id":"themes/cactus/source/css/_highlight/atelier-seaside-dark.styl","hash":"2f008271299042f2443bca98c9bcadbc8c45e837","modified":1768524206528},{"_id":"themes/cactus/source/css/_highlight/atelier-seaside-light.styl","hash":"08e2df313c272d5c70c93e713639663c168180d0","modified":1768524206528},{"_id":"themes/cactus/source/css/_highlight/atelier-sulphurpool-dark.styl","hash":"18dcb00ab9c62eb810d492047214331c51bb654f","modified":1768524206528},{"_id":"themes/cactus/source/css/_highlight/brown-paper.styl","hash":"d14846542a26b75fd26df5b5df6c5493733f73f6","modified":1768524206529},{"_id":"themes/cactus/source/css/_highlight/brown-papersq.png","hash":"3a1332ede3a75a3d24f60b6ed69035b72da5e182","modified":1768524206530},{"_id":"themes/cactus/source/css/_highlight/codepen-embed.styl","hash":"1de45e603e2c71c7f6b0c1372a3ba00b1bc153a8","modified":1768524206530},{"_id":"themes/cactus/source/css/_highlight/color-brewer.styl","hash":"9c4905eab730d0b389e6972e907057577f7e25f1","modified":1768524206531},{"_id":"themes/cactus/source/css/_highlight/dark.styl","hash":"98d7884806838a0b46132d759d60ac27c0c4bd9c","modified":1768524206531},{"_id":"themes/cactus/source/css/_highlight/atelier-savanna-light.styl","hash":"8a5207a0c30262a0bf5e1a41411a306f7a89a7e7","modified":1768524206527},{"_id":"themes/cactus/source/css/_highlight/darkula.styl","hash":"8965ad6920601c275ca97e617beff5536925a266","modified":1768524206532},{"_id":"themes/cactus/source/css/_highlight/docco.styl","hash":"7bd3389ce16d20488ab336d557056cc703c921c7","modified":1768524206532},{"_id":"themes/cactus/source/css/_highlight/atelier-sulphurpool-light.styl","hash":"add3d88c9d12567dcfae7a8e49984d119fc72227","modified":1768524206529},{"_id":"themes/cactus/source/css/_highlight/foundation.styl","hash":"28c59a31467c33bd51cbf3b6085782c2a724ff6c","modified":1768524206533},{"_id":"themes/cactus/source/css/_highlight/github-gist.styl","hash":"71f4b0fca91a587e6eba15a5306dca963bb8f441","modified":1768524206533},{"_id":"themes/cactus/source/css/_highlight/grayscale.styl","hash":"c83804abe39faebd80f8f4ff64fbd7137674cb1c","modified":1768524206534},{"_id":"themes/cactus/source/css/_highlight/googlecode.styl","hash":"7f5082ae008925a23eb713f160773fe647eb3ff7","modified":1768524206534},{"_id":"themes/cactus/source/css/_highlight/gruvbox-dark.styl","hash":"f66403ce77dcb16b1f98a5061b72f7581630d69f","modified":1768524206535},{"_id":"themes/cactus/source/css/_highlight/far.styl","hash":"8da83d66724f2ce508a40f21b4f6dc0d704be562","modified":1768524206533},{"_id":"themes/cactus/source/css/_highlight/highlightjs.styl","hash":"fd796a58c5d4590cda67c998187933788d45f30a","modified":1768524206535},{"_id":"themes/cactus/source/css/_highlight/github.styl","hash":"a84eb710b302006120c3e7f8ca18f9e6fbc231c3","modified":1768524206534},{"_id":"themes/cactus/source/css/_highlight/hopscotch.styl","hash":"dd3c78c42d4a865f11623235e5e5f6829d789706","modified":1768524206536},{"_id":"themes/cactus/source/css/_highlight/index.styl","hash":"36c44375229613a5bb9ee84a8e90214978070439","modified":1768524206537},{"_id":"themes/cactus/source/css/_highlight/hybrid.styl","hash":"4906456025787de04b48a87c42bb704c5ff67065","modified":1768524206536},{"_id":"themes/cactus/source/css/_highlight/ir-black.styl","hash":"aa31b30069ebee39e2c3ebb75e2c96ba8678eb14","modified":1768524206537},{"_id":"themes/cactus/source/css/_highlight/kimbie.dark.styl","hash":"3b998c640eeb2c6192fee24bc78b4137de475dd7","modified":1768524206538},{"_id":"themes/cactus/source/css/_highlight/kimbie.light.styl","hash":"e901738455ec9a1bddde7b62bbd8595de6033e1e","modified":1768524206538},{"_id":"themes/cactus/source/css/_highlight/magula.styl","hash":"ab179306c12a1cf2949482beaca328e379ef034a","modified":1768524206539},{"_id":"themes/cactus/source/css/_highlight/idea.styl","hash":"e284c1760e8da0848f56cd5601d867ceeb0192d7","modified":1768524206536},{"_id":"themes/cactus/source/css/_highlight/kimbie.styl","hash":"13113af220dfed09cb49d85102babb352c3eff97","modified":1768524206539},{"_id":"themes/cactus/source/css/_highlight/mono-blue.styl","hash":"14fb8678739b77f35771b6d63101ddbf1e7a9fbc","modified":1768524206540},{"_id":"themes/cactus/source/css/_highlight/paraiso-dark.styl","hash":"50f1cee8a5b3b165b4184ead0a99dc564b62ef4f","modified":1768524206541},{"_id":"themes/cactus/source/css/_highlight/monokai.styl","hash":"c3a3bfae1eb864505fbc8748db734600057af1af","modified":1768524206540},{"_id":"themes/cactus/source/css/_highlight/monokai-sublime.styl","hash":"84a27bd29d939105d65f4164c219d6cc2e09ae60","modified":1768524206540},{"_id":"themes/cactus/source/css/_highlight/paraiso.styl","hash":"846a06a57fa0b3db7f83ec7ac2bf34911f32cf66","modified":1768524206542},{"_id":"themes/cactus/source/css/_highlight/paraiso-light.styl","hash":"e428e8202b01e83b0f018a96058d806e7f4c76bf","modified":1768524206542},{"_id":"themes/cactus/source/css/_highlight/obsidian.styl","hash":"efba069860181d2b709e1548dd16cf102ca267fa","modified":1768524206541},{"_id":"themes/cactus/source/css/_highlight/railscasts.styl","hash":"5dc9ce33cecee87fe9ca8f2ed9342602194484ec","modified":1768524206543},{"_id":"themes/cactus/source/css/_highlight/pojoaque.styl","hash":"4d4a9360c35f3c5a0c5b9b49a1f2284e7e21317b","modified":1768524206543},{"_id":"themes/cactus/source/css/_highlight/pojoaque.jpg","hash":"c5fe6533b88b21f8d90d3d03954c6b29baa67791","modified":1768524206543},{"_id":"themes/cactus/source/css/_highlight/school-book.png","hash":"711ec983c874e093bb89eb77afcbdf6741fa61ee","modified":1768524206544},{"_id":"themes/cactus/source/css/_highlight/school-book.styl","hash":"186c37e9c39e65aa291cce3317e35904693598d1","modified":1768524206545},{"_id":"themes/cactus/source/css/_highlight/solarized-dark.styl","hash":"9fc9400d3a8cae97eb5761c284140acb0f847538","modified":1768524206545},{"_id":"themes/cactus/source/css/_highlight/rainbow.styl","hash":"95246afef181bd96f9adb1a2e84fb3ef302d4598","modified":1768524206544},{"_id":"themes/cactus/source/css/_highlight/solarized-light.styl","hash":"bb04944fc06c12ecd7b56ad933dbedde60c2259a","modified":1768524206545},{"_id":"themes/cactus/source/css/_highlight/tomorrow-night-bright.styl","hash":"e6b025b247e4027fb3c1b7833588f5a5b04a549c","modified":1768524206547},{"_id":"themes/cactus/source/css/_highlight/tomorrow-night-eighties.styl","hash":"8b16876cf205111d5d5454100de712bc3ea8f477","modified":1768524206547},{"_id":"themes/cactus/source/css/_highlight/sunburst.styl","hash":"e6e4c009b10b9805f0c593446bf013edec47d146","modified":1768524206546},{"_id":"themes/cactus/source/css/_highlight/tomorrow-night.styl","hash":"eb8441364bb1664ecebde77b965dc36c91133aa0","modified":1768524206547},{"_id":"themes/cactus/source/css/_highlight/tomorrow.styl","hash":"502335f0fac07ed74ca78207bcf3ef8dd2252cf6","modified":1768524206548},{"_id":"themes/cactus/source/css/_highlight/vs.styl","hash":"14fbb0c43af440a290280b26968c8a5c0786b27f","modified":1768524206548},{"_id":"themes/cactus/source/css/_highlight/zenburn.styl","hash":"f63534764dd6598e81177d64714a184f98153b11","modified":1768524206549},{"_id":"themes/cactus/source/css/_highlight/tomorrow-night-blue.styl","hash":"92f4423d4964fcfe34ff7ca6cb21012b5738c697","modified":1768524206546},{"_id":"themes/cactus/source/css/_highlight/xcode.styl","hash":"5fa8999c7f807c1aae29c7a1cdf681678576fb69","modified":1768524206549},{"_id":"themes/cactus/source/css/_partial/archive.styl","hash":"301bf71b6878c965b3ea49dc19aba3f1c111cd3a","modified":1768524206550},{"_id":"themes/cactus/source/css/_partial/article.styl","hash":"abdbf82d71c7ec89c2f3ebaf8cc0606ab4ec1e03","modified":1768524206550},{"_id":"themes/cactus/source/css/_partial/categories.styl","hash":"92fffe2baacb9d19021b3d120d2038417ca466df","modified":1768524206551},{"_id":"themes/cactus/source/css/_partial/footer.styl","hash":"5bc59fd8cadd7cff06d989c9c7e8e4eb0d0872d8","modified":1768524206552},{"_id":"themes/cactus/source/css/_partial/header.styl","hash":"f08c8bd685ddced854cdf2183684013c0644527c","modified":1768524206552},{"_id":"themes/cactus/source/css/_partial/index.styl","hash":"4a0da5d7052204b23d390a7f76cdc903b9eef52b","modified":1768524206552},{"_id":"themes/cactus/source/css/_partial/comments.styl","hash":"6e839bae0ddc11447579c34541e79b50d3670bbd","modified":1768524206551},{"_id":"themes/cactus/source/css/_partial/pagination.styl","hash":"4ff9755163aae6039bb72eac8360bc1c50fa26b6","modified":1768524206553},{"_id":"themes/cactus/source/css/_partial/search.styl","hash":"680ea535e5a20c01a31bee4d3eb680b86267a281","modified":1768524206554},{"_id":"themes/cactus/source/css/_partial/tooltip.styl","hash":"6cb13a9f4a7c01aa7ab8f73739a7d385377c5465","modified":1768524206555},{"_id":"themes/cactus/source/lib/clipboard/clipboard.min.js","hash":"d62dcb0905e038e69ff24ab9eef9e3306d45535e","modified":1768524206563},{"_id":"themes/cactus/source/css/_partial/tags.styl","hash":"7a2f9051b21bce525ecb71799d37c4b65a4f9171","modified":1768524206555},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.woff","hash":"f6fda2de0348b3e3b7de73267f9f8e97a62f8353","modified":1768524206626},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.woff2","hash":"7ea4fd7dd4cd4f480af78a0e2c5849eb921b1aeb","modified":1768524206627},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.woff","hash":"56e632c9196fac364c66f812a3b4635dd999ad1c","modified":1768524206631},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.woff2","hash":"6e40d0c7669c1adbcbf034bdc459f7bed4d6676d","modified":1768524206631},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.woff2","hash":"50b654d916204c30987d1987abd890ef92085ae3","modified":1768524206635},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.woff2","hash":"14b3e257c51a6a11d23b2a078017ff340c9777e4","modified":1768524206640},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.woff","hash":"43a8aaa3fca8721dd32a5d20f7a98dfbc87c97fd","modified":1768524206639},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.woff","hash":"1c3dbf17411b1f6a6b22c2b76e9d8511586643d0","modified":1768524206635},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Regular.woff","hash":"235889d59ddad2b1f3243ccaab7733bd713a2a21","modified":1768524206642},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Regular.woff2","hash":"a9714ffb842afc74836e64de04b52d8c37c87c8a","modified":1768524206643},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.woff","hash":"c0e784de2eb5261cca244928f8a81fd893c3fe16","modified":1768524206646},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.woff2","hash":"9b03b1a9071709f5b7dbca13412ecef6cb7a2a67","modified":1768524206646},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Variable.woff2","hash":"e213bb26bc7f10e1df3fe2d03d3ecaecd6e6d371","modified":1768524206650},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Variable.woff","hash":"2e8e6d38d361def5f48baac366f04e3db3ed4828","modified":1768524206650},{"_id":"themes/cactus/source/lib/vazir-font/font-face.css","hash":"a3dca7ea2f1fedafc2dfb687884d8ac792d15947","modified":1768524206651},{"_id":"themes/cactus/source/css/_partial/post/actions_mobile.styl","hash":"b06410ed34b5ecbcac11357aa359149e1f827aa6","modified":1768524206554},{"_id":"themes/cactus/source/css/_partial/post/actions_desktop.styl","hash":"c25ccdd505ca1b7c74a7fb2365ad2c262f8025ba","modified":1768524206553},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.ttf","hash":"67afa6237670ab99125056f2899129f22912dcf3","modified":1768524206568},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-regular-400.woff2","hash":"fb363d27cfdfe71a243fa2ac3dab2815232b9b7e","modified":1768524206569},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-v4compatibility.ttf","hash":"a9d072aca9e0fadc2a7167671ce3d6b18d9cd2cc","modified":1768524206574},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-v4compatibility.woff2","hash":"8f80d0bbe995f7fe92320fdaec10cd5ccd710a51","modified":1768524206574},{"_id":"themes/cactus/source/lib/justified-gallery/css/justifiedGallery.min.css","hash":"4a8d364c99df8471c6a0c7192710631e605af635","modified":1768524206577},{"_id":"themes/cactus/source/lib/justified-gallery/js/jquery.justifiedGallery.min.js","hash":"8d7e041394387fd523991bf827d417ade2747e35","modified":1768524206578},{"_id":"themes/cactus/source/lib/jquery/jquery.min.js","hash":"edf8a6a066f201b1ffad32c585bd79c9982d4433","modified":1768524206576},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.ttf","hash":"b65915e3fa57b5c19995d15dc2341d115c1971b9","modified":1768524206626},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Black.eot","hash":"91152bd73e7ff8d943e3bde3ddb0fa0a018e1c21","modified":1768524206624},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.eot","hash":"5c1c680fade45393e4a5bb4548a092cd5ea6811e","modified":1768524206628},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Bold.ttf","hash":"122bb778b17a152c426a825ee981610a4bd59bf3","modified":1768524206630},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.eot","hash":"a059359e9bea17dc2ff2ede955a05bf0dc4d00d0","modified":1768524206633},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Light.ttf","hash":"df82b80c4d3b11e70dcd269fc62ac97cbfa0414d","modified":1768524206634},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.ttf","hash":"948a091f0fdb8c7ae17d5ef8e51bd8830d65dd9a","modified":1768524206639},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Medium.eot","hash":"d9ec1f9f3fefd57e446cbe86dc297f1ff269b6de","modified":1768524206637},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Regular.eot","hash":"521c01f0eb79a48025e972ecbe21b0d7fb15437b","modified":1768524206641},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Regular.ttf","hash":"643c28c8f8a2bce1a0d62525aa045cd9883773cd","modified":1768524206642},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.ttf","hash":"6aacb0eecb03c660570b6e159ba5ca97ca7461cf","modified":1768524206645},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Thin.eot","hash":"a0ea0bdaef00b35544f9a21d25d35db9a79f7189","modified":1768524206644},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Variable.ttf","hash":"1e08b6373c2e086f24776df9b11e4be6bbcc8a4a","modified":1768524206649},{"_id":"themes/cactus/source/lib/vazir-font/Vazir-Variable.eot","hash":"af46f7f4e10a1440a4c97b350622d279143e6798","modified":1768524206648},{"_id":"themes/cactus/source/lib/font-awesome/css/all.min.css","hash":"2bf056f1697bf3afdf49e56573d63b114374661e","modified":1768524206564},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.woff2","hash":"4350f9ba93384634faf35f41c503c99c767f1069","modified":1768524206567},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.woff2","hash":"6b99aa650bd12a36caa14e0127435d8f4cd3ba73","modified":1768524206573},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-brands-400.ttf","hash":"f0982a77285d53653845b0a78170b4688db972f1","modified":1768524206567},{"_id":"themes/cactus/source/images/logo.png","hash":"0e3029251dfda26adee2761f71377297e8c26871","modified":1768524206560},{"_id":"themes/cactus/source/lib/font-awesome/webfonts/fa-solid-900.ttf","hash":"20bd663830188cbadd2264e1daf9497c3ffc3621","modified":1768524206573},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Italic.ttf","hash":"96c97a0a098ca40802f948ae56fa37aa6683d034","modified":1768524206592},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Italic.ttf","hash":"68700db02debd4b922304134da83b829cbfddfc9","modified":1768524206609},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Italic.ttf","hash":"7f7cdbdcc26279c04046632e22d872f111bc9399","modified":1768524206620},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Bold.ttf","hash":"bfa1ed9a263ed78462f06d322de13bd5bd0906b2","modified":1768524206583},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-BoldItalic.ttf","hash":"a9a431fc7a6c3a67c98021d4035c12a07a4f1070","modified":1768524206587},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Bold.ttf","hash":"a8a8df3393bccc365335fc5eb0a62a6b7ccd32b9","modified":1768524206599},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGL-Regular.ttf","hash":"2b912dd13f052f645ee19951604610bb350d50af","modified":1768524206597},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-BoldItalic.ttf","hash":"d895a1bd25e36c58b7f463ebe14de09f186d5ab4","modified":1768524206617},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-BoldItalic.ttf","hash":"65ddb11e75ee93909e845ab912a36717c48f1c94","modified":1768524206604},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Regular.ttf","hash":"56fa0e33a390b704afc56af93a31576ccdbbdd9e","modified":1768524206623},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGM-Regular.ttf","hash":"5e220152adefe905b2197f873d7cee99eca50e91","modified":1768524206612},{"_id":"themes/cactus/source/lib/meslo-LG/MesloLGS-Bold.ttf","hash":"df202ce09cbdc70bc16b81983a13ef0f94e46f10","modified":1768524206614},{"_id":"public/search.xml","hash":"5980a451efa4fe6c1bfccbe2bd0292a7e7679934","modified":1772100284134},{"_id":"public/categories/index.html","hash":"b406f71bdc28f7f8c3edc78709fd6c2717ca5039","modified":1772100284134},{"_id":"public/tags/index.html","hash":"7124ce569217a32015c129f4238db13b31aa00e8","modified":1772100284134},{"_id":"public/search/index.html","hash":"5627d7bf926a2eac8596be19d0fbf954fb68888a","modified":1772100284134},{"_id":"public/about/index.html","hash":"c944d2a2a0b22b4630ad8f502f9f4a465cf20dd0","modified":1772100284134},{"_id":"public/2026/02/26/logarithm-formulas-guide-md/index.html","hash":"79ac02d4089b9da8cd2b3545a45341fefa46c0cf","modified":1772100284134},{"_id":"public/2026/02/20/vector-based-arrow-rendering-for-line-segments-md/index.html","hash":"ce3d0f75c76c3ef530db4841ceb5d3da8d679cff","modified":1772100284134},{"_id":"public/2026/01/24/perfer-stackalloc-usage/index.html","hash":"14c7635526b97c20455279dab9b4bfd8796fd37f","modified":1772100284134},{"_id":"public/2026/01/19/span-usage/index.html","hash":"1c21d18f23bceb786ce688bdc5fbd4755b88a209","modified":1772100284134},{"_id":"public/2026/01/18/readonlyspan-usage/index.html","hash":"2d0ce9e3b7c987b43985ba1a4bf1f62078dc5116","modified":1772100284134},{"_id":"public/2026/01/16/perfer-arraypool-usage/index.html","hash":"d6250bcda855d9dc93f660fd3cdf4e245e97efa3","modified":1772100284134},{"_id":"public/2026/01/17/arraypool-what-you-should-know/index.html","hash":"2a53476d16f967ce7f218f35307852b60c342f47","modified":1772100284134},{"_id":"public/archives/index.html","hash":"0caabe732fdf5fdf77b184be24d905f9f0c0b558","modified":1772100284134},{"_id":"public/archives/2026/index.html","hash":"449e4c311befcf52c1ebb2e82271d08852daddef","modified":1772100284134},{"_id":"public/archives/2026/01/index.html","hash":"a53ff893e7bba29fb0df0e5dcca3049bafca0f8a","modified":1772100284134},{"_id":"public/index.html","hash":"89e6cdd597ea408c2afde0c4c539afbc73204409","modified":1772100284134},{"_id":"public/archives/2026/02/index.html","hash":"a3e4ffc5c8d4679f4f4446bb12aea7cf91b75159","modified":1772100284134},{"_id":"public/2026/01/16/do-not-use-arraylist/index.html","hash":"421a1d0fa77da9c67459b5d84b425f308f25afa7","modified":1772100284134},{"_id":"public/categories/C/Array/index.html","hash":"beff904dab6e3999a049a708fab8827475dc6515","modified":1772100284134},{"_id":"public/categories/C/index.html","hash":"30716cdb104ab4f1c4e71488c315f32a4ed6d6a8","modified":1772100284134},{"_id":"public/categories/Math/index.html","hash":"1975166c4d0cb013eea80363a4572859e52bfbce","modified":1772100284134},{"_id":"public/categories/C/stackalloc/index.html","hash":"6ac19c1cb64e60ea577e17ef57a1407d3a88806a","modified":1772100284134},{"_id":"public/categories/C/Vector/index.html","hash":"c5c95940d8a5a5aa1825d2440e606029b2fbb09e","modified":1772100284134},{"_id":"public/tags/C/index.html","hash":"4af233972a6bb8acf40dfe729bddc463a7bad4d0","modified":1772100284134},{"_id":"public/tags/Array/index.html","hash":"4e9708d5d340c839b618b3a545729dd2bd4a34f2","modified":1772100284134},{"_id":"public/tags/ArrayList/index.html","hash":"65ef4279d2bdb05cb5619a4652c6b85e01cdbae5","modified":1772100284134},{"_id":"public/tags/ArrayPool/index.html","hash":"12bec68ea0f8dc17975688974b1fc732c4258e6e","modified":1772100284134},{"_id":"public/tags/Math/index.html","hash":"7a1396a43163fb23d8216f9ced13bca66b00135b","modified":1772100284134},{"_id":"public/tags/ReadOnlySpan/index.html","hash":"b1089d880fd968159ce72270562ff2ddb8d22c29","modified":1772100284134},{"_id":"public/tags/stackalloc/index.html","hash":"3fd655f32fb6fbaa1728b31277a16f16d317ea75","modified":1772100284134},{"_id":"public/tags/Span-T/index.html","hash":"6acf43ab0802fdd9da80b2615dd28d1d1233d8f1","modified":1772100284134},{"_id":"public/tags/SkiaSharp/index.html","hash":"319c1c1f70cfef42c1cc9d002af7f81456e3cbdb","modified":1772100284134},{"_id":"public/404.html","hash":"1a6d75dea592c27753b86edbdd4c4e315b36efd8","modified":1772100284134},{"_id":"public/tags/Vector/index.html","hash":"04ff654dc1b4830f66ce92f648dea23ad8f72c4c","modified":1772100284134},{"_id":"public/images/arraylist/arraylist_add_valuetype_il_code.png","hash":"1de4f95187e0e231681673dcca3469fee1de94fb","modified":1772100284134},{"_id":"public/images/favicon-192x192.png","hash":"96e6fcbbb13a5914a6131391e210eb7dfd13d692","modified":1772100284134},{"_id":"public/images/favicon.ico","hash":"189f9842bcb79a6f8f9e8445bc8bbd773443826b","modified":1772100284134},{"_id":"public/images/apple-touch-icon.png","hash":"57e2def34682655f41a0be2d083f16765ba7858b","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Black.woff","hash":"f6fda2de0348b3e3b7de73267f9f8e97a62f8353","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Black.woff2","hash":"7ea4fd7dd4cd4f480af78a0e2c5849eb921b1aeb","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Bold.woff","hash":"56e632c9196fac364c66f812a3b4635dd999ad1c","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Bold.woff2","hash":"6e40d0c7669c1adbcbf034bdc459f7bed4d6676d","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Light.woff2","hash":"50b654d916204c30987d1987abd890ef92085ae3","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Medium.woff","hash":"43a8aaa3fca8721dd32a5d20f7a98dfbc87c97fd","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Light.woff","hash":"1c3dbf17411b1f6a6b22c2b76e9d8511586643d0","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Medium.woff2","hash":"14b3e257c51a6a11d23b2a078017ff340c9777e4","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Regular.woff2","hash":"a9714ffb842afc74836e64de04b52d8c37c87c8a","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Regular.woff","hash":"235889d59ddad2b1f3243ccaab7733bd713a2a21","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Thin.woff","hash":"c0e784de2eb5261cca244928f8a81fd893c3fe16","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Thin.woff2","hash":"9b03b1a9071709f5b7dbca13412ecef6cb7a2a67","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Variable.woff2","hash":"e213bb26bc7f10e1df3fe2d03d3ecaecd6e6d371","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Variable.woff","hash":"2e8e6d38d361def5f48baac366f04e3db3ed4828","modified":1772100284134},{"_id":"public/lib/font-awesome/webfonts/fa-regular-400.woff2","hash":"fb363d27cfdfe71a243fa2ac3dab2815232b9b7e","modified":1772100284134},{"_id":"public/lib/font-awesome/webfonts/fa-regular-400.ttf","hash":"67afa6237670ab99125056f2899129f22912dcf3","modified":1772100284134},{"_id":"public/lib/font-awesome/webfonts/fa-v4compatibility.woff2","hash":"8f80d0bbe995f7fe92320fdaec10cd5ccd710a51","modified":1772100284134},{"_id":"public/lib/font-awesome/webfonts/fa-v4compatibility.ttf","hash":"a9d072aca9e0fadc2a7167671ce3d6b18d9cd2cc","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Black.eot","hash":"91152bd73e7ff8d943e3bde3ddb0fa0a018e1c21","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Black.ttf","hash":"b65915e3fa57b5c19995d15dc2341d115c1971b9","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Bold.ttf","hash":"122bb778b17a152c426a825ee981610a4bd59bf3","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Bold.eot","hash":"5c1c680fade45393e4a5bb4548a092cd5ea6811e","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Light.eot","hash":"a059359e9bea17dc2ff2ede955a05bf0dc4d00d0","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Light.ttf","hash":"df82b80c4d3b11e70dcd269fc62ac97cbfa0414d","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Medium.eot","hash":"d9ec1f9f3fefd57e446cbe86dc297f1ff269b6de","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Medium.ttf","hash":"948a091f0fdb8c7ae17d5ef8e51bd8830d65dd9a","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Regular.eot","hash":"521c01f0eb79a48025e972ecbe21b0d7fb15437b","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Regular.ttf","hash":"643c28c8f8a2bce1a0d62525aa045cd9883773cd","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Thin.ttf","hash":"6aacb0eecb03c660570b6e159ba5ca97ca7461cf","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Thin.eot","hash":"a0ea0bdaef00b35544f9a21d25d35db9a79f7189","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Variable.eot","hash":"af46f7f4e10a1440a4c97b350622d279143e6798","modified":1772100284134},{"_id":"public/lib/vazir-font/Vazir-Variable.ttf","hash":"1e08b6373c2e086f24776df9b11e4be6bbcc8a4a","modified":1772100284134},{"_id":"public/lib/font-awesome/webfonts/fa-brands-400.woff2","hash":"4350f9ba93384634faf35f41c503c99c767f1069","modified":1772100284134},{"_id":"public/css/rtl.css","hash":"9589fac02a34fd9084f805f801889028756bbb65","modified":1772100284134},{"_id":"public/css/style.css","hash":"3c724019ee60943f08fd9a473383abb7e62a01c2","modified":1772100284134},{"_id":"public/js/search.js","hash":"914a2ce72fb325106c61600200be823b72bfb39f","modified":1772100284134},{"_id":"public/js/main.js","hash":"619ac6529d140711e3b14f739a192bb31c4824ff","modified":1772100284134},{"_id":"public/lib/vazir-font/font-face.css","hash":"ba0030e1cd28a8caa7a5bb74b98da7c7bb185c90","modified":1772100284134},{"_id":"public/lib/clipboard/clipboard.min.js","hash":"9a7cb405f9beed005891587d41f76a0720893ffc","modified":1772100284134},{"_id":"public/lib/justified-gallery/css/justifiedGallery.min.css","hash":"dd3052149d3054f35efb823c68dd78e78aad5875","modified":1772100284134},{"_id":"public/lib/justified-gallery/js/jquery.justifiedGallery.min.js","hash":"ad8f48b4022498078b089fcdd1e8b47faf496931","modified":1772100284134},{"_id":"public/lib/font-awesome/css/all.min.css","hash":"8c06d82739d14b094ff6d9036021a252bd1d985d","modified":1772100284134},{"_id":"public/lib/jquery/jquery.min.js","hash":"eda46747c71d38a880bee44f9a439c3858bb8f99","modified":1772100284134},{"_id":"public/lib/font-awesome/webfonts/fa-solid-900.woff2","hash":"6b99aa650bd12a36caa14e0127435d8f4cd3ba73","modified":1772100284134},{"_id":"public/lib/font-awesome/webfonts/fa-brands-400.ttf","hash":"f0982a77285d53653845b0a78170b4688db972f1","modified":1772100284134},{"_id":"public/images/logo.png","hash":"0e3029251dfda26adee2761f71377297e8c26871","modified":1772100284134},{"_id":"public/lib/font-awesome/webfonts/fa-solid-900.ttf","hash":"20bd663830188cbadd2264e1daf9497c3ffc3621","modified":1772100284134},{"_id":"public/lib/meslo-LG/MesloLGL-Italic.ttf","hash":"96c97a0a098ca40802f948ae56fa37aa6683d034","modified":1772100284134},{"_id":"public/lib/meslo-LG/MesloLGM-Italic.ttf","hash":"68700db02debd4b922304134da83b829cbfddfc9","modified":1772100284134},{"_id":"public/lib/meslo-LG/MesloLGS-Italic.ttf","hash":"7f7cdbdcc26279c04046632e22d872f111bc9399","modified":1772100284134},{"_id":"public/lib/meslo-LG/MesloLGL-BoldItalic.ttf","hash":"a9a431fc7a6c3a67c98021d4035c12a07a4f1070","modified":1772100284134},{"_id":"public/lib/meslo-LG/MesloLGM-Bold.ttf","hash":"a8a8df3393bccc365335fc5eb0a62a6b7ccd32b9","modified":1772100284134},{"_id":"public/lib/meslo-LG/MesloLGM-BoldItalic.ttf","hash":"65ddb11e75ee93909e845ab912a36717c48f1c94","modified":1772100284134},{"_id":"public/lib/meslo-LG/MesloLGL-Bold.ttf","hash":"bfa1ed9a263ed78462f06d322de13bd5bd0906b2","modified":1772100284134},{"_id":"public/lib/meslo-LG/MesloLGS-BoldItalic.ttf","hash":"d895a1bd25e36c58b7f463ebe14de09f186d5ab4","modified":1772100284134},{"_id":"public/lib/meslo-LG/MesloLGL-Regular.ttf","hash":"2b912dd13f052f645ee19951604610bb350d50af","modified":1772100284134},{"_id":"public/lib/meslo-LG/MesloLGS-Bold.ttf","hash":"df202ce09cbdc70bc16b81983a13ef0f94e46f10","modified":1772100284134},{"_id":"public/lib/meslo-LG/MesloLGM-Regular.ttf","hash":"5e220152adefe905b2197f873d7cee99eca50e91","modified":1772100284134},{"_id":"public/lib/meslo-LG/MesloLGS-Regular.ttf","hash":"56fa0e33a390b704afc56af93a31576ccdbbdd9e","modified":1772100284134}],"Category":[{"name":"C#","_id":"cmm3ar6w100046gu8db1h5otc"},{"name":"Array","parent":"cmm3ar6w100046gu8db1h5otc","_id":"cmm3ar6w8000h6gu8d0vf0g59"},{"name":"Math","_id":"cmm3ar6w9000k6gu83dkld2yp"},{"name":"stackalloc","parent":"cmm3ar6w100046gu8db1h5otc","_id":"cmm3ar6w9000p6gu8azt68s7f"},{"name":"Vector","parent":"cmm3ar6w100046gu8db1h5otc","_id":"cmm3ar6wp001l6gu8615i063f"}],"Data":[{"_id":"projects","data":[{"name":"Font Awesome","url":"http://fontawesome.io/","desc":"The iconic font and CSS toolkit"}]}],"Page":[{"title":"tags","type":"tags","date":"2026-01-16T04:10:08.000Z","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ntype: tags\ndate: 2026-01-16 12:10:08\n---\n","updated":"2026-01-16T04:10:25.078Z","path":"tags/index.html","comments":1,"layout":"page","_id":"cmm3ar6vu00006gu86whphvtn","content":"","excerpt":"","more":""},{"title":"categories","type":"categories","date":"2026-01-16T04:12:11.000Z","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ntype: categories\ndate: 2026-01-16 12:12:11\n---\n","updated":"2026-01-16T04:12:24.382Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cmm3ar6vy00026gu81yod2lhp","content":"","excerpt":"","more":""},{"title":"search","type":"search","date":"2026-01-16T03:48:29.000Z","_content":"","source":"search/index.md","raw":"---\ntitle: search\ntype: search\ndate: 2026-01-16 11:48:29\n---\n","updated":"2026-01-16T03:49:14.568Z","path":"search/index.html","comments":1,"layout":"page","_id":"cmm3ar6w300066gu8beenf3yo","content":"","excerpt":"","more":""},{"title":"about","type":"about","date":"2026-01-16T00:46:48.000Z","_content":"","source":"about/index.md","raw":"---\ntitle: about\ntype: about\ndate: 2026-01-16 08:46:48\n---\n","updated":"2026-01-16T04:05:00.933Z","path":"about/index.html","comments":1,"layout":"page","_id":"cmm3ar6w400086gu8fm8vdkg5","content":"","excerpt":"","more":""}],"Post":[{"title":" ArrayPool ","date":"2026-01-17T06:37:55.000Z","_content":"\n### **2026-01-17 15:30:37**\n\n---\n\n## ArrayPool\\<T\\>.Rent  try-catch\n\n ArrayPool\\<T\\>.Shared.Rent(int minimumLength)  try-catch  ArrayPool \n\n### \n\n Rent \n\n```csharp\nbyte[]? buffer = null;\n\ntry\n{\n    // \n    buffer = ArrayPool<byte>.Shared.Rent(256);\n\n    // \n    buffer[0] = 123;\n    buffer[1] = 234;\n    buffer[2] = 255;\n    // ... \n}\nfinally\n{\n    // \n    if (buffer != null)\n    {\n        ArrayPool<byte>.Shared.Return(buffer);\n    }\n}\n```\n\n Rent  try-finally -\n\n### Rent  try-catch\n\n ArrayPool  Rent  try-catch \n\n1. ****\n\n Rent  Return\n\n```csharp\n// \nT[]? buffer;\n\n// ... \n\n// \nbuffer = typeof(T).IsPrimitive && typeof(T) != typeof(bool) \n    ? GC.AllocateUninitializedArray<T>(minimumLength)  // bool\n    : new T[minimumLength];  // \n```\n\nRent \n\n****\n- Type.IsPrimitive .NET [](https://learn.microsoft.com/zh-cn/dotnet/api/system.type.isprimitive?view=net-9.0)\n- GC.AllocateUninitializedArray\\<T\\> new T[length]\n\n2. **Rent minimumLength < 0**\n\n\n\n```csharp\n// \nArgumentOutOfRangeException.ThrowIfNegative(minimumLength);\n```\n\n****\n-  minimumLength < 0 Rent  ArgumentOutOfRangeException\n-  try-catch \n\n3. **minimumLength = 0 **\n\n minimumLength = 0\n\n```csharp\n//  0 \nelse if (minimumLength == 0)\n{\n    //  0  API \n    // \n    return Array.Empty<T>();\n}\n```\n\n****\n-  Array.Empty\\<T\\>() 0\n- if (buffer.Length == 0)\n\n##  try-catch\n\n1. ** Rent  try-catch**\n\n- Rent  minimumLength < 0 \n- \n\n2. ** try-finally catch**\n\n-  Rent ****\n-  catch try-finally \n\n```csharp\nbyte[]? buffer = null;\n\ntry\n{\n    //  Rent \n    if (minimumLength < 0)\n    {\n        throw new ArgumentOutOfRangeException(nameof(minimumLength), \"\");\n    }\n\n    buffer = ArrayPool<byte>.Shared.Rent(minimumLength);\n    \n    // \n    if (buffer.Length > 0) //  minimumLength=0 \n    {\n        buffer[0] = 123;\n        // ... \n    }\n}\nfinally\n{\n    // \n    if (buffer != null)\n    {\n        ArrayPool<byte>.Shared.Return(buffer);\n    }\n}\n```\n\n## \n\n1.  minimumLength=0 Return \n2. Return \n3. GC.AllocateUninitializedArray\\<T\\>  new T[length] \n","source":"_posts/arraypool-what-you-should-know.md","raw":"---\ntitle:  ArrayPool \ndate: 2026-01-17 14:37:55\ntags:\n- C#\n- Array\n- ArrayPool\ncategories:\n- C#\n- Array\n---\n\n### **2026-01-17 15:30:37**\n\n---\n\n## ArrayPool\\<T\\>.Rent  try-catch\n\n ArrayPool\\<T\\>.Shared.Rent(int minimumLength)  try-catch  ArrayPool \n\n### \n\n Rent \n\n```csharp\nbyte[]? buffer = null;\n\ntry\n{\n    // \n    buffer = ArrayPool<byte>.Shared.Rent(256);\n\n    // \n    buffer[0] = 123;\n    buffer[1] = 234;\n    buffer[2] = 255;\n    // ... \n}\nfinally\n{\n    // \n    if (buffer != null)\n    {\n        ArrayPool<byte>.Shared.Return(buffer);\n    }\n}\n```\n\n Rent  try-finally -\n\n### Rent  try-catch\n\n ArrayPool  Rent  try-catch \n\n1. ****\n\n Rent  Return\n\n```csharp\n// \nT[]? buffer;\n\n// ... \n\n// \nbuffer = typeof(T).IsPrimitive && typeof(T) != typeof(bool) \n    ? GC.AllocateUninitializedArray<T>(minimumLength)  // bool\n    : new T[minimumLength];  // \n```\n\nRent \n\n****\n- Type.IsPrimitive .NET [](https://learn.microsoft.com/zh-cn/dotnet/api/system.type.isprimitive?view=net-9.0)\n- GC.AllocateUninitializedArray\\<T\\> new T[length]\n\n2. **Rent minimumLength < 0**\n\n\n\n```csharp\n// \nArgumentOutOfRangeException.ThrowIfNegative(minimumLength);\n```\n\n****\n-  minimumLength < 0 Rent  ArgumentOutOfRangeException\n-  try-catch \n\n3. **minimumLength = 0 **\n\n minimumLength = 0\n\n```csharp\n//  0 \nelse if (minimumLength == 0)\n{\n    //  0  API \n    // \n    return Array.Empty<T>();\n}\n```\n\n****\n-  Array.Empty\\<T\\>() 0\n- if (buffer.Length == 0)\n\n##  try-catch\n\n1. ** Rent  try-catch**\n\n- Rent  minimumLength < 0 \n- \n\n2. ** try-finally catch**\n\n-  Rent ****\n-  catch try-finally \n\n```csharp\nbyte[]? buffer = null;\n\ntry\n{\n    //  Rent \n    if (minimumLength < 0)\n    {\n        throw new ArgumentOutOfRangeException(nameof(minimumLength), \"\");\n    }\n\n    buffer = ArrayPool<byte>.Shared.Rent(minimumLength);\n    \n    // \n    if (buffer.Length > 0) //  minimumLength=0 \n    {\n        buffer[0] = 123;\n        // ... \n    }\n}\nfinally\n{\n    // \n    if (buffer != null)\n    {\n        ArrayPool<byte>.Shared.Return(buffer);\n    }\n}\n```\n\n## \n\n1.  minimumLength=0 Return \n2. Return \n3. GC.AllocateUninitializedArray\\<T\\>  new T[length] \n","slug":"arraypool-what-you-should-know","published":1,"updated":"2026-01-17T07:34:07.279Z","comments":1,"layout":"post","photos":[],"_id":"cmm3ar6vw00016gu8dahu03wp","content":"<h3 id=\"2026-01-17-15-30-37\"><a href=\"#2026-01-17-15-30-37\" class=\"headerlink\" title=\"2026-01-17 15:30:37\"></a><strong>2026-01-17 15:30:37</strong></h3><hr>\n<h2 id=\"ArrayPool-Rent--try-catch\"><a href=\"#ArrayPool-Rent--try-catch\" class=\"headerlink\" title=\"ArrayPool&lt;T&gt;.Rent  try-catch\"></a>ArrayPool&lt;T&gt;.Rent  try-catch</h2><p> ArrayPool&lt;T&gt;.Shared.Rent(int minimumLength)  try-catch  ArrayPool </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Rent </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">byte</span>[]? buffer = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    buffer = ArrayPool&lt;<span class=\"built_in\">byte</span>&gt;.Shared.Rent(<span class=\"number\">256</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    buffer[<span class=\"number\">0</span>] = <span class=\"number\">123</span>;</span><br><span class=\"line\">    buffer[<span class=\"number\">1</span>] = <span class=\"number\">234</span>;</span><br><span class=\"line\">    buffer[<span class=\"number\">2</span>] = <span class=\"number\">255</span>;</span><br><span class=\"line\">    <span class=\"comment\">// ... </span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">finally</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (buffer != <span class=\"literal\">null</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        ArrayPool&lt;<span class=\"built_in\">byte</span>&gt;.Shared.Return(buffer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> Rent  try-finally -</p>\n<h3 id=\"Rent--try-catch\"><a href=\"#Rent--try-catch\" class=\"headerlink\" title=\"Rent  try-catch\"></a>Rent  try-catch</h3><p> ArrayPool  Rent  try-catch </p>\n<ol>\n<li><strong></strong></li>\n</ol>\n<p> Rent  Return</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">T[]? buffer;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ... </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">buffer = <span class=\"keyword\">typeof</span>(T).IsPrimitive &amp;&amp; <span class=\"keyword\">typeof</span>(T) != <span class=\"keyword\">typeof</span>(<span class=\"built_in\">bool</span>) </span><br><span class=\"line\">    ? GC.AllocateUninitializedArray&lt;T&gt;(minimumLength)  <span class=\"comment\">// bool</span></span><br><span class=\"line\">    : <span class=\"keyword\">new</span> T[minimumLength];  <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n\n<p>Rent </p>\n<p><strong></strong></p>\n<ul>\n<li>Type.IsPrimitive .NET <a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.type.isprimitive?view=net-9.0\"></a></li>\n<li>GC.AllocateUninitializedArray&lt;T&gt; new T[length]</li>\n</ul>\n<ol start=\"2\">\n<li><strong>Rent minimumLength &lt; 0</strong></li>\n</ol>\n<p></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">ArgumentOutOfRangeException.ThrowIfNegative(minimumLength);</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<ul>\n<li> minimumLength &lt; 0 Rent  ArgumentOutOfRangeException</li>\n<li> try-catch </li>\n</ul>\n<ol start=\"3\">\n<li><strong>minimumLength &#x3D; 0 </strong></li>\n</ol>\n<p> minimumLength &#x3D; 0</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  0 </span></span><br><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (minimumLength == <span class=\"number\">0</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">//  0  API </span></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> Array.Empty&lt;T&gt;();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<ul>\n<li> Array.Empty&lt;T&gt;() 0</li>\n<li>if (buffer.Length &#x3D;&#x3D; 0)</li>\n</ul>\n<h2 id=\"-try-catch\"><a href=\"#-try-catch\" class=\"headerlink\" title=\" try-catch\"></a> try-catch</h2><ol>\n<li><strong> Rent  try-catch</strong></li>\n</ol>\n<ul>\n<li>Rent  minimumLength &lt; 0 </li>\n<li></li>\n</ul>\n<ol start=\"2\">\n<li><strong> try-finally catch</strong></li>\n</ol>\n<ul>\n<li> Rent <strong></strong></li>\n<li> catch try-finally </li>\n</ul>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">byte</span>[]? buffer = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">//  Rent </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (minimumLength &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> ArgumentOutOfRangeException(<span class=\"keyword\">nameof</span>(minimumLength), <span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    buffer = ArrayPool&lt;<span class=\"built_in\">byte</span>&gt;.Shared.Rent(minimumLength);</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (buffer.Length &gt; <span class=\"number\">0</span>) <span class=\"comment\">//  minimumLength=0 </span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        buffer[<span class=\"number\">0</span>] = <span class=\"number\">123</span>;</span><br><span class=\"line\">        <span class=\"comment\">// ... </span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">finally</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (buffer != <span class=\"literal\">null</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        ArrayPool&lt;<span class=\"built_in\">byte</span>&gt;.Shared.Return(buffer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li> minimumLength&#x3D;0 Return </li>\n<li>Return </li>\n<li>GC.AllocateUninitializedArray&lt;T&gt;  new T[length] </li>\n</ol>\n","excerpt":"","more":"<h3 id=\"2026-01-17-15-30-37\"><a href=\"#2026-01-17-15-30-37\" class=\"headerlink\" title=\"2026-01-17 15:30:37\"></a><strong>2026-01-17 15:30:37</strong></h3><hr>\n<h2 id=\"ArrayPool-Rent--try-catch\"><a href=\"#ArrayPool-Rent--try-catch\" class=\"headerlink\" title=\"ArrayPool&lt;T&gt;.Rent  try-catch\"></a>ArrayPool&lt;T&gt;.Rent  try-catch</h2><p> ArrayPool&lt;T&gt;.Shared.Rent(int minimumLength)  try-catch  ArrayPool </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> Rent </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">byte</span>[]? buffer = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    buffer = ArrayPool&lt;<span class=\"built_in\">byte</span>&gt;.Shared.Rent(<span class=\"number\">256</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    buffer[<span class=\"number\">0</span>] = <span class=\"number\">123</span>;</span><br><span class=\"line\">    buffer[<span class=\"number\">1</span>] = <span class=\"number\">234</span>;</span><br><span class=\"line\">    buffer[<span class=\"number\">2</span>] = <span class=\"number\">255</span>;</span><br><span class=\"line\">    <span class=\"comment\">// ... </span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">finally</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (buffer != <span class=\"literal\">null</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        ArrayPool&lt;<span class=\"built_in\">byte</span>&gt;.Shared.Return(buffer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p> Rent  try-finally -</p>\n<h3 id=\"Rent--try-catch\"><a href=\"#Rent--try-catch\" class=\"headerlink\" title=\"Rent  try-catch\"></a>Rent  try-catch</h3><p> ArrayPool  Rent  try-catch </p>\n<ol>\n<li><strong></strong></li>\n</ol>\n<p> Rent  Return</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">T[]? buffer;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ... </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">buffer = <span class=\"keyword\">typeof</span>(T).IsPrimitive &amp;&amp; <span class=\"keyword\">typeof</span>(T) != <span class=\"keyword\">typeof</span>(<span class=\"built_in\">bool</span>) </span><br><span class=\"line\">    ? GC.AllocateUninitializedArray&lt;T&gt;(minimumLength)  <span class=\"comment\">// bool</span></span><br><span class=\"line\">    : <span class=\"keyword\">new</span> T[minimumLength];  <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n\n<p>Rent </p>\n<p><strong></strong></p>\n<ul>\n<li>Type.IsPrimitive .NET <a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.type.isprimitive?view=net-9.0\"></a></li>\n<li>GC.AllocateUninitializedArray&lt;T&gt; new T[length]</li>\n</ul>\n<ol start=\"2\">\n<li><strong>Rent minimumLength &lt; 0</strong></li>\n</ol>\n<p></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">ArgumentOutOfRangeException.ThrowIfNegative(minimumLength);</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<ul>\n<li> minimumLength &lt; 0 Rent  ArgumentOutOfRangeException</li>\n<li> try-catch </li>\n</ul>\n<ol start=\"3\">\n<li><strong>minimumLength &#x3D; 0 </strong></li>\n</ol>\n<p> minimumLength &#x3D; 0</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  0 </span></span><br><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (minimumLength == <span class=\"number\">0</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">//  0  API </span></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> Array.Empty&lt;T&gt;();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong></strong></p>\n<ul>\n<li> Array.Empty&lt;T&gt;() 0</li>\n<li>if (buffer.Length &#x3D;&#x3D; 0)</li>\n</ul>\n<h2 id=\"-try-catch\"><a href=\"#-try-catch\" class=\"headerlink\" title=\" try-catch\"></a> try-catch</h2><ol>\n<li><strong> Rent  try-catch</strong></li>\n</ol>\n<ul>\n<li>Rent  minimumLength &lt; 0 </li>\n<li></li>\n</ul>\n<ol start=\"2\">\n<li><strong> try-finally catch</strong></li>\n</ol>\n<ul>\n<li> Rent <strong></strong></li>\n<li> catch try-finally </li>\n</ul>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">byte</span>[]? buffer = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">//  Rent </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (minimumLength &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> ArgumentOutOfRangeException(<span class=\"keyword\">nameof</span>(minimumLength), <span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    buffer = ArrayPool&lt;<span class=\"built_in\">byte</span>&gt;.Shared.Rent(minimumLength);</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (buffer.Length &gt; <span class=\"number\">0</span>) <span class=\"comment\">//  minimumLength=0 </span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        buffer[<span class=\"number\">0</span>] = <span class=\"number\">123</span>;</span><br><span class=\"line\">        <span class=\"comment\">// ... </span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">finally</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (buffer != <span class=\"literal\">null</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        ArrayPool&lt;<span class=\"built_in\">byte</span>&gt;.Shared.Return(buffer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li> minimumLength&#x3D;0 Return </li>\n<li>Return </li>\n<li>GC.AllocateUninitializedArray&lt;T&gt;  new T[length] </li>\n</ol>\n"},{"title":" ArrayList ","date":"2026-01-16T15:15:08.000Z","_content":"\n##  C# ArrayList\n\nArrayList  C#  object  _items  Add \n\n\n\n```csharp\nprivate object?[] _items;  // \n```\n\n- **Add **\n\nAdd  object\n\n```csharp\npublic virtual int Add(object? value);\n```\n\n## \n\n ArrayList  object  intchardouble **boxingunboxing** \n\n- ArrayList \n\n```csharp\npublic void M()\n{\n    ArrayList arrayList = new ArrayList();\n    arrayList.Add(1);      // int    object\n    arrayList.Add('a');    // char    object\n    arrayList.Add(3.0);    // double    object\n}\n```\n\n- ArrayList  IL\n\n C#  IL \n\n![ArrayList  IL](../images/arraylist/arraylist_add_valuetype_il_code.png)\n\n## \n\n****object\n\n 1intIL  box [System.Runtime]System.Int32  Add(object)  box  5  IL 1  + 4 \n\n /  List\\<T\\> / \n\n## \n\n- [C#  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/csharp/fundamentals/types/)\n- [C#  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/csharp/programming-guide/types/boxing-and-unboxing)\n- [IL-box  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/api/system.reflection.emit.opcodes.box?view=net-9.0)\n- [ArrayList.cs - Github](https://github.com/dotnet/runtime/blob/main/src/libraries/System.Private.CoreLib/src/System/Collections/ArrayList.cs)\n- [ - sharplab](https://sharplab.io/#v2:C4LglgNgPgAgTARgLACgYAYAEMEDoDCA9hBAKYDGwYhAdgM4DcqMAzNnJvpgN6qb/Y2MACyYAsgAoAlDz4D5AQQBOSgIYBPADJg6wTKpUbtuzAF5MNUgHdMytVp3BpTFPPkH7x4LgUATXxIIUi5uAh5Gjj7+EgDkqjHBcqHhDrpRASy46ImuAgC+qHlAA===)\n","source":"_posts/do-not-use-arraylist.md","raw":"---\ntitle:  ArrayList \ndate: 2026-01-16 23:15:08\ntags:\n- C#\n- Array\n- ArrayList\ncategories:\n- C#\n- Array\n---\n\n##  C# ArrayList\n\nArrayList  C#  object  _items  Add \n\n\n\n```csharp\nprivate object?[] _items;  // \n```\n\n- **Add **\n\nAdd  object\n\n```csharp\npublic virtual int Add(object? value);\n```\n\n## \n\n ArrayList  object  intchardouble **boxingunboxing** \n\n- ArrayList \n\n```csharp\npublic void M()\n{\n    ArrayList arrayList = new ArrayList();\n    arrayList.Add(1);      // int    object\n    arrayList.Add('a');    // char    object\n    arrayList.Add(3.0);    // double    object\n}\n```\n\n- ArrayList  IL\n\n C#  IL \n\n![ArrayList  IL](../images/arraylist/arraylist_add_valuetype_il_code.png)\n\n## \n\n****object\n\n 1intIL  box [System.Runtime]System.Int32  Add(object)  box  5  IL 1  + 4 \n\n /  List\\<T\\> / \n\n## \n\n- [C#  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/csharp/fundamentals/types/)\n- [C#  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/csharp/programming-guide/types/boxing-and-unboxing)\n- [IL-box  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/api/system.reflection.emit.opcodes.box?view=net-9.0)\n- [ArrayList.cs - Github](https://github.com/dotnet/runtime/blob/main/src/libraries/System.Private.CoreLib/src/System/Collections/ArrayList.cs)\n- [ - sharplab](https://sharplab.io/#v2:C4LglgNgPgAgTARgLACgYAYAEMEDoDCA9hBAKYDGwYhAdgM4DcqMAzNnJvpgN6qb/Y2MACyYAsgAoAlDz4D5AQQBOSgIYBPADJg6wTKpUbtuzAF5MNUgHdMytVp3BpTFPPkH7x4LgUATXxIIUi5uAh5Gjj7+EgDkqjHBcqHhDrpRASy46ImuAgC+qHlAA===)\n","slug":"do-not-use-arraylist","published":1,"updated":"2026-01-17T01:59:04.924Z","comments":1,"layout":"post","photos":[],"_id":"cmm3ar6vz00036gu87gttgji2","content":"<h2 id=\"-C-ArrayList\"><a href=\"#-C-ArrayList\" class=\"headerlink\" title=\" C# ArrayList\"></a> C# ArrayList</h2><p>ArrayList  C#  object  _items  Add </p>\n<p></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"built_in\">object</span>?[] _items;  <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>Add </strong></li>\n</ul>\n<p>Add  object</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> <span class=\"built_in\">int</span> <span class=\"title\">Add</span>(<span class=\"params\"><span class=\"built_in\">object</span>? <span class=\"keyword\">value</span></span>)</span>;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> ArrayList  object  intchardouble <strong>boxingunboxing</strong> </p>\n<ul>\n<li>ArrayList </li>\n</ul>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">M</span>()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    ArrayList arrayList = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">    arrayList.Add(<span class=\"number\">1</span>);      <span class=\"comment\">// int    object</span></span><br><span class=\"line\">    arrayList.Add(<span class=\"string\">&#x27;a&#x27;</span>);    <span class=\"comment\">// char    object</span></span><br><span class=\"line\">    arrayList.Add(<span class=\"number\">3.0</span>);    <span class=\"comment\">// double    object</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ArrayList  IL</li>\n</ul>\n<p> C#  IL </p>\n<p><img src=\"/../images/arraylist/arraylist_add_valuetype_il_code.png\" alt=\"ArrayList  IL\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong></strong>object</p>\n<p> 1intIL  box [System.Runtime]System.Int32  Add(object)  box  5  IL 1  + 4 </p>\n<p> &#x2F;  List&lt;T&gt; &#x2F; </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://learn.microsoft.com/zh-cn/dotnet/csharp/fundamentals/types/\">C#  - Microsoft Learn</a></li>\n<li><a href=\"https://learn.microsoft.com/zh-cn/dotnet/csharp/programming-guide/types/boxing-and-unboxing\">C#  - Microsoft Learn</a></li>\n<li><a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.reflection.emit.opcodes.box?view=net-9.0\">IL-box  - Microsoft Learn</a></li>\n<li><a href=\"https://github.com/dotnet/runtime/blob/main/src/libraries/System.Private.CoreLib/src/System/Collections/ArrayList.cs\">ArrayList.cs - Github</a></li>\n<li><a href=\"https://sharplab.io/#v2:C4LglgNgPgAgTARgLACgYAYAEMEDoDCA9hBAKYDGwYhAdgM4DcqMAzNnJvpgN6qb/Y2MACyYAsgAoAlDz4D5AQQBOSgIYBPADJg6wTKpUbtuzAF5MNUgHdMytVp3BpTFPPkH7x4LgUATXxIIUi5uAh5Gjj7+EgDkqjHBcqHhDrpRASy46ImuAgC+qHlAA===\"> - sharplab</a></li>\n</ul>\n","excerpt":"","more":"<h2 id=\"-C-ArrayList\"><a href=\"#-C-ArrayList\" class=\"headerlink\" title=\" C# ArrayList\"></a> C# ArrayList</h2><p>ArrayList  C#  object  _items  Add </p>\n<p></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"built_in\">object</span>?[] _items;  <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>Add </strong></li>\n</ul>\n<p>Add  object</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">virtual</span> <span class=\"built_in\">int</span> <span class=\"title\">Add</span>(<span class=\"params\"><span class=\"built_in\">object</span>? <span class=\"keyword\">value</span></span>)</span>;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> ArrayList  object  intchardouble <strong>boxingunboxing</strong> </p>\n<ul>\n<li>ArrayList </li>\n</ul>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">M</span>()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    ArrayList arrayList = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">    arrayList.Add(<span class=\"number\">1</span>);      <span class=\"comment\">// int    object</span></span><br><span class=\"line\">    arrayList.Add(<span class=\"string\">&#x27;a&#x27;</span>);    <span class=\"comment\">// char    object</span></span><br><span class=\"line\">    arrayList.Add(<span class=\"number\">3.0</span>);    <span class=\"comment\">// double    object</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ArrayList  IL</li>\n</ul>\n<p> C#  IL </p>\n<p><img src=\"/../images/arraylist/arraylist_add_valuetype_il_code.png\" alt=\"ArrayList  IL\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong></strong>object</p>\n<p> 1intIL  box [System.Runtime]System.Int32  Add(object)  box  5  IL 1  + 4 </p>\n<p> &#x2F;  List&lt;T&gt; &#x2F; </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://learn.microsoft.com/zh-cn/dotnet/csharp/fundamentals/types/\">C#  - Microsoft Learn</a></li>\n<li><a href=\"https://learn.microsoft.com/zh-cn/dotnet/csharp/programming-guide/types/boxing-and-unboxing\">C#  - Microsoft Learn</a></li>\n<li><a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.reflection.emit.opcodes.box?view=net-9.0\">IL-box  - Microsoft Learn</a></li>\n<li><a href=\"https://github.com/dotnet/runtime/blob/main/src/libraries/System.Private.CoreLib/src/System/Collections/ArrayList.cs\">ArrayList.cs - Github</a></li>\n<li><a href=\"https://sharplab.io/#v2:C4LglgNgPgAgTARgLACgYAYAEMEDoDCA9hBAKYDGwYhAdgM4DcqMAzNnJvpgN6qb/Y2MACyYAsgAoAlDz4D5AQQBOSgIYBPADJg6wTKpUbtuzAF5MNUgHdMytVp3BpTFPPkH7x4LgUATXxIIUi5uAh5Gjj7+EgDkqjHBcqHhDrpRASy46ImuAgC+qHlAA===\"> - sharplab</a></li>\n</ul>\n"},{"title":" ArrayPool ","date":"2026-01-16T15:33:10.000Z","_content":"\n### **2026-01-17 14:39:55**\n\n---\n\n## ArrayPool \n\nArrayPool\\<T\\>  .NET GC\n\n- ****\n\n1.  / \n2.  \\<T\\> ArrayPool\\<int\\>ArrayPool\\<byte\\>\n3. ArrayPool\\<T\\>.Shared\n4. \n\n- ****\n\n -  GC  Web API .NET \n\nArrayPool \n\n```csharp\npublic abstract class ArrayPool<T>\n{\n    protected ArrayPool();\n    public static ArrayPool<T> Shared { get; }\n    public static ArrayPool<T> Create();\n    public static ArrayPool<T> Create(int maxArrayLength, int maxArraysPerBucket);\n    public abstract T[] Rent(int minimumLength);\n    public abstract void Return(T[] array, bool clearArray = false);\n}\n```\n\n## ArrayPool \n\nArrayPool\\<T\\> .NET  Shared RentReturn \n\n1. ****\n\n- ArrayPool\\<T\\>.Shared\n\n ArrayPool  Shared \n\n- Rent(int minimumLength) \n  -  **  minimumLength** \n  - T[] \n\n- Return(T[] array) \n  - \n  -  clearArray false\n    -  true Array.Clear  byte  0\n    -  false\n\n2. byte\n\n```csharp\n// 1. 256byte256\nbyte[] buffer = ArrayPool<byte>.Shared.Rent(256);\n\ntry\n{\n    // 2. \n    buffer[0] = 123;\n    buffer[1] = 234;\n    buffer[2] = 255;\n    // ... \n}\nfinally\n{\n    if (buffer != null)\n    {\n        // 3. \n        // ArrayPool<byte>.Shared.Return(buffer, clearArray: true)\n        ArrayPool<byte>.Shared.Return(buffer);\n    }\n}\n```\n\n>  Rent  try-catch [ ArrayPool ](https://as436845345.github.io/2026/01/17/arraypool-what-you-should-know/)\n\n3. ****\n\n-  Return\n- Rent  minimumLength\n-  Return  clearArray: true \n\n##  ArrayPool \n\n.NET  new T[length] ** / **   ArrayPool\\<T\\> \n\n###  new \n\n new CLR**Managed Heap**GC\n\n1. ****\n\n new CLR \n\n-  IO\n- CLR GC Compact\n\n2. **GC**\n\n-  GC  Gen 0 \n- GC STWStop-The-World CPU \n-  Gen 1/Gen 2 Gen 2  Gen 0\n\n### ArrayPool\\<T\\> \n\nArrayPool\\<T\\>  .NET RentReturn\n\n-  / \n-  GC  GC  GC \n- ArrayPool\\<T\\>.Shared  SharedArrayPool \n\n### \n\n1. .NET Core 1.0+/.NET 5+  ArrayPool\\<T\\>  ArrayPool\\<T\\>\n2.  ArrayPool\\<T\\> .NET Framework 4.x GitHub  .NET \n\n## \n\n- [ArrayPool<T>  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/api/system.buffers.arraypool-1?view=net-8.0)\n- [ArrayList.cs - Github](https://github.com/dotnet/runtime/blob/main/src/libraries/System.Private.CoreLib/src/System/Buffers/ArrayPool.cs)\n- [SharedArrayPool.cs - Github](https://github.com/dotnet/runtime/blob/main/src/libraries/System.Private.CoreLib/src/System/Buffers/SharedArrayPool.cs)","source":"_posts/perfer-arraypool-usage.md","raw":"---\ntitle:  ArrayPool \ndate: 2026-01-16 23:33:10\ntags:\n- C#\n- Array\n- ArrayPool\ncategories:\n- C#\n- Array\n---\n\n### **2026-01-17 14:39:55**\n\n---\n\n## ArrayPool \n\nArrayPool\\<T\\>  .NET GC\n\n- ****\n\n1.  / \n2.  \\<T\\> ArrayPool\\<int\\>ArrayPool\\<byte\\>\n3. ArrayPool\\<T\\>.Shared\n4. \n\n- ****\n\n -  GC  Web API .NET \n\nArrayPool \n\n```csharp\npublic abstract class ArrayPool<T>\n{\n    protected ArrayPool();\n    public static ArrayPool<T> Shared { get; }\n    public static ArrayPool<T> Create();\n    public static ArrayPool<T> Create(int maxArrayLength, int maxArraysPerBucket);\n    public abstract T[] Rent(int minimumLength);\n    public abstract void Return(T[] array, bool clearArray = false);\n}\n```\n\n## ArrayPool \n\nArrayPool\\<T\\> .NET  Shared RentReturn \n\n1. ****\n\n- ArrayPool\\<T\\>.Shared\n\n ArrayPool  Shared \n\n- Rent(int minimumLength) \n  -  **  minimumLength** \n  - T[] \n\n- Return(T[] array) \n  - \n  -  clearArray false\n    -  true Array.Clear  byte  0\n    -  false\n\n2. byte\n\n```csharp\n// 1. 256byte256\nbyte[] buffer = ArrayPool<byte>.Shared.Rent(256);\n\ntry\n{\n    // 2. \n    buffer[0] = 123;\n    buffer[1] = 234;\n    buffer[2] = 255;\n    // ... \n}\nfinally\n{\n    if (buffer != null)\n    {\n        // 3. \n        // ArrayPool<byte>.Shared.Return(buffer, clearArray: true)\n        ArrayPool<byte>.Shared.Return(buffer);\n    }\n}\n```\n\n>  Rent  try-catch [ ArrayPool ](https://as436845345.github.io/2026/01/17/arraypool-what-you-should-know/)\n\n3. ****\n\n-  Return\n- Rent  minimumLength\n-  Return  clearArray: true \n\n##  ArrayPool \n\n.NET  new T[length] ** / **   ArrayPool\\<T\\> \n\n###  new \n\n new CLR**Managed Heap**GC\n\n1. ****\n\n new CLR \n\n-  IO\n- CLR GC Compact\n\n2. **GC**\n\n-  GC  Gen 0 \n- GC STWStop-The-World CPU \n-  Gen 1/Gen 2 Gen 2  Gen 0\n\n### ArrayPool\\<T\\> \n\nArrayPool\\<T\\>  .NET RentReturn\n\n-  / \n-  GC  GC  GC \n- ArrayPool\\<T\\>.Shared  SharedArrayPool \n\n### \n\n1. .NET Core 1.0+/.NET 5+  ArrayPool\\<T\\>  ArrayPool\\<T\\>\n2.  ArrayPool\\<T\\> .NET Framework 4.x GitHub  .NET \n\n## \n\n- [ArrayPool<T>  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/api/system.buffers.arraypool-1?view=net-8.0)\n- [ArrayList.cs - Github](https://github.com/dotnet/runtime/blob/main/src/libraries/System.Private.CoreLib/src/System/Buffers/ArrayPool.cs)\n- [SharedArrayPool.cs - Github](https://github.com/dotnet/runtime/blob/main/src/libraries/System.Private.CoreLib/src/System/Buffers/SharedArrayPool.cs)","slug":"perfer-arraypool-usage","published":1,"updated":"2026-01-17T07:41:37.417Z","comments":1,"layout":"post","photos":[],"_id":"cmm3ar6w300076gu886z0b1qx","content":"<h3 id=\"2026-01-17-14-39-55\"><a href=\"#2026-01-17-14-39-55\" class=\"headerlink\" title=\"2026-01-17 14:39:55\"></a><strong>2026-01-17 14:39:55</strong></h3><hr>\n<h2 id=\"ArrayPool-\"><a href=\"#ArrayPool-\" class=\"headerlink\" title=\"ArrayPool \"></a>ArrayPool </h2><p>ArrayPool&lt;T&gt;  .NET GC</p>\n<ul>\n<li><strong></strong></li>\n</ul>\n<ol>\n<li> &#x2F; </li>\n<li> &lt;T&gt; ArrayPool&lt;int&gt;ArrayPool&lt;byte&gt;</li>\n<li>ArrayPool&lt;T&gt;.Shared</li>\n<li></li>\n</ol>\n<ul>\n<li><strong></strong></li>\n</ul>\n<p> -  GC  Web API .NET </p>\n<p>ArrayPool </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title\">ArrayPool</span>&lt;<span class=\"title\">T</span>&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"title\">ArrayPool</span>()</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ArrayPool&lt;T&gt; Shared &#123; <span class=\"keyword\">get</span>; &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ArrayPool&lt;T&gt; <span class=\"title\">Create</span>()</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ArrayPool&lt;T&gt; <span class=\"title\">Create</span>(<span class=\"params\"><span class=\"built_in\">int</span> maxArrayLength, <span class=\"built_in\">int</span> maxArraysPerBucket</span>)</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> T[] <span class=\"title\">Rent</span>(<span class=\"params\"><span class=\"built_in\">int</span> minimumLength</span>)</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">Return</span>(<span class=\"params\">T[] array, <span class=\"built_in\">bool</span> clearArray = <span class=\"literal\">false</span></span>)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ArrayPool-\"><a href=\"#ArrayPool-\" class=\"headerlink\" title=\"ArrayPool \"></a>ArrayPool </h2><p>ArrayPool&lt;T&gt; .NET  Shared RentReturn </p>\n<ol>\n<li><strong></strong></li>\n</ol>\n<ul>\n<li>ArrayPool&lt;T&gt;.Shared</li>\n</ul>\n<p> ArrayPool  Shared </p>\n<ul>\n<li><p>Rent(int minimumLength) </p>\n<ul>\n<li> <strong>  minimumLength</strong> </li>\n<li>T[] </li>\n</ul>\n</li>\n<li><p>Return(T[] array) </p>\n<ul>\n<li></li>\n<li> clearArray false<ul>\n<li> true Array.Clear  byte  0</li>\n<li> false</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ol start=\"2\">\n<li>byte</li>\n</ol>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 1. 256byte256</span></span><br><span class=\"line\"><span class=\"built_in\">byte</span>[] buffer = ArrayPool&lt;<span class=\"built_in\">byte</span>&gt;.Shared.Rent(<span class=\"number\">256</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 2. </span></span><br><span class=\"line\">    buffer[<span class=\"number\">0</span>] = <span class=\"number\">123</span>;</span><br><span class=\"line\">    buffer[<span class=\"number\">1</span>] = <span class=\"number\">234</span>;</span><br><span class=\"line\">    buffer[<span class=\"number\">2</span>] = <span class=\"number\">255</span>;</span><br><span class=\"line\">    <span class=\"comment\">// ... </span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">finally</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (buffer != <span class=\"literal\">null</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 3. </span></span><br><span class=\"line\">        <span class=\"comment\">// ArrayPool&lt;byte&gt;.Shared.Return(buffer, clearArray: true)</span></span><br><span class=\"line\">        ArrayPool&lt;<span class=\"built_in\">byte</span>&gt;.Shared.Return(buffer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p> Rent  try-catch <a href=\"https://as436845345.github.io/2026/01/17/arraypool-what-you-should-know/\"> ArrayPool </a></p>\n</blockquote>\n<ol start=\"3\">\n<li><strong></strong></li>\n</ol>\n<ul>\n<li> Return</li>\n<li>Rent  minimumLength</li>\n<li> Return  clearArray: true </li>\n</ul>\n<h2 id=\"-ArrayPool-\"><a href=\"#-ArrayPool-\" class=\"headerlink\" title=\" ArrayPool \"></a> ArrayPool </h2><p>.NET  new T[length] <strong> &#x2F; </strong>   ArrayPool&lt;T&gt; </p>\n<h3 id=\"-new-\"><a href=\"#-new-\" class=\"headerlink\" title=\" new \"></a> new </h3><p> new CLR<strong>Managed Heap</strong>GC</p>\n<ol>\n<li><strong></strong></li>\n</ol>\n<p> new CLR </p>\n<ul>\n<li> IO</li>\n<li>CLR GC Compact</li>\n</ul>\n<ol start=\"2\">\n<li><strong>GC</strong></li>\n</ol>\n<ul>\n<li> GC  Gen 0 </li>\n<li>GC STWStop-The-World CPU </li>\n<li> Gen 1&#x2F;Gen 2 Gen 2  Gen 0</li>\n</ul>\n<h3 id=\"ArrayPool-\"><a href=\"#ArrayPool-\" class=\"headerlink\" title=\"ArrayPool&lt;T&gt; \"></a>ArrayPool&lt;T&gt; </h3><p>ArrayPool&lt;T&gt;  .NET RentReturn</p>\n<ul>\n<li> &#x2F; </li>\n<li> GC  GC  GC </li>\n<li>ArrayPool&lt;T&gt;.Shared  SharedArrayPool </li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li>.NET Core 1.0+&#x2F;.NET 5+  ArrayPool&lt;T&gt;  ArrayPool&lt;T&gt;</li>\n<li> ArrayPool&lt;T&gt; .NET Framework 4.x GitHub  .NET </li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.buffers.arraypool-1?view=net-8.0\">ArrayPool<T>  - Microsoft Learn</a></li>\n<li><a href=\"https://github.com/dotnet/runtime/blob/main/src/libraries/System.Private.CoreLib/src/System/Buffers/ArrayPool.cs\">ArrayList.cs - Github</a></li>\n<li><a href=\"https://github.com/dotnet/runtime/blob/main/src/libraries/System.Private.CoreLib/src/System/Buffers/SharedArrayPool.cs\">SharedArrayPool.cs - Github</a></li>\n</ul>\n","excerpt":"","more":"<h3 id=\"2026-01-17-14-39-55\"><a href=\"#2026-01-17-14-39-55\" class=\"headerlink\" title=\"2026-01-17 14:39:55\"></a><strong>2026-01-17 14:39:55</strong></h3><hr>\n<h2 id=\"ArrayPool-\"><a href=\"#ArrayPool-\" class=\"headerlink\" title=\"ArrayPool \"></a>ArrayPool </h2><p>ArrayPool&lt;T&gt;  .NET GC</p>\n<ul>\n<li><strong></strong></li>\n</ul>\n<ol>\n<li> &#x2F; </li>\n<li> &lt;T&gt; ArrayPool&lt;int&gt;ArrayPool&lt;byte&gt;</li>\n<li>ArrayPool&lt;T&gt;.Shared</li>\n<li></li>\n</ol>\n<ul>\n<li><strong></strong></li>\n</ul>\n<p> -  GC  Web API .NET </p>\n<p>ArrayPool </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">class</span> <span class=\"title\">ArrayPool</span>&lt;<span class=\"title\">T</span>&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"title\">ArrayPool</span>()</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ArrayPool&lt;T&gt; Shared &#123; <span class=\"keyword\">get</span>; &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ArrayPool&lt;T&gt; <span class=\"title\">Create</span>()</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ArrayPool&lt;T&gt; <span class=\"title\">Create</span>(<span class=\"params\"><span class=\"built_in\">int</span> maxArrayLength, <span class=\"built_in\">int</span> maxArraysPerBucket</span>)</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> T[] <span class=\"title\">Rent</span>(<span class=\"params\"><span class=\"built_in\">int</span> minimumLength</span>)</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">Return</span>(<span class=\"params\">T[] array, <span class=\"built_in\">bool</span> clearArray = <span class=\"literal\">false</span></span>)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ArrayPool-\"><a href=\"#ArrayPool-\" class=\"headerlink\" title=\"ArrayPool \"></a>ArrayPool </h2><p>ArrayPool&lt;T&gt; .NET  Shared RentReturn </p>\n<ol>\n<li><strong></strong></li>\n</ol>\n<ul>\n<li>ArrayPool&lt;T&gt;.Shared</li>\n</ul>\n<p> ArrayPool  Shared </p>\n<ul>\n<li><p>Rent(int minimumLength) </p>\n<ul>\n<li> <strong>  minimumLength</strong> </li>\n<li>T[] </li>\n</ul>\n</li>\n<li><p>Return(T[] array) </p>\n<ul>\n<li></li>\n<li> clearArray false<ul>\n<li> true Array.Clear  byte  0</li>\n<li> false</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ol start=\"2\">\n<li>byte</li>\n</ol>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 1. 256byte256</span></span><br><span class=\"line\"><span class=\"built_in\">byte</span>[] buffer = ArrayPool&lt;<span class=\"built_in\">byte</span>&gt;.Shared.Rent(<span class=\"number\">256</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 2. </span></span><br><span class=\"line\">    buffer[<span class=\"number\">0</span>] = <span class=\"number\">123</span>;</span><br><span class=\"line\">    buffer[<span class=\"number\">1</span>] = <span class=\"number\">234</span>;</span><br><span class=\"line\">    buffer[<span class=\"number\">2</span>] = <span class=\"number\">255</span>;</span><br><span class=\"line\">    <span class=\"comment\">// ... </span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">finally</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (buffer != <span class=\"literal\">null</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 3. </span></span><br><span class=\"line\">        <span class=\"comment\">// ArrayPool&lt;byte&gt;.Shared.Return(buffer, clearArray: true)</span></span><br><span class=\"line\">        ArrayPool&lt;<span class=\"built_in\">byte</span>&gt;.Shared.Return(buffer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p> Rent  try-catch <a href=\"https://as436845345.github.io/2026/01/17/arraypool-what-you-should-know/\"> ArrayPool </a></p>\n</blockquote>\n<ol start=\"3\">\n<li><strong></strong></li>\n</ol>\n<ul>\n<li> Return</li>\n<li>Rent  minimumLength</li>\n<li> Return  clearArray: true </li>\n</ul>\n<h2 id=\"-ArrayPool-\"><a href=\"#-ArrayPool-\" class=\"headerlink\" title=\" ArrayPool \"></a> ArrayPool </h2><p>.NET  new T[length] <strong> &#x2F; </strong>   ArrayPool&lt;T&gt; </p>\n<h3 id=\"-new-\"><a href=\"#-new-\" class=\"headerlink\" title=\" new \"></a> new </h3><p> new CLR<strong>Managed Heap</strong>GC</p>\n<ol>\n<li><strong></strong></li>\n</ol>\n<p> new CLR </p>\n<ul>\n<li> IO</li>\n<li>CLR GC Compact</li>\n</ul>\n<ol start=\"2\">\n<li><strong>GC</strong></li>\n</ol>\n<ul>\n<li> GC  Gen 0 </li>\n<li>GC STWStop-The-World CPU </li>\n<li> Gen 1&#x2F;Gen 2 Gen 2  Gen 0</li>\n</ul>\n<h3 id=\"ArrayPool-\"><a href=\"#ArrayPool-\" class=\"headerlink\" title=\"ArrayPool&lt;T&gt; \"></a>ArrayPool&lt;T&gt; </h3><p>ArrayPool&lt;T&gt;  .NET RentReturn</p>\n<ul>\n<li> &#x2F; </li>\n<li> GC  GC  GC </li>\n<li>ArrayPool&lt;T&gt;.Shared  SharedArrayPool </li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li>.NET Core 1.0+&#x2F;.NET 5+  ArrayPool&lt;T&gt;  ArrayPool&lt;T&gt;</li>\n<li> ArrayPool&lt;T&gt; .NET Framework 4.x GitHub  .NET </li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.buffers.arraypool-1?view=net-8.0\">ArrayPool<T>  - Microsoft Learn</a></li>\n<li><a href=\"https://github.com/dotnet/runtime/blob/main/src/libraries/System.Private.CoreLib/src/System/Buffers/ArrayPool.cs\">ArrayList.cs - Github</a></li>\n<li><a href=\"https://github.com/dotnet/runtime/blob/main/src/libraries/System.Private.CoreLib/src/System/Buffers/SharedArrayPool.cs\">SharedArrayPool.cs - Github</a></li>\n</ul>\n"},{"title":"ReadOnlySpan<T>","date":"2026-01-18T06:07:14.000Z","_content":"\n### **2026-01-18 14:29:29**\n\n\n\n---\n\n<!--\n markdown  C#  ReadOnlySpan<T> ++ \n\n1.  ReadOnlySpan<T> \n2.  stringList<T> MemoryExtensions.AsSpan  ReadOnlySpan<T>  .net  MemoryExtensions  NuGet  System.Memory \n3.  ReadOnlySpan<T>\n  1. ReadOnlySpan<T> \n  2.  string  MemoryExtensions.AsSpan  ReadOnlySpan<char>  string  ReadOnlySpan\n  3.   \n4. ReadOnlySpan<T> + string\n  - Item[Int32]\n  - Length\n5. ReadOnlySpan<T> + \n  - CopyTo(Span<T>) ReadOnlySpan<T>  Span<T>\n  - TryCopyTo(Span<T>) ReadOnlySpan<T>  Span<T> \n  - Slice(Int32)\n  - Slice(Int32, Int32)\n  -  ContainsStartsWithEndsWithIndexOf  / \n-->\n\n C# ReadOnlySpan\\<T\\>  ReadOnlySpan\\<T\\> \n\n## ReadOnlySpan\\<T\\> \n\nReadOnlySpan\\<T\\>  .NET Core 2.1+/.NET 5+ ********\n\n\n- **stack-only** GC \n- \n- \n\n> ReadOnlySpan\\<T\\>  ReadOnlyMemory\\<T\\>\n\n##  ReadOnlySpan\\<T\\>\n\nReadOnlySpan\\<T\\>  MemoryExtensions.AsSpan  ReadOnlySpan\\<T\\>\n\n###  .NET \n\n .NET  .NET Framework 4.x MemoryExtensions NuGet \n\n```bash\nInstall-Package System.Memory\n#  .NET CLI\ndotnet add package System.Memory\n```\n\n### 1.  ReadOnlySpan\\<char\\>\n\n char \n\n```csharp\n// \nstring originalStr = \"Hello ReadOnlySpan!\";\n//  ReadOnlySpan<char>\nReadOnlySpan<char> strSpan = originalStr.AsSpan(); //  MemoryExtensions.AsSpan(originalStr)\n\nConsole.WriteLine(strSpan); // Hello ReadOnlySpan!\n```\n\n### 2.  ReadOnlySpan\\<T\\>\n\n int[]byte[]/\n\n```csharp\n//  int \nint[] numArray = new int[] { 1, 2, 3, 4, 5 };\n//  ReadOnlySpan<int>\nReadOnlySpan<int> arraySpan = numArray.AsSpan();\n\nConsole.WriteLine(arraySpan.Length); // 5\n```\n\n### 3. List\\<T\\>  ReadOnlySpan\\<T\\>\n\n List\\<T\\>  ReadOnlySpan\\<T\\>\n\n1.  List\\<T\\>  ToArray()  List  ReadOnlySpan\\<T\\>\n\n```csharp\n//  List<string>\nList<string> strList = new List<string> { \"a\", \"b\", \"c\" };\n// List    ReadOnlySpan<T>\nReadOnlySpan<string> listSpan = strList.ToArray().AsSpan();\n\nConsole.WriteLine(listSpan[1]); // b\n```\n\n2.  CollectionsMarshal.AsSpan\\<T\\>(List\\<T\\>)  ReadOnlySpan\\<T\\>\n\n```csharp\n//  List<string>\nList<string> strList = new List<string> { \"a\", \"b\", \"c\" };\n// List    ReadOnlySpan<T>\nReadOnlySpan<string> listSpan = CollectionsMarshal.AsSpan(strList);\n\nConsole.WriteLine(listSpan[1]); // b\n```\n\n> CollectionsMarshal  .NET 5+  NuGet  System.Runtime.InteropServices CollectionsMarshal \n\n##  ReadOnlySpan\\<T\\>\n\nReadOnlySpan\\<T\\> ** +  GC **\n\n### 1. \n\n|  |  |\n|------|------|\n|  |  |\n|  GC  |  GC / GC  |\n|  |  |\n|  | / string.Substring |\n\n### 2.  string\n\n string  SubstringSplit **** GC\n\n ReadOnlySpan\\<char\\> \n\n```csharp\n// \nstring original = \"Hello World\";\nstring subStr = original.Substring(0, 5); //  \"Hello\"5\n\n// ReadOnlySpan \nReadOnlySpan<char> span = original.AsSpan();\nReadOnlySpan<char> subSpan = span.Slice(0, 5); // 5\n```\n\n>  .NET  string  Substring ReadOnlySpan\\<char\\> .NET  ReadOnlySpan\\<char\\> \n\n### 3. /\n\n Array.Copy ReadOnlySpan\\<T\\>  Slice \n\n```csharp\nint[] nums = { 1, 2, 3, 4, 5 };\n\n// \nint[] subNums = new int[3];\nArray.Copy(nums, 1, subNums, 0, 3); // 1-3 [2,3,4]\n\n// ReadOnlySpan \nReadOnlySpan<int> subSpan = nums.AsSpan().Slice(1, 3); // 1-3\n```\n\n## ReadOnlySpan\\<T\\> string\n\n 2 \n\n### 1. Item[Int32]\n\n ReadOnlySpan\\<T\\> ****\n\n```csharp\nstring text = \"C# ReadOnlySpan Tutorial\";\nReadOnlySpan<char> textSpan = text.AsSpan();\n\n// 20\nchar charAt2 = textSpan[2]; \nConsole.WriteLine(charAt2); // \"C# \" \n\n// ReadOnlySpan \n// textSpan[2] = 'x'; // \n```\n\n### 2. Length\n\n ReadOnlySpan\\<T\\> \n\n```csharp\nstring text = \"Hello ReadOnlySpan\";\nReadOnlySpan<char> textSpan = text.AsSpan();\n\n// \nint length = textSpan.Length;\nConsole.WriteLine(length); // 17\"Hello ReadOnlySpan\" 17\n\n//  Span  Length  0\nReadOnlySpan<char> emptySpan = ReadOnlySpan<char>.Empty;\nConsole.WriteLine(emptySpan.Length); // 0\n```\n\n## ReadOnlySpan\\<T\\> \n\n int[]  4 \n\n### 1. CopyTo(Span\\<T\\>) Span\\<T\\>\n\n ReadOnlySpan\\<T\\>  Span\\<T\\> Span \n\n```csharp\n//   ReadOnlySpan<int>\nint[] source = { 10, 20, 30, 40 };\nReadOnlySpan<int> sourceSpan = source.AsSpan();\n\n//  Span   Span\nint[] target = new int[4];\nSpan<int> targetSpan = target.AsSpan();\n\n// \nsourceSpan.CopyTo(targetSpan);\n\n// [10,20,30,40]\nConsole.WriteLine(string.Join(\",\", target)); \n```\n\n### 2. TryCopyTo(Span\\<T\\>)\n\n CopyTo  Span  false true\n\n```csharp\nint[] source = { 10, 20, 30, 40 };\nReadOnlySpan<int> sourceSpan = source.AsSpan();\n\n//  Span 3\nint[] target = new int[3];\nSpan<int> targetSpan = target.AsSpan();\n\n// \nbool isSuccess = sourceSpan.TryCopyTo(targetSpan);\nConsole.WriteLine(isSuccess); // False\nConsole.WriteLine(string.Join(\",\", target)); // 0,0,0\n\n// \nint[] target2 = new int[4];\nbool isSuccess2 = sourceSpan.TryCopyTo(target2.AsSpan());\nConsole.WriteLine(isSuccess2); // True\nConsole.WriteLine(string.Join(\",\", target2)); // 10,20,30,40\n```\n\n### 3. Slice(Int32)\n\n startIndex \n\n```csharp\nint[] nums = { 1, 2, 3, 4, 5 };\nReadOnlySpan<int> numSpan = nums.AsSpan();\n\n// 22\nReadOnlySpan<int> sliceSpan = numSpan.Slice(2);\n\n// 3,4,5234\nConsole.WriteLine(string.Join(\",\", sliceSpan)); \n```\n\n### 4. Slice(Int32, Int32)+\n\n startIndex  length  startIndex + length   Span \n\n```csharp\nint[] nums = { 1, 2, 3, 4, 5 };\nReadOnlySpan<int> numSpan = nums.AsSpan();\n\n// 13\nReadOnlySpan<int> sliceSpan = numSpan.Slice(1, 3);\n\n// 2,3,4123\nConsole.WriteLine(string.Join(\",\", sliceSpan)); \n\n// \n// numSpan.Slice(1, 5); // \n```\n\n### \n\nReadOnlySpan\\<T\\> /\n- Contains(T)\n- StartsWith(ReadOnlySpan\\<T\\>)\n- EndsWith(ReadOnlySpan\\<T\\>)\n- IndexOf(T)\n- LastIndexOf(T)\n\n## \n\n1. ReadOnlySpan\\<T\\>  AsSpan() // System.Memory\n2.  GC /\n3. Item[Int32]Length\n4. CopyTo/TryCopyToSlice\n\nReadOnlySpan\\<T\\> IO C# \n\n## \n\n[System.Memory - NuGet Gallery](https://www.nuget.org/packages/System.Memory)\n[System.Runtime.InteropServices - NuGet Gallery](https://www.nuget.org/packages/System.Runtime.InteropServices)\n[ReadOnlySpan\\<T\\>  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/api/system.memoryextensions?view=net-8.0)\n[MemoryExtensions  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/api/system.memoryextensions?view=net-8.0)\n[CollectionsMarshal  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/api/system.runtime.interopservices.collectionsmarshal?view=net-9.0)","source":"_posts/readonlyspan-usage.md","raw":"---\ntitle: ReadOnlySpan<T>\ndate: 2026-01-18 14:07:14\ntags:\n- C#\n- ReadOnlySpan\ncategories:\n- C#\n---\n\n### **2026-01-18 14:29:29**\n\n\n\n---\n\n<!--\n markdown  C#  ReadOnlySpan<T> ++ \n\n1.  ReadOnlySpan<T> \n2.  stringList<T> MemoryExtensions.AsSpan  ReadOnlySpan<T>  .net  MemoryExtensions  NuGet  System.Memory \n3.  ReadOnlySpan<T>\n  1. ReadOnlySpan<T> \n  2.  string  MemoryExtensions.AsSpan  ReadOnlySpan<char>  string  ReadOnlySpan\n  3.   \n4. ReadOnlySpan<T> + string\n  - Item[Int32]\n  - Length\n5. ReadOnlySpan<T> + \n  - CopyTo(Span<T>) ReadOnlySpan<T>  Span<T>\n  - TryCopyTo(Span<T>) ReadOnlySpan<T>  Span<T> \n  - Slice(Int32)\n  - Slice(Int32, Int32)\n  -  ContainsStartsWithEndsWithIndexOf  / \n-->\n\n C# ReadOnlySpan\\<T\\>  ReadOnlySpan\\<T\\> \n\n## ReadOnlySpan\\<T\\> \n\nReadOnlySpan\\<T\\>  .NET Core 2.1+/.NET 5+ ********\n\n\n- **stack-only** GC \n- \n- \n\n> ReadOnlySpan\\<T\\>  ReadOnlyMemory\\<T\\>\n\n##  ReadOnlySpan\\<T\\>\n\nReadOnlySpan\\<T\\>  MemoryExtensions.AsSpan  ReadOnlySpan\\<T\\>\n\n###  .NET \n\n .NET  .NET Framework 4.x MemoryExtensions NuGet \n\n```bash\nInstall-Package System.Memory\n#  .NET CLI\ndotnet add package System.Memory\n```\n\n### 1.  ReadOnlySpan\\<char\\>\n\n char \n\n```csharp\n// \nstring originalStr = \"Hello ReadOnlySpan!\";\n//  ReadOnlySpan<char>\nReadOnlySpan<char> strSpan = originalStr.AsSpan(); //  MemoryExtensions.AsSpan(originalStr)\n\nConsole.WriteLine(strSpan); // Hello ReadOnlySpan!\n```\n\n### 2.  ReadOnlySpan\\<T\\>\n\n int[]byte[]/\n\n```csharp\n//  int \nint[] numArray = new int[] { 1, 2, 3, 4, 5 };\n//  ReadOnlySpan<int>\nReadOnlySpan<int> arraySpan = numArray.AsSpan();\n\nConsole.WriteLine(arraySpan.Length); // 5\n```\n\n### 3. List\\<T\\>  ReadOnlySpan\\<T\\>\n\n List\\<T\\>  ReadOnlySpan\\<T\\>\n\n1.  List\\<T\\>  ToArray()  List  ReadOnlySpan\\<T\\>\n\n```csharp\n//  List<string>\nList<string> strList = new List<string> { \"a\", \"b\", \"c\" };\n// List    ReadOnlySpan<T>\nReadOnlySpan<string> listSpan = strList.ToArray().AsSpan();\n\nConsole.WriteLine(listSpan[1]); // b\n```\n\n2.  CollectionsMarshal.AsSpan\\<T\\>(List\\<T\\>)  ReadOnlySpan\\<T\\>\n\n```csharp\n//  List<string>\nList<string> strList = new List<string> { \"a\", \"b\", \"c\" };\n// List    ReadOnlySpan<T>\nReadOnlySpan<string> listSpan = CollectionsMarshal.AsSpan(strList);\n\nConsole.WriteLine(listSpan[1]); // b\n```\n\n> CollectionsMarshal  .NET 5+  NuGet  System.Runtime.InteropServices CollectionsMarshal \n\n##  ReadOnlySpan\\<T\\>\n\nReadOnlySpan\\<T\\> ** +  GC **\n\n### 1. \n\n|  |  |\n|------|------|\n|  |  |\n|  GC  |  GC / GC  |\n|  |  |\n|  | / string.Substring |\n\n### 2.  string\n\n string  SubstringSplit **** GC\n\n ReadOnlySpan\\<char\\> \n\n```csharp\n// \nstring original = \"Hello World\";\nstring subStr = original.Substring(0, 5); //  \"Hello\"5\n\n// ReadOnlySpan \nReadOnlySpan<char> span = original.AsSpan();\nReadOnlySpan<char> subSpan = span.Slice(0, 5); // 5\n```\n\n>  .NET  string  Substring ReadOnlySpan\\<char\\> .NET  ReadOnlySpan\\<char\\> \n\n### 3. /\n\n Array.Copy ReadOnlySpan\\<T\\>  Slice \n\n```csharp\nint[] nums = { 1, 2, 3, 4, 5 };\n\n// \nint[] subNums = new int[3];\nArray.Copy(nums, 1, subNums, 0, 3); // 1-3 [2,3,4]\n\n// ReadOnlySpan \nReadOnlySpan<int> subSpan = nums.AsSpan().Slice(1, 3); // 1-3\n```\n\n## ReadOnlySpan\\<T\\> string\n\n 2 \n\n### 1. Item[Int32]\n\n ReadOnlySpan\\<T\\> ****\n\n```csharp\nstring text = \"C# ReadOnlySpan Tutorial\";\nReadOnlySpan<char> textSpan = text.AsSpan();\n\n// 20\nchar charAt2 = textSpan[2]; \nConsole.WriteLine(charAt2); // \"C# \" \n\n// ReadOnlySpan \n// textSpan[2] = 'x'; // \n```\n\n### 2. Length\n\n ReadOnlySpan\\<T\\> \n\n```csharp\nstring text = \"Hello ReadOnlySpan\";\nReadOnlySpan<char> textSpan = text.AsSpan();\n\n// \nint length = textSpan.Length;\nConsole.WriteLine(length); // 17\"Hello ReadOnlySpan\" 17\n\n//  Span  Length  0\nReadOnlySpan<char> emptySpan = ReadOnlySpan<char>.Empty;\nConsole.WriteLine(emptySpan.Length); // 0\n```\n\n## ReadOnlySpan\\<T\\> \n\n int[]  4 \n\n### 1. CopyTo(Span\\<T\\>) Span\\<T\\>\n\n ReadOnlySpan\\<T\\>  Span\\<T\\> Span \n\n```csharp\n//   ReadOnlySpan<int>\nint[] source = { 10, 20, 30, 40 };\nReadOnlySpan<int> sourceSpan = source.AsSpan();\n\n//  Span   Span\nint[] target = new int[4];\nSpan<int> targetSpan = target.AsSpan();\n\n// \nsourceSpan.CopyTo(targetSpan);\n\n// [10,20,30,40]\nConsole.WriteLine(string.Join(\",\", target)); \n```\n\n### 2. TryCopyTo(Span\\<T\\>)\n\n CopyTo  Span  false true\n\n```csharp\nint[] source = { 10, 20, 30, 40 };\nReadOnlySpan<int> sourceSpan = source.AsSpan();\n\n//  Span 3\nint[] target = new int[3];\nSpan<int> targetSpan = target.AsSpan();\n\n// \nbool isSuccess = sourceSpan.TryCopyTo(targetSpan);\nConsole.WriteLine(isSuccess); // False\nConsole.WriteLine(string.Join(\",\", target)); // 0,0,0\n\n// \nint[] target2 = new int[4];\nbool isSuccess2 = sourceSpan.TryCopyTo(target2.AsSpan());\nConsole.WriteLine(isSuccess2); // True\nConsole.WriteLine(string.Join(\",\", target2)); // 10,20,30,40\n```\n\n### 3. Slice(Int32)\n\n startIndex \n\n```csharp\nint[] nums = { 1, 2, 3, 4, 5 };\nReadOnlySpan<int> numSpan = nums.AsSpan();\n\n// 22\nReadOnlySpan<int> sliceSpan = numSpan.Slice(2);\n\n// 3,4,5234\nConsole.WriteLine(string.Join(\",\", sliceSpan)); \n```\n\n### 4. Slice(Int32, Int32)+\n\n startIndex  length  startIndex + length   Span \n\n```csharp\nint[] nums = { 1, 2, 3, 4, 5 };\nReadOnlySpan<int> numSpan = nums.AsSpan();\n\n// 13\nReadOnlySpan<int> sliceSpan = numSpan.Slice(1, 3);\n\n// 2,3,4123\nConsole.WriteLine(string.Join(\",\", sliceSpan)); \n\n// \n// numSpan.Slice(1, 5); // \n```\n\n### \n\nReadOnlySpan\\<T\\> /\n- Contains(T)\n- StartsWith(ReadOnlySpan\\<T\\>)\n- EndsWith(ReadOnlySpan\\<T\\>)\n- IndexOf(T)\n- LastIndexOf(T)\n\n## \n\n1. ReadOnlySpan\\<T\\>  AsSpan() // System.Memory\n2.  GC /\n3. Item[Int32]Length\n4. CopyTo/TryCopyToSlice\n\nReadOnlySpan\\<T\\> IO C# \n\n## \n\n[System.Memory - NuGet Gallery](https://www.nuget.org/packages/System.Memory)\n[System.Runtime.InteropServices - NuGet Gallery](https://www.nuget.org/packages/System.Runtime.InteropServices)\n[ReadOnlySpan\\<T\\>  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/api/system.memoryextensions?view=net-8.0)\n[MemoryExtensions  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/api/system.memoryextensions?view=net-8.0)\n[CollectionsMarshal  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/api/system.runtime.interopservices.collectionsmarshal?view=net-9.0)","slug":"readonlyspan-usage","published":1,"updated":"2026-01-18T06:33:57.728Z","comments":1,"layout":"post","photos":[],"_id":"cmm3ar6w400096gu879syb8xf","content":"<h3 id=\"2026-01-18-14-29-29\"><a href=\"#2026-01-18-14-29-29\" class=\"headerlink\" title=\"2026-01-18 14:29:29\"></a><strong>2026-01-18 14:29:29</strong></h3><p></p>\n<hr>\n<!--\n markdown  C#  ReadOnlySpan<T> ++ \n\n1.  ReadOnlySpan<T> \n2.  stringList<T> MemoryExtensions.AsSpan  ReadOnlySpan<T>  .net  MemoryExtensions  NuGet  System.Memory \n3.  ReadOnlySpan<T>\n  1. ReadOnlySpan<T> \n  2.  string  MemoryExtensions.AsSpan  ReadOnlySpan<char>  string  ReadOnlySpan\n  3.   \n4. ReadOnlySpan<T> + string\n  - Item[Int32]\n  - Length\n5. ReadOnlySpan<T> + \n  - CopyTo(Span<T>) ReadOnlySpan<T>  Span<T>\n  - TryCopyTo(Span<T>) ReadOnlySpan<T>  Span<T> \n  - Slice(Int32)\n  - Slice(Int32, Int32)\n  -  ContainsStartsWithEndsWithIndexOf  / \n-->\n\n<p> C# ReadOnlySpan&lt;T&gt;  ReadOnlySpan&lt;T&gt; </p>\n<h2 id=\"ReadOnlySpan-\"><a href=\"#ReadOnlySpan-\" class=\"headerlink\" title=\"ReadOnlySpan&lt;T&gt; \"></a>ReadOnlySpan&lt;T&gt; </h2><p>ReadOnlySpan&lt;T&gt;  .NET Core 2.1+&#x2F;.NET 5+ <strong></strong><strong></strong></p>\n<p></p>\n<ul>\n<li><strong>stack-only</strong> GC </li>\n<li></li>\n<li></li>\n</ul>\n<blockquote>\n<p>ReadOnlySpan&lt;T&gt;  ReadOnlyMemory&lt;T&gt;</p>\n</blockquote>\n<h2 id=\"-ReadOnlySpan\"><a href=\"#-ReadOnlySpan\" class=\"headerlink\" title=\" ReadOnlySpan&lt;T&gt;\"></a> ReadOnlySpan&lt;T&gt;</h2><p>ReadOnlySpan&lt;T&gt;  MemoryExtensions.AsSpan  ReadOnlySpan&lt;T&gt;</p>\n<h3 id=\"-NET-\"><a href=\"#-NET-\" class=\"headerlink\" title=\" .NET \"></a> .NET </h3><p> .NET  .NET Framework 4.x MemoryExtensions NuGet </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Install-Package System.Memory</span><br><span class=\"line\"><span class=\"comment\">#  .NET CLI</span></span><br><span class=\"line\">dotnet add package System.Memory</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1--ReadOnlySpan\"><a href=\"#1--ReadOnlySpan\" class=\"headerlink\" title=\"1.  ReadOnlySpan&lt;char&gt;\"></a>1.  ReadOnlySpan&lt;char&gt;</h3><p> char </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">string</span> originalStr = <span class=\"string\">&quot;Hello ReadOnlySpan!&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">//  ReadOnlySpan&lt;char&gt;</span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">char</span>&gt; strSpan = originalStr.AsSpan(); <span class=\"comment\">//  MemoryExtensions.AsSpan(originalStr)</span></span><br><span class=\"line\"></span><br><span class=\"line\">Console.WriteLine(strSpan); <span class=\"comment\">// Hello ReadOnlySpan!</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2--ReadOnlySpan\"><a href=\"#2--ReadOnlySpan\" class=\"headerlink\" title=\"2.  ReadOnlySpan&lt;T&gt;\"></a>2.  ReadOnlySpan&lt;T&gt;</h3><p> int[]byte[]&#x2F;</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  int </span></span><br><span class=\"line\"><span class=\"built_in\">int</span>[] numArray = <span class=\"keyword\">new</span> <span class=\"built_in\">int</span>[] &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span> &#125;;</span><br><span class=\"line\"><span class=\"comment\">//  ReadOnlySpan&lt;int&gt;</span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; arraySpan = numArray.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\">Console.WriteLine(arraySpan.Length); <span class=\"comment\">// 5</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-List--ReadOnlySpan\"><a href=\"#3-List--ReadOnlySpan\" class=\"headerlink\" title=\"3. List&lt;T&gt;  ReadOnlySpan&lt;T&gt;\"></a>3. List&lt;T&gt;  ReadOnlySpan&lt;T&gt;</h3><p> List&lt;T&gt;  ReadOnlySpan&lt;T&gt;</p>\n<ol>\n<li> List&lt;T&gt;  ToArray()  List  ReadOnlySpan&lt;T&gt;</li>\n</ol>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  List&lt;string&gt;</span></span><br><span class=\"line\">List&lt;<span class=\"built_in\">string</span>&gt; strList = <span class=\"keyword\">new</span> List&lt;<span class=\"built_in\">string</span>&gt; &#123; <span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span> &#125;;</span><br><span class=\"line\"><span class=\"comment\">// List    ReadOnlySpan&lt;T&gt;</span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">string</span>&gt; listSpan = strList.ToArray().AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\">Console.WriteLine(listSpan[<span class=\"number\">1</span>]); <span class=\"comment\">// b</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li> CollectionsMarshal.AsSpan&lt;T&gt;(List&lt;T&gt;)  ReadOnlySpan&lt;T&gt;</li>\n</ol>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  List&lt;string&gt;</span></span><br><span class=\"line\">List&lt;<span class=\"built_in\">string</span>&gt; strList = <span class=\"keyword\">new</span> List&lt;<span class=\"built_in\">string</span>&gt; &#123; <span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span> &#125;;</span><br><span class=\"line\"><span class=\"comment\">// List    ReadOnlySpan&lt;T&gt;</span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">string</span>&gt; listSpan = CollectionsMarshal.AsSpan(strList);</span><br><span class=\"line\"></span><br><span class=\"line\">Console.WriteLine(listSpan[<span class=\"number\">1</span>]); <span class=\"comment\">// b</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>CollectionsMarshal  .NET 5+  NuGet  System.Runtime.InteropServices CollectionsMarshal </p>\n</blockquote>\n<h2 id=\"-ReadOnlySpan\"><a href=\"#-ReadOnlySpan\" class=\"headerlink\" title=\" ReadOnlySpan&lt;T&gt;\"></a> ReadOnlySpan&lt;T&gt;</h2><p>ReadOnlySpan&lt;T&gt; <strong> +  GC </strong></p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td> GC </td>\n<td> GC &#x2F; GC </td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>&#x2F; string.Substring</td>\n</tr>\n</tbody></table>\n<h3 id=\"2--string\"><a href=\"#2--string\" class=\"headerlink\" title=\"2.  string\"></a>2.  string</h3><p> string  SubstringSplit <strong></strong> GC</p>\n<p> ReadOnlySpan&lt;char&gt; </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">string</span> original = <span class=\"string\">&quot;Hello World&quot;</span>;</span><br><span class=\"line\"><span class=\"built_in\">string</span> subStr = original.Substring(<span class=\"number\">0</span>, <span class=\"number\">5</span>); <span class=\"comment\">//  &quot;Hello&quot;5</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ReadOnlySpan </span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">char</span>&gt; span = original.AsSpan();</span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">char</span>&gt; subSpan = span.Slice(<span class=\"number\">0</span>, <span class=\"number\">5</span>); <span class=\"comment\">// 5</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p> .NET  string  Substring ReadOnlySpan&lt;char&gt; .NET  ReadOnlySpan&lt;char&gt; </p>\n</blockquote>\n<h3 id=\"3--\"><a href=\"#3--\" class=\"headerlink\" title=\"3. &#x2F;\"></a>3. &#x2F;</h3><p> Array.Copy ReadOnlySpan&lt;T&gt;  Slice </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">int</span>[] nums = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">int</span>[] subNums = <span class=\"keyword\">new</span> <span class=\"built_in\">int</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\">Array.Copy(nums, <span class=\"number\">1</span>, subNums, <span class=\"number\">0</span>, <span class=\"number\">3</span>); <span class=\"comment\">// 1-3 [2,3,4]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ReadOnlySpan </span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; subSpan = nums.AsSpan().Slice(<span class=\"number\">1</span>, <span class=\"number\">3</span>); <span class=\"comment\">// 1-3</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ReadOnlySpan-string\"><a href=\"#ReadOnlySpan-string\" class=\"headerlink\" title=\"ReadOnlySpan&lt;T&gt; string\"></a>ReadOnlySpan&lt;T&gt; string</h2><p> 2 </p>\n<h3 id=\"1-Item-Int32-\"><a href=\"#1-Item-Int32-\" class=\"headerlink\" title=\"1. Item[Int32]\"></a>1. Item[Int32]</h3><p> ReadOnlySpan&lt;T&gt; <strong></strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">string</span> text = <span class=\"string\">&quot;C# ReadOnlySpan Tutorial&quot;</span>;</span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">char</span>&gt; textSpan = text.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 20</span></span><br><span class=\"line\"><span class=\"built_in\">char</span> charAt2 = textSpan[<span class=\"number\">2</span>]; </span><br><span class=\"line\">Console.WriteLine(charAt2); <span class=\"comment\">// &quot;C# &quot; </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ReadOnlySpan </span></span><br><span class=\"line\"><span class=\"comment\">// textSpan[2] = &#x27;x&#x27;; // </span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-Length\"><a href=\"#2-Length\" class=\"headerlink\" title=\"2. Length\"></a>2. Length</h3><p> ReadOnlySpan&lt;T&gt; </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">string</span> text = <span class=\"string\">&quot;Hello ReadOnlySpan&quot;</span>;</span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">char</span>&gt; textSpan = text.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">int</span> length = textSpan.Length;</span><br><span class=\"line\">Console.WriteLine(length); <span class=\"comment\">// 17&quot;Hello ReadOnlySpan&quot; 17</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Span  Length  0</span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">char</span>&gt; emptySpan = ReadOnlySpan&lt;<span class=\"built_in\">char</span>&gt;.Empty;</span><br><span class=\"line\">Console.WriteLine(emptySpan.Length); <span class=\"comment\">// 0</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ReadOnlySpan-\"><a href=\"#ReadOnlySpan-\" class=\"headerlink\" title=\"ReadOnlySpan&lt;T&gt; \"></a>ReadOnlySpan&lt;T&gt; </h2><p> int[]  4 </p>\n<h3 id=\"1-CopyTo-Span--Span\"><a href=\"#1-CopyTo-Span--Span\" class=\"headerlink\" title=\"1. CopyTo(Span&lt;T&gt;) Span&lt;T&gt;\"></a>1. CopyTo(Span&lt;T&gt;) Span&lt;T&gt;</h3><p> ReadOnlySpan&lt;T&gt;  Span&lt;T&gt; Span </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//   ReadOnlySpan&lt;int&gt;</span></span><br><span class=\"line\"><span class=\"built_in\">int</span>[] source = &#123; <span class=\"number\">10</span>, <span class=\"number\">20</span>, <span class=\"number\">30</span>, <span class=\"number\">40</span> &#125;;</span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; sourceSpan = source.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Span   Span</span></span><br><span class=\"line\"><span class=\"built_in\">int</span>[] target = <span class=\"keyword\">new</span> <span class=\"built_in\">int</span>[<span class=\"number\">4</span>];</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; targetSpan = target.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">sourceSpan.CopyTo(targetSpan);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// [10,20,30,40]</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, target)); </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-TryCopyTo-Span-\"><a href=\"#2-TryCopyTo-Span-\" class=\"headerlink\" title=\"2. TryCopyTo(Span&lt;T&gt;)\"></a>2. TryCopyTo(Span&lt;T&gt;)</h3><p> CopyTo  Span  false true</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">int</span>[] source = &#123; <span class=\"number\">10</span>, <span class=\"number\">20</span>, <span class=\"number\">30</span>, <span class=\"number\">40</span> &#125;;</span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; sourceSpan = source.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Span 3</span></span><br><span class=\"line\"><span class=\"built_in\">int</span>[] target = <span class=\"keyword\">new</span> <span class=\"built_in\">int</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; targetSpan = target.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">bool</span> isSuccess = sourceSpan.TryCopyTo(targetSpan);</span><br><span class=\"line\">Console.WriteLine(isSuccess); <span class=\"comment\">// False</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, target)); <span class=\"comment\">// 0,0,0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">int</span>[] target2 = <span class=\"keyword\">new</span> <span class=\"built_in\">int</span>[<span class=\"number\">4</span>];</span><br><span class=\"line\"><span class=\"built_in\">bool</span> isSuccess2 = sourceSpan.TryCopyTo(target2.AsSpan());</span><br><span class=\"line\">Console.WriteLine(isSuccess2); <span class=\"comment\">// True</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, target2)); <span class=\"comment\">// 10,20,30,40</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-Slice-Int32-\"><a href=\"#3-Slice-Int32-\" class=\"headerlink\" title=\"3. Slice(Int32)\"></a>3. Slice(Int32)</h3><p> startIndex </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">int</span>[] nums = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span> &#125;;</span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; numSpan = nums.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 22</span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; sliceSpan = numSpan.Slice(<span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 3,4,5234</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, sliceSpan)); </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-Slice-Int32-Int32--\"><a href=\"#4-Slice-Int32-Int32--\" class=\"headerlink\" title=\"4. Slice(Int32, Int32)+\"></a>4. Slice(Int32, Int32)+</h3><p> startIndex  length  startIndex + length   Span </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">int</span>[] nums = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span> &#125;;</span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; numSpan = nums.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 13</span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; sliceSpan = numSpan.Slice(<span class=\"number\">1</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 2,3,4123</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, sliceSpan)); </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"comment\">// numSpan.Slice(1, 5); // </span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>ReadOnlySpan&lt;T&gt; &#x2F;</p>\n<ul>\n<li>Contains(T)</li>\n<li>StartsWith(ReadOnlySpan&lt;T&gt;)</li>\n<li>EndsWith(ReadOnlySpan&lt;T&gt;)</li>\n<li>IndexOf(T)</li>\n<li>LastIndexOf(T)</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li>ReadOnlySpan&lt;T&gt;  AsSpan() &#x2F;&#x2F; System.Memory</li>\n<li> GC &#x2F;</li>\n<li>Item[Int32]Length</li>\n<li>CopyTo&#x2F;TryCopyToSlice</li>\n</ol>\n<p>ReadOnlySpan&lt;T&gt; IO C# </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://www.nuget.org/packages/System.Memory\">System.Memory - NuGet Gallery</a><br><a href=\"https://www.nuget.org/packages/System.Runtime.InteropServices\">System.Runtime.InteropServices - NuGet Gallery</a><br><a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.memoryextensions?view=net-8.0\">ReadOnlySpan&lt;T&gt;  - Microsoft Learn</a><br><a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.memoryextensions?view=net-8.0\">MemoryExtensions  - Microsoft Learn</a><br><a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.runtime.interopservices.collectionsmarshal?view=net-9.0\">CollectionsMarshal  - Microsoft Learn</a></p>\n","excerpt":"","more":"<h3 id=\"2026-01-18-14-29-29\"><a href=\"#2026-01-18-14-29-29\" class=\"headerlink\" title=\"2026-01-18 14:29:29\"></a><strong>2026-01-18 14:29:29</strong></h3><p></p>\n<hr>\n<!--\n markdown  C#  ReadOnlySpan<T> ++ \n\n1.  ReadOnlySpan<T> \n2.  stringList<T> MemoryExtensions.AsSpan  ReadOnlySpan<T>  .net  MemoryExtensions  NuGet  System.Memory \n3.  ReadOnlySpan<T>\n  1. ReadOnlySpan<T> \n  2.  string  MemoryExtensions.AsSpan  ReadOnlySpan<char>  string  ReadOnlySpan\n  3.   \n4. ReadOnlySpan<T> + string\n  - Item[Int32]\n  - Length\n5. ReadOnlySpan<T> + \n  - CopyTo(Span<T>) ReadOnlySpan<T>  Span<T>\n  - TryCopyTo(Span<T>) ReadOnlySpan<T>  Span<T> \n  - Slice(Int32)\n  - Slice(Int32, Int32)\n  -  ContainsStartsWithEndsWithIndexOf  / \n-->\n\n<p> C# ReadOnlySpan&lt;T&gt;  ReadOnlySpan&lt;T&gt; </p>\n<h2 id=\"ReadOnlySpan-\"><a href=\"#ReadOnlySpan-\" class=\"headerlink\" title=\"ReadOnlySpan&lt;T&gt; \"></a>ReadOnlySpan&lt;T&gt; </h2><p>ReadOnlySpan&lt;T&gt;  .NET Core 2.1+&#x2F;.NET 5+ <strong></strong><strong></strong></p>\n<p></p>\n<ul>\n<li><strong>stack-only</strong> GC </li>\n<li></li>\n<li></li>\n</ul>\n<blockquote>\n<p>ReadOnlySpan&lt;T&gt;  ReadOnlyMemory&lt;T&gt;</p>\n</blockquote>\n<h2 id=\"-ReadOnlySpan\"><a href=\"#-ReadOnlySpan\" class=\"headerlink\" title=\" ReadOnlySpan&lt;T&gt;\"></a> ReadOnlySpan&lt;T&gt;</h2><p>ReadOnlySpan&lt;T&gt;  MemoryExtensions.AsSpan  ReadOnlySpan&lt;T&gt;</p>\n<h3 id=\"-NET-\"><a href=\"#-NET-\" class=\"headerlink\" title=\" .NET \"></a> .NET </h3><p> .NET  .NET Framework 4.x MemoryExtensions NuGet </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Install-Package System.Memory</span><br><span class=\"line\"><span class=\"comment\">#  .NET CLI</span></span><br><span class=\"line\">dotnet add package System.Memory</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1--ReadOnlySpan\"><a href=\"#1--ReadOnlySpan\" class=\"headerlink\" title=\"1.  ReadOnlySpan&lt;char&gt;\"></a>1.  ReadOnlySpan&lt;char&gt;</h3><p> char </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">string</span> originalStr = <span class=\"string\">&quot;Hello ReadOnlySpan!&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">//  ReadOnlySpan&lt;char&gt;</span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">char</span>&gt; strSpan = originalStr.AsSpan(); <span class=\"comment\">//  MemoryExtensions.AsSpan(originalStr)</span></span><br><span class=\"line\"></span><br><span class=\"line\">Console.WriteLine(strSpan); <span class=\"comment\">// Hello ReadOnlySpan!</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2--ReadOnlySpan\"><a href=\"#2--ReadOnlySpan\" class=\"headerlink\" title=\"2.  ReadOnlySpan&lt;T&gt;\"></a>2.  ReadOnlySpan&lt;T&gt;</h3><p> int[]byte[]&#x2F;</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  int </span></span><br><span class=\"line\"><span class=\"built_in\">int</span>[] numArray = <span class=\"keyword\">new</span> <span class=\"built_in\">int</span>[] &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span> &#125;;</span><br><span class=\"line\"><span class=\"comment\">//  ReadOnlySpan&lt;int&gt;</span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; arraySpan = numArray.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\">Console.WriteLine(arraySpan.Length); <span class=\"comment\">// 5</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-List--ReadOnlySpan\"><a href=\"#3-List--ReadOnlySpan\" class=\"headerlink\" title=\"3. List&lt;T&gt;  ReadOnlySpan&lt;T&gt;\"></a>3. List&lt;T&gt;  ReadOnlySpan&lt;T&gt;</h3><p> List&lt;T&gt;  ReadOnlySpan&lt;T&gt;</p>\n<ol>\n<li> List&lt;T&gt;  ToArray()  List  ReadOnlySpan&lt;T&gt;</li>\n</ol>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  List&lt;string&gt;</span></span><br><span class=\"line\">List&lt;<span class=\"built_in\">string</span>&gt; strList = <span class=\"keyword\">new</span> List&lt;<span class=\"built_in\">string</span>&gt; &#123; <span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span> &#125;;</span><br><span class=\"line\"><span class=\"comment\">// List    ReadOnlySpan&lt;T&gt;</span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">string</span>&gt; listSpan = strList.ToArray().AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\">Console.WriteLine(listSpan[<span class=\"number\">1</span>]); <span class=\"comment\">// b</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li> CollectionsMarshal.AsSpan&lt;T&gt;(List&lt;T&gt;)  ReadOnlySpan&lt;T&gt;</li>\n</ol>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  List&lt;string&gt;</span></span><br><span class=\"line\">List&lt;<span class=\"built_in\">string</span>&gt; strList = <span class=\"keyword\">new</span> List&lt;<span class=\"built_in\">string</span>&gt; &#123; <span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span> &#125;;</span><br><span class=\"line\"><span class=\"comment\">// List    ReadOnlySpan&lt;T&gt;</span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">string</span>&gt; listSpan = CollectionsMarshal.AsSpan(strList);</span><br><span class=\"line\"></span><br><span class=\"line\">Console.WriteLine(listSpan[<span class=\"number\">1</span>]); <span class=\"comment\">// b</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>CollectionsMarshal  .NET 5+  NuGet  System.Runtime.InteropServices CollectionsMarshal </p>\n</blockquote>\n<h2 id=\"-ReadOnlySpan\"><a href=\"#-ReadOnlySpan\" class=\"headerlink\" title=\" ReadOnlySpan&lt;T&gt;\"></a> ReadOnlySpan&lt;T&gt;</h2><p>ReadOnlySpan&lt;T&gt; <strong> +  GC </strong></p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td> GC </td>\n<td> GC &#x2F; GC </td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>&#x2F; string.Substring</td>\n</tr>\n</tbody></table>\n<h3 id=\"2--string\"><a href=\"#2--string\" class=\"headerlink\" title=\"2.  string\"></a>2.  string</h3><p> string  SubstringSplit <strong></strong> GC</p>\n<p> ReadOnlySpan&lt;char&gt; </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">string</span> original = <span class=\"string\">&quot;Hello World&quot;</span>;</span><br><span class=\"line\"><span class=\"built_in\">string</span> subStr = original.Substring(<span class=\"number\">0</span>, <span class=\"number\">5</span>); <span class=\"comment\">//  &quot;Hello&quot;5</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ReadOnlySpan </span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">char</span>&gt; span = original.AsSpan();</span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">char</span>&gt; subSpan = span.Slice(<span class=\"number\">0</span>, <span class=\"number\">5</span>); <span class=\"comment\">// 5</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p> .NET  string  Substring ReadOnlySpan&lt;char&gt; .NET  ReadOnlySpan&lt;char&gt; </p>\n</blockquote>\n<h3 id=\"3--\"><a href=\"#3--\" class=\"headerlink\" title=\"3. &#x2F;\"></a>3. &#x2F;</h3><p> Array.Copy ReadOnlySpan&lt;T&gt;  Slice </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">int</span>[] nums = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">int</span>[] subNums = <span class=\"keyword\">new</span> <span class=\"built_in\">int</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\">Array.Copy(nums, <span class=\"number\">1</span>, subNums, <span class=\"number\">0</span>, <span class=\"number\">3</span>); <span class=\"comment\">// 1-3 [2,3,4]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ReadOnlySpan </span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; subSpan = nums.AsSpan().Slice(<span class=\"number\">1</span>, <span class=\"number\">3</span>); <span class=\"comment\">// 1-3</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ReadOnlySpan-string\"><a href=\"#ReadOnlySpan-string\" class=\"headerlink\" title=\"ReadOnlySpan&lt;T&gt; string\"></a>ReadOnlySpan&lt;T&gt; string</h2><p> 2 </p>\n<h3 id=\"1-Item-Int32-\"><a href=\"#1-Item-Int32-\" class=\"headerlink\" title=\"1. Item[Int32]\"></a>1. Item[Int32]</h3><p> ReadOnlySpan&lt;T&gt; <strong></strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">string</span> text = <span class=\"string\">&quot;C# ReadOnlySpan Tutorial&quot;</span>;</span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">char</span>&gt; textSpan = text.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 20</span></span><br><span class=\"line\"><span class=\"built_in\">char</span> charAt2 = textSpan[<span class=\"number\">2</span>]; </span><br><span class=\"line\">Console.WriteLine(charAt2); <span class=\"comment\">// &quot;C# &quot; </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ReadOnlySpan </span></span><br><span class=\"line\"><span class=\"comment\">// textSpan[2] = &#x27;x&#x27;; // </span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-Length\"><a href=\"#2-Length\" class=\"headerlink\" title=\"2. Length\"></a>2. Length</h3><p> ReadOnlySpan&lt;T&gt; </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">string</span> text = <span class=\"string\">&quot;Hello ReadOnlySpan&quot;</span>;</span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">char</span>&gt; textSpan = text.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">int</span> length = textSpan.Length;</span><br><span class=\"line\">Console.WriteLine(length); <span class=\"comment\">// 17&quot;Hello ReadOnlySpan&quot; 17</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Span  Length  0</span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">char</span>&gt; emptySpan = ReadOnlySpan&lt;<span class=\"built_in\">char</span>&gt;.Empty;</span><br><span class=\"line\">Console.WriteLine(emptySpan.Length); <span class=\"comment\">// 0</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ReadOnlySpan-\"><a href=\"#ReadOnlySpan-\" class=\"headerlink\" title=\"ReadOnlySpan&lt;T&gt; \"></a>ReadOnlySpan&lt;T&gt; </h2><p> int[]  4 </p>\n<h3 id=\"1-CopyTo-Span--Span\"><a href=\"#1-CopyTo-Span--Span\" class=\"headerlink\" title=\"1. CopyTo(Span&lt;T&gt;) Span&lt;T&gt;\"></a>1. CopyTo(Span&lt;T&gt;) Span&lt;T&gt;</h3><p> ReadOnlySpan&lt;T&gt;  Span&lt;T&gt; Span </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//   ReadOnlySpan&lt;int&gt;</span></span><br><span class=\"line\"><span class=\"built_in\">int</span>[] source = &#123; <span class=\"number\">10</span>, <span class=\"number\">20</span>, <span class=\"number\">30</span>, <span class=\"number\">40</span> &#125;;</span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; sourceSpan = source.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Span   Span</span></span><br><span class=\"line\"><span class=\"built_in\">int</span>[] target = <span class=\"keyword\">new</span> <span class=\"built_in\">int</span>[<span class=\"number\">4</span>];</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; targetSpan = target.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">sourceSpan.CopyTo(targetSpan);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// [10,20,30,40]</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, target)); </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-TryCopyTo-Span-\"><a href=\"#2-TryCopyTo-Span-\" class=\"headerlink\" title=\"2. TryCopyTo(Span&lt;T&gt;)\"></a>2. TryCopyTo(Span&lt;T&gt;)</h3><p> CopyTo  Span  false true</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">int</span>[] source = &#123; <span class=\"number\">10</span>, <span class=\"number\">20</span>, <span class=\"number\">30</span>, <span class=\"number\">40</span> &#125;;</span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; sourceSpan = source.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Span 3</span></span><br><span class=\"line\"><span class=\"built_in\">int</span>[] target = <span class=\"keyword\">new</span> <span class=\"built_in\">int</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; targetSpan = target.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">bool</span> isSuccess = sourceSpan.TryCopyTo(targetSpan);</span><br><span class=\"line\">Console.WriteLine(isSuccess); <span class=\"comment\">// False</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, target)); <span class=\"comment\">// 0,0,0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">int</span>[] target2 = <span class=\"keyword\">new</span> <span class=\"built_in\">int</span>[<span class=\"number\">4</span>];</span><br><span class=\"line\"><span class=\"built_in\">bool</span> isSuccess2 = sourceSpan.TryCopyTo(target2.AsSpan());</span><br><span class=\"line\">Console.WriteLine(isSuccess2); <span class=\"comment\">// True</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, target2)); <span class=\"comment\">// 10,20,30,40</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-Slice-Int32-\"><a href=\"#3-Slice-Int32-\" class=\"headerlink\" title=\"3. Slice(Int32)\"></a>3. Slice(Int32)</h3><p> startIndex </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">int</span>[] nums = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span> &#125;;</span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; numSpan = nums.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 22</span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; sliceSpan = numSpan.Slice(<span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 3,4,5234</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, sliceSpan)); </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-Slice-Int32-Int32--\"><a href=\"#4-Slice-Int32-Int32--\" class=\"headerlink\" title=\"4. Slice(Int32, Int32)+\"></a>4. Slice(Int32, Int32)+</h3><p> startIndex  length  startIndex + length   Span </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">int</span>[] nums = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span> &#125;;</span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; numSpan = nums.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 13</span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; sliceSpan = numSpan.Slice(<span class=\"number\">1</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 2,3,4123</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, sliceSpan)); </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"comment\">// numSpan.Slice(1, 5); // </span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>ReadOnlySpan&lt;T&gt; &#x2F;</p>\n<ul>\n<li>Contains(T)</li>\n<li>StartsWith(ReadOnlySpan&lt;T&gt;)</li>\n<li>EndsWith(ReadOnlySpan&lt;T&gt;)</li>\n<li>IndexOf(T)</li>\n<li>LastIndexOf(T)</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li>ReadOnlySpan&lt;T&gt;  AsSpan() &#x2F;&#x2F; System.Memory</li>\n<li> GC &#x2F;</li>\n<li>Item[Int32]Length</li>\n<li>CopyTo&#x2F;TryCopyToSlice</li>\n</ol>\n<p>ReadOnlySpan&lt;T&gt; IO C# </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://www.nuget.org/packages/System.Memory\">System.Memory - NuGet Gallery</a><br><a href=\"https://www.nuget.org/packages/System.Runtime.InteropServices\">System.Runtime.InteropServices - NuGet Gallery</a><br><a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.memoryextensions?view=net-8.0\">ReadOnlySpan&lt;T&gt;  - Microsoft Learn</a><br><a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.memoryextensions?view=net-8.0\">MemoryExtensions  - Microsoft Learn</a><br><a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.runtime.interopservices.collectionsmarshal?view=net-9.0\">CollectionsMarshal  - Microsoft Learn</a></p>\n"},{"title":"loglnlg ","date":"2026-02-26T09:59:36.000Z","_content":"\n### **2026-02-26 18:02:28**\n\n Qwen3.5=Plus \n\n---\n\n>  ****/\n> |  |  |  |  |\n> |------|------|------|------|\n> | $\\log x$ |  | **10** |  |\n> | $\\ln x$ |  | **e**  2.71828 |  |\n> | $\\lg x$ |  | **2** |  |\n\n---\n\n## \n\n\n\n### 1.1 \n $a^n = x$ $a>0, a\\neq1, x>0$\n$$n = \\log_a x$$\n\n****\n$$ \\log_a x = n \\iff a^n = x $$\n\n****\n-  $2^3 = 8$ $\\log_2 8 = 3$\n-  $10^2 = 100$ $\\log_{10} 100 = 2$\n-  $e^1 = e$ $\\ln e = 1$\n\n### 1.2 \n\n\n|  |  |  |\n|------|------|------|\n| $\\log_a 1 = 0$ | 1  0 | $\\log_{10} 1 = 0$  $10^0=1$ |\n| $\\log_a a = 1$ |  1 | $\\ln e = 1$  $e^1=e$ |\n| $a^{\\log_a x} = x$ |  | $2^{\\log_2 5} = 5$ |\n| $\\log_a (a^x) = x$ |  | $\\log_3 (3^7) = 7$ |\n| $\\log_a x = \\frac{1}{\\log_x a}$ |  | $\\log_2 8 = \\frac{1}{\\log_8 2} = 3$ |\n\n---\n\n## \n\n### 2.1 \n\n|  |  |  |\n|------|----------|----------|\n| $\\log_a (M \\cdot N) = \\log_a M + \\log_a N$ |  =  | $\\log_{10}(100 \\times 1000) = 2 + 3 = 5$ |\n| $\\log_a \\left(\\frac{M}{N}\\right) = \\log_a M - \\log_a N$ |  =  | $\\ln\\left(\\frac{e^5}{e^2}\\right) = 5 - 2 = 3$ |\n\n### 2.2 \n\n|  |  |  |\n|------|----------|----------|\n| $\\log_a (M^k) = k \\cdot \\log_a M$ |  =  | $\\log_2(8^3) = 3 \\cdot \\log_2 8 = 3 \\times 3 = 9$ |\n| $\\log_a (\\sqrt[n]{M}) = \\frac{1}{n} \\cdot \\log_a M$ |  =  | $\\lg(\\sqrt{1024}) = \\frac{1}{2} \\lg 1024 = 5$ |\n| $\\log_{a^n} M = \\frac{1}{n} \\cdot \\log_a M$ |  | $\\log_{100} 1000 = \\frac{1}{2} \\log_{10} 1000 = 1.5$ |\n\n---\n\n## \n\n\n\n$$ \\boxed{\\log_a x = \\frac{\\log_b x}{\\log_b a}} $$\n\n****\n\n### 3.1  ($\\log_{10}, \\ln, \\log_2$)\n\n|  |  |  |  |\n|----------|------|----------|----------|\n| **$\\log_{10} \\to \\ln$** | $\\ln x = \\log_{10} x \\times \\ln 10$ | $\\times 2.302585$ | $\\ln 100 = 2 \\times 2.3026 \\approx 4.605$ |\n| **$\\ln \\to \\log_{10}$** | $\\log_{10} x = \\frac{\\ln x}{\\ln 10}$ | $\\div 2.302585$ | $\\log_{10} e = 1 \\div 2.3026 \\approx 0.434$ |\n| **$\\log_2 \\to \\ln$** | $\\ln x = \\log_2 x \\times \\ln 2$ | $\\times 0.693147$ | $\\ln 8 = 3 \\times 0.6931 \\approx 2.079$ |\n| **$\\ln \\to \\log_2$** | $\\log_2 x = \\frac{\\ln x}{\\ln 2}$ | $\\div 0.693147$ | $\\log_2 10 = 2.3026 \\div 0.6931 \\approx 3.322$ |\n| **$\\log_{10} \\to \\log_2$** | $\\log_2 x = \\frac{\\log_{10} x}{\\log_{10} 2}$ | $\\div 0.301030$ | $\\log_2 100 = 2 \\div 0.3010 \\approx 6.644$ |\n| **$\\log_2 \\to \\log_{10}$** | $\\log_{10} x = \\log_2 x \\times \\log_{10} 2$ | $\\times 0.301030$ | $\\log_{10} 8 = 3 \\times 0.3010 \\approx 0.903$ |\n\n### 3.2 \n\n```math\n# \nln(2)   0.69314718\nln(10)  2.30258509\n\n# \nlog(2)  0.30103000\nlog(e)  0.43429448\n\n# \nlog(10)  3.32192809\nlog(e)   1.44269504\n\n# \n1/ln(2)       1.442695  (ln  log )\n1/ln(10)      0.434294  (ln  log )\n1/log(2)    3.321928  (log  log )\n```\n\n---\n\n## \n\n### 4.1 \n\n| $x$ | $\\log_{10} x$ | $\\ln x$ | $\\log_2 x$ |\n|-----|---------------|---------|------------|\n| 1 | 0 | 0 | 0 |\n| 2 | 0.30103 | 0.69315 | 1 |\n| $e$ | 0.43429 | 1 | 1.44270 |\n| 10 | 1 | 2.30259 | 3.32193 |\n| 100 | 2 | 4.60517 | 6.64386 |\n| 1000 | 3 | 6.90776 | 9.96578 |\n\n### 4.2 \n\n|  |  |  |\n|------|------|----------|\n| $\\lim_{x \\to 0^+} \\log_a x = -\\infty$ | $a > 1$ | $\\log_{10}(0.001) = -3$ |\n| $\\lim_{x \\to +\\infty} \\log_a x = +\\infty$ | $a > 1$ | $\\log_2(1024) = 10$ |\n| $\\log_a(1+x) \\approx \\frac{x}{\\ln a}$ | $x \\to 0$ () | $\\ln(1.01) \\approx 0.01$ |\n\n---\n\n## \n\n### 5.1 \n\n|  $f(x)$ |  $f'(x)$ |  |\n|------|------|------|\n| $\\ln x$ | $\\frac{1}{x}$ | $\\frac{d}{dx} \\ln(5x) = \\frac{1}{x}$ |\n| $\\log_a x$ | $\\frac{1}{x \\ln a}$ | $\\frac{d}{dx} \\log_{10} x = \\frac{1}{x \\ln 10}$ |\n| $\\log_a f(x)$ | $\\frac{f'(x)}{f(x) \\ln a}$ | $\\frac{d}{dx} \\ln(x^2+1) = \\frac{2x}{x^2+1}$ |\n\n### 5.2 \n\n|  |  |  |\n|-----------|------|------|\n| $\\int \\frac{1}{x} dx$ | $\\ln \\|x\\| + C$ | $\\int_1^e \\frac{1}{x} dx = \\ln e - \\ln 1 = 1$ |\n| $\\int \\log_a x \\, dx$ | $\\frac{x \\ln x - x}{\\ln a} + C$ | - |\n| $\\int x^k \\ln x \\, dx$ | $\\frac{x^{k+1}}{k+1} \\ln x - \\frac{x^{k+1}}{(k+1)^2} + C$ | $k \\neq -1$ |\n\n---\n\n## \n\n###  1\n**** $\\log_2(100 \\times \\sqrt{10})$\n\n** 1**\n$$\n\\begin{aligned}\n\\log_2(100 \\times \\sqrt{10}) &= \\log_2(100) + \\log_2(10^{0.5}) \\\\\n&= \\log_2(100) + 0.5 \\times \\log_2(10) \\\\\n&\\approx 6.643856 + 0.5 \\times 3.321928 \\\\\n&\\approx 6.643856 + 1.660964 \\\\\n&\\approx 8.304820\n\\end{aligned}\n$$\n\n** 2 $\\ln$ **\n$$\n\\begin{aligned}\n\\log_2(100 \\times \\sqrt{10}) &= \\frac{\\ln(100 \\times \\sqrt{10})}{\\ln 2} \\\\\n&= \\frac{\\ln 100 + 0.5 \\ln 10}{\\ln 2} \\\\\n&= \\frac{4.605170 + 0.5(2.302585)}{0.693147} \\\\\n&= \\frac{5.756463}{0.693147} \\\\\n&\\approx 8.304820\n\\end{aligned}\n$$\n\n****$2^{8.304820} \\approx 316.227$ $100 \\times \\sqrt{10} \\approx 316.227$\n\n---\n\n###  2\n**** $O(\\log_2 n)$  10 \n\n****\n$$ \\log_2 n = \\frac{\\log_{10} n}{\\log_{10} 2} \\approx \\frac{\\log_{10} n}{0.301030} \\approx 3.321928 \\times \\log_{10} n $$\n\n****\n O \n$$ O(\\log_2 n) = O(\\log_{10} n) = O(\\ln n) $$\n\n****\n $n = 1,000,000$ \n- $\\log_2 n \\approx 19.93$  20 \n- $\\log_{10} n = 6$\n- $6 \\times 3.321928 \\approx 19.93$\n\n---\n\n###  3 pH \n**** pH  $\\text{pH} = -\\log_{10}[H^+]$ $[H^+] = 2.5 \\times 10^{-4} \\text{ mol/L}$  pH \n\n****\n$$\n\\begin{aligned}\n\\text{pH} &= -\\log_{10}(2.5 \\times 10^{-4}) \\\\\n&= -(\\log_{10} 2.5 + \\log_{10} 10^{-4}) \\\\\n&= -(0.397940 - 4) \\\\\n&= -(-3.602060) \\\\\n&= 3.602060\n\\end{aligned}\n$$\n\n****$10^{-3.602060} \\approx 2.5 \\times 10^{-4}$\n\n---\n\n## \n\n|   |   |  |\n|-----------|-----------|------|\n| $\\log(a + b) = \\log a + \\log b$ | $\\log(a \\times b) = \\log a + \\log b$ |  |\n| $\\log(a / b) = \\log a / \\log b$ | $\\log(a / b) = \\log a - \\log b$ |  |\n| $\\log(a^n) = (\\log a)^n$ | $\\log(a^n) = n \\times \\log a$ |  |\n| $\\log(-x) = -\\log x$ | $\\log(-x)$  |  $> 0$ |\n|  $\\log$  |  $\\ln, \\log_{10}, \\log_2$ |  |\n| $\\log_0 x$  $\\log_1 x$ |  $> 0$  $\\neq 1$ |  |\n\n---\n\n## \n\n```markdown\n##  \nlog_a(x) = log_b(x)  log_b(a)\n\n##  \nln(2)  0.693147    | 1/ln(2)  1.442695\nln(10)  2.302585   | 1/ln(10)  0.434294\nlog(2)  0.301030 | 1/log(2)  3.321928\n\n##  \n   log(MN) = log M + log N\n   log(M/N) = log M - log N  \n   log(M^k) = k  log M\n   log(M) = (1/n)  log M\n\n##  \ny = log_a(x)  <==>  a^y = x\n```\n\n>  ****  \n> 1. ****`Log`/`Log10`/`Log2`  \n> 2. **** $\\times 1.442695$  $\\div 0.693147$  \n> 3. ****$x \\le 0$ ","source":"_posts/logarithm-formulas-guide-md.md","raw":"---\ntitle: loglnlg \ndate: 2026-02-26 17:59:36\ntags:\n- Math\ncategories:\n- Math\n---\n\n### **2026-02-26 18:02:28**\n\n Qwen3.5=Plus \n\n---\n\n>  ****/\n> |  |  |  |  |\n> |------|------|------|------|\n> | $\\log x$ |  | **10** |  |\n> | $\\ln x$ |  | **e**  2.71828 |  |\n> | $\\lg x$ |  | **2** |  |\n\n---\n\n## \n\n\n\n### 1.1 \n $a^n = x$ $a>0, a\\neq1, x>0$\n$$n = \\log_a x$$\n\n****\n$$ \\log_a x = n \\iff a^n = x $$\n\n****\n-  $2^3 = 8$ $\\log_2 8 = 3$\n-  $10^2 = 100$ $\\log_{10} 100 = 2$\n-  $e^1 = e$ $\\ln e = 1$\n\n### 1.2 \n\n\n|  |  |  |\n|------|------|------|\n| $\\log_a 1 = 0$ | 1  0 | $\\log_{10} 1 = 0$  $10^0=1$ |\n| $\\log_a a = 1$ |  1 | $\\ln e = 1$  $e^1=e$ |\n| $a^{\\log_a x} = x$ |  | $2^{\\log_2 5} = 5$ |\n| $\\log_a (a^x) = x$ |  | $\\log_3 (3^7) = 7$ |\n| $\\log_a x = \\frac{1}{\\log_x a}$ |  | $\\log_2 8 = \\frac{1}{\\log_8 2} = 3$ |\n\n---\n\n## \n\n### 2.1 \n\n|  |  |  |\n|------|----------|----------|\n| $\\log_a (M \\cdot N) = \\log_a M + \\log_a N$ |  =  | $\\log_{10}(100 \\times 1000) = 2 + 3 = 5$ |\n| $\\log_a \\left(\\frac{M}{N}\\right) = \\log_a M - \\log_a N$ |  =  | $\\ln\\left(\\frac{e^5}{e^2}\\right) = 5 - 2 = 3$ |\n\n### 2.2 \n\n|  |  |  |\n|------|----------|----------|\n| $\\log_a (M^k) = k \\cdot \\log_a M$ |  =  | $\\log_2(8^3) = 3 \\cdot \\log_2 8 = 3 \\times 3 = 9$ |\n| $\\log_a (\\sqrt[n]{M}) = \\frac{1}{n} \\cdot \\log_a M$ |  =  | $\\lg(\\sqrt{1024}) = \\frac{1}{2} \\lg 1024 = 5$ |\n| $\\log_{a^n} M = \\frac{1}{n} \\cdot \\log_a M$ |  | $\\log_{100} 1000 = \\frac{1}{2} \\log_{10} 1000 = 1.5$ |\n\n---\n\n## \n\n\n\n$$ \\boxed{\\log_a x = \\frac{\\log_b x}{\\log_b a}} $$\n\n****\n\n### 3.1  ($\\log_{10}, \\ln, \\log_2$)\n\n|  |  |  |  |\n|----------|------|----------|----------|\n| **$\\log_{10} \\to \\ln$** | $\\ln x = \\log_{10} x \\times \\ln 10$ | $\\times 2.302585$ | $\\ln 100 = 2 \\times 2.3026 \\approx 4.605$ |\n| **$\\ln \\to \\log_{10}$** | $\\log_{10} x = \\frac{\\ln x}{\\ln 10}$ | $\\div 2.302585$ | $\\log_{10} e = 1 \\div 2.3026 \\approx 0.434$ |\n| **$\\log_2 \\to \\ln$** | $\\ln x = \\log_2 x \\times \\ln 2$ | $\\times 0.693147$ | $\\ln 8 = 3 \\times 0.6931 \\approx 2.079$ |\n| **$\\ln \\to \\log_2$** | $\\log_2 x = \\frac{\\ln x}{\\ln 2}$ | $\\div 0.693147$ | $\\log_2 10 = 2.3026 \\div 0.6931 \\approx 3.322$ |\n| **$\\log_{10} \\to \\log_2$** | $\\log_2 x = \\frac{\\log_{10} x}{\\log_{10} 2}$ | $\\div 0.301030$ | $\\log_2 100 = 2 \\div 0.3010 \\approx 6.644$ |\n| **$\\log_2 \\to \\log_{10}$** | $\\log_{10} x = \\log_2 x \\times \\log_{10} 2$ | $\\times 0.301030$ | $\\log_{10} 8 = 3 \\times 0.3010 \\approx 0.903$ |\n\n### 3.2 \n\n```math\n# \nln(2)   0.69314718\nln(10)  2.30258509\n\n# \nlog(2)  0.30103000\nlog(e)  0.43429448\n\n# \nlog(10)  3.32192809\nlog(e)   1.44269504\n\n# \n1/ln(2)       1.442695  (ln  log )\n1/ln(10)      0.434294  (ln  log )\n1/log(2)    3.321928  (log  log )\n```\n\n---\n\n## \n\n### 4.1 \n\n| $x$ | $\\log_{10} x$ | $\\ln x$ | $\\log_2 x$ |\n|-----|---------------|---------|------------|\n| 1 | 0 | 0 | 0 |\n| 2 | 0.30103 | 0.69315 | 1 |\n| $e$ | 0.43429 | 1 | 1.44270 |\n| 10 | 1 | 2.30259 | 3.32193 |\n| 100 | 2 | 4.60517 | 6.64386 |\n| 1000 | 3 | 6.90776 | 9.96578 |\n\n### 4.2 \n\n|  |  |  |\n|------|------|----------|\n| $\\lim_{x \\to 0^+} \\log_a x = -\\infty$ | $a > 1$ | $\\log_{10}(0.001) = -3$ |\n| $\\lim_{x \\to +\\infty} \\log_a x = +\\infty$ | $a > 1$ | $\\log_2(1024) = 10$ |\n| $\\log_a(1+x) \\approx \\frac{x}{\\ln a}$ | $x \\to 0$ () | $\\ln(1.01) \\approx 0.01$ |\n\n---\n\n## \n\n### 5.1 \n\n|  $f(x)$ |  $f'(x)$ |  |\n|------|------|------|\n| $\\ln x$ | $\\frac{1}{x}$ | $\\frac{d}{dx} \\ln(5x) = \\frac{1}{x}$ |\n| $\\log_a x$ | $\\frac{1}{x \\ln a}$ | $\\frac{d}{dx} \\log_{10} x = \\frac{1}{x \\ln 10}$ |\n| $\\log_a f(x)$ | $\\frac{f'(x)}{f(x) \\ln a}$ | $\\frac{d}{dx} \\ln(x^2+1) = \\frac{2x}{x^2+1}$ |\n\n### 5.2 \n\n|  |  |  |\n|-----------|------|------|\n| $\\int \\frac{1}{x} dx$ | $\\ln \\|x\\| + C$ | $\\int_1^e \\frac{1}{x} dx = \\ln e - \\ln 1 = 1$ |\n| $\\int \\log_a x \\, dx$ | $\\frac{x \\ln x - x}{\\ln a} + C$ | - |\n| $\\int x^k \\ln x \\, dx$ | $\\frac{x^{k+1}}{k+1} \\ln x - \\frac{x^{k+1}}{(k+1)^2} + C$ | $k \\neq -1$ |\n\n---\n\n## \n\n###  1\n**** $\\log_2(100 \\times \\sqrt{10})$\n\n** 1**\n$$\n\\begin{aligned}\n\\log_2(100 \\times \\sqrt{10}) &= \\log_2(100) + \\log_2(10^{0.5}) \\\\\n&= \\log_2(100) + 0.5 \\times \\log_2(10) \\\\\n&\\approx 6.643856 + 0.5 \\times 3.321928 \\\\\n&\\approx 6.643856 + 1.660964 \\\\\n&\\approx 8.304820\n\\end{aligned}\n$$\n\n** 2 $\\ln$ **\n$$\n\\begin{aligned}\n\\log_2(100 \\times \\sqrt{10}) &= \\frac{\\ln(100 \\times \\sqrt{10})}{\\ln 2} \\\\\n&= \\frac{\\ln 100 + 0.5 \\ln 10}{\\ln 2} \\\\\n&= \\frac{4.605170 + 0.5(2.302585)}{0.693147} \\\\\n&= \\frac{5.756463}{0.693147} \\\\\n&\\approx 8.304820\n\\end{aligned}\n$$\n\n****$2^{8.304820} \\approx 316.227$ $100 \\times \\sqrt{10} \\approx 316.227$\n\n---\n\n###  2\n**** $O(\\log_2 n)$  10 \n\n****\n$$ \\log_2 n = \\frac{\\log_{10} n}{\\log_{10} 2} \\approx \\frac{\\log_{10} n}{0.301030} \\approx 3.321928 \\times \\log_{10} n $$\n\n****\n O \n$$ O(\\log_2 n) = O(\\log_{10} n) = O(\\ln n) $$\n\n****\n $n = 1,000,000$ \n- $\\log_2 n \\approx 19.93$  20 \n- $\\log_{10} n = 6$\n- $6 \\times 3.321928 \\approx 19.93$\n\n---\n\n###  3 pH \n**** pH  $\\text{pH} = -\\log_{10}[H^+]$ $[H^+] = 2.5 \\times 10^{-4} \\text{ mol/L}$  pH \n\n****\n$$\n\\begin{aligned}\n\\text{pH} &= -\\log_{10}(2.5 \\times 10^{-4}) \\\\\n&= -(\\log_{10} 2.5 + \\log_{10} 10^{-4}) \\\\\n&= -(0.397940 - 4) \\\\\n&= -(-3.602060) \\\\\n&= 3.602060\n\\end{aligned}\n$$\n\n****$10^{-3.602060} \\approx 2.5 \\times 10^{-4}$\n\n---\n\n## \n\n|   |   |  |\n|-----------|-----------|------|\n| $\\log(a + b) = \\log a + \\log b$ | $\\log(a \\times b) = \\log a + \\log b$ |  |\n| $\\log(a / b) = \\log a / \\log b$ | $\\log(a / b) = \\log a - \\log b$ |  |\n| $\\log(a^n) = (\\log a)^n$ | $\\log(a^n) = n \\times \\log a$ |  |\n| $\\log(-x) = -\\log x$ | $\\log(-x)$  |  $> 0$ |\n|  $\\log$  |  $\\ln, \\log_{10}, \\log_2$ |  |\n| $\\log_0 x$  $\\log_1 x$ |  $> 0$  $\\neq 1$ |  |\n\n---\n\n## \n\n```markdown\n##  \nlog_a(x) = log_b(x)  log_b(a)\n\n##  \nln(2)  0.693147    | 1/ln(2)  1.442695\nln(10)  2.302585   | 1/ln(10)  0.434294\nlog(2)  0.301030 | 1/log(2)  3.321928\n\n##  \n   log(MN) = log M + log N\n   log(M/N) = log M - log N  \n   log(M^k) = k  log M\n   log(M) = (1/n)  log M\n\n##  \ny = log_a(x)  <==>  a^y = x\n```\n\n>  ****  \n> 1. ****`Log`/`Log10`/`Log2`  \n> 2. **** $\\times 1.442695$  $\\div 0.693147$  \n> 3. ****$x \\le 0$ ","slug":"logarithm-formulas-guide-md","published":1,"updated":"2026-02-26T10:03:07.339Z","comments":1,"layout":"post","photos":[],"_id":"cmm3ar6w5000a6gu80djqexyh","content":"<h3 id=\"2026-02-26-18-02-28\"><a href=\"#2026-02-26-18-02-28\" class=\"headerlink\" title=\"2026-02-26 18:02:28\"></a><strong>2026-02-26 18:02:28</strong></h3><p> Qwen3.5&#x3D;Plus </p>\n<hr>\n<blockquote>\n<p> <strong></strong>&#x2F;</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$\\log x$</td>\n<td></td>\n<td><strong>10</strong></td>\n<td></td>\n</tr>\n<tr>\n<td>$\\ln x$</td>\n<td></td>\n<td><strong>e</strong>  2.71828</td>\n<td></td>\n</tr>\n<tr>\n<td>$\\lg x$</td>\n<td></td>\n<td><strong>2</strong></td>\n<td></td>\n</tr>\n</tbody></table>\n</blockquote>\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h3 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h3><p> $a^n &#x3D; x$ $a&gt;0, a\\neq1, x&gt;0$<br>$$n &#x3D; \\log_a x$$</p>\n<p><strong></strong><br>$$ \\log_a x &#x3D; n \\iff a^n &#x3D; x $$</p>\n<p><strong></strong></p>\n<ul>\n<li> $2^3 &#x3D; 8$ $\\log_2 8 &#x3D; 3$</li>\n<li> $10^2 &#x3D; 100$ $\\log_{10} 100 &#x3D; 2$</li>\n<li> $e^1 &#x3D; e$ $\\ln e &#x3D; 1$</li>\n</ul>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$\\log_a 1 &#x3D; 0$</td>\n<td>1  0</td>\n<td>$\\log_{10} 1 &#x3D; 0$  $10^0&#x3D;1$</td>\n</tr>\n<tr>\n<td>$\\log_a a &#x3D; 1$</td>\n<td> 1</td>\n<td>$\\ln e &#x3D; 1$  $e^1&#x3D;e$</td>\n</tr>\n<tr>\n<td>$a^{\\log_a x} &#x3D; x$</td>\n<td></td>\n<td>$2^{\\log_2 5} &#x3D; 5$</td>\n</tr>\n<tr>\n<td>$\\log_a (a^x) &#x3D; x$</td>\n<td></td>\n<td>$\\log_3 (3^7) &#x3D; 7$</td>\n</tr>\n<tr>\n<td>$\\log_a x &#x3D; \\frac{1}{\\log_x a}$</td>\n<td></td>\n<td>$\\log_2 8 &#x3D; \\frac{1}{\\log_8 2} &#x3D; 3$</td>\n</tr>\n</tbody></table>\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$\\log_a (M \\cdot N) &#x3D; \\log_a M + \\log_a N$</td>\n<td> &#x3D; </td>\n<td>$\\log_{10}(100 \\times 1000) &#x3D; 2 + 3 &#x3D; 5$</td>\n</tr>\n<tr>\n<td>$\\log_a \\left(\\frac{M}{N}\\right) &#x3D; \\log_a M - \\log_a N$</td>\n<td> &#x3D; </td>\n<td>$\\ln\\left(\\frac{e^5}{e^2}\\right) &#x3D; 5 - 2 &#x3D; 3$</td>\n</tr>\n</tbody></table>\n<h3 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h3><table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$\\log_a (M^k) &#x3D; k \\cdot \\log_a M$</td>\n<td> &#x3D; </td>\n<td>$\\log_2(8^3) &#x3D; 3 \\cdot \\log_2 8 &#x3D; 3 \\times 3 &#x3D; 9$</td>\n</tr>\n<tr>\n<td>$\\log_a (\\sqrt[n]{M}) &#x3D; \\frac{1}{n} \\cdot \\log_a M$</td>\n<td> &#x3D; </td>\n<td>$\\lg(\\sqrt{1024}) &#x3D; \\frac{1}{2} \\lg 1024 &#x3D; 5$</td>\n</tr>\n<tr>\n<td>$\\log_{a^n} M &#x3D; \\frac{1}{n} \\cdot \\log_a M$</td>\n<td></td>\n<td>$\\log_{100} 1000 &#x3D; \\frac{1}{2} \\log_{10} 1000 &#x3D; 1.5$</td>\n</tr>\n</tbody></table>\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>$$ \\boxed{\\log_a x &#x3D; \\frac{\\log_b x}{\\log_b a}} $$</p>\n<p><strong></strong></p>\n<h3 id=\"3-1--log-10-ln-log-2\"><a href=\"#3-1--log-10-ln-log-2\" class=\"headerlink\" title=\"3.1  ($\\log_{10}, \\ln, \\log_2$)\"></a>3.1  ($\\log_{10}, \\ln, \\log_2$)</h3><table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>$\\log_{10} \\to \\ln$</strong></td>\n<td>$\\ln x &#x3D; \\log_{10} x \\times \\ln 10$</td>\n<td>$\\times 2.302585$</td>\n<td>$\\ln 100 &#x3D; 2 \\times 2.3026 \\approx 4.605$</td>\n</tr>\n<tr>\n<td><strong>$\\ln \\to \\log_{10}$</strong></td>\n<td>$\\log_{10} x &#x3D; \\frac{\\ln x}{\\ln 10}$</td>\n<td>$\\div 2.302585$</td>\n<td>$\\log_{10} e &#x3D; 1 \\div 2.3026 \\approx 0.434$</td>\n</tr>\n<tr>\n<td><strong>$\\log_2 \\to \\ln$</strong></td>\n<td>$\\ln x &#x3D; \\log_2 x \\times \\ln 2$</td>\n<td>$\\times 0.693147$</td>\n<td>$\\ln 8 &#x3D; 3 \\times 0.6931 \\approx 2.079$</td>\n</tr>\n<tr>\n<td><strong>$\\ln \\to \\log_2$</strong></td>\n<td>$\\log_2 x &#x3D; \\frac{\\ln x}{\\ln 2}$</td>\n<td>$\\div 0.693147$</td>\n<td>$\\log_2 10 &#x3D; 2.3026 \\div 0.6931 \\approx 3.322$</td>\n</tr>\n<tr>\n<td><strong>$\\log_{10} \\to \\log_2$</strong></td>\n<td>$\\log_2 x &#x3D; \\frac{\\log_{10} x}{\\log_{10} 2}$</td>\n<td>$\\div 0.301030$</td>\n<td>$\\log_2 100 &#x3D; 2 \\div 0.3010 \\approx 6.644$</td>\n</tr>\n<tr>\n<td><strong>$\\log_2 \\to \\log_{10}$</strong></td>\n<td>$\\log_{10} x &#x3D; \\log_2 x \\times \\log_{10} 2$</td>\n<td>$\\times 0.301030$</td>\n<td>$\\log_{10} 8 &#x3D; 3 \\times 0.3010 \\approx 0.903$</td>\n</tr>\n</tbody></table>\n<h3 id=\"3-2-\"><a href=\"#3-2-\" class=\"headerlink\" title=\"3.2 \"></a>3.2 </h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># </span><br><span class=\"line\">ln(2)   0.69314718</span><br><span class=\"line\">ln(10)  2.30258509</span><br><span class=\"line\"></span><br><span class=\"line\"># </span><br><span class=\"line\">log(2)  0.30103000</span><br><span class=\"line\">log(e)  0.43429448</span><br><span class=\"line\"></span><br><span class=\"line\"># </span><br><span class=\"line\">log(10)  3.32192809</span><br><span class=\"line\">log(e)   1.44269504</span><br><span class=\"line\"></span><br><span class=\"line\"># </span><br><span class=\"line\">1/ln(2)       1.442695  (ln  log )</span><br><span class=\"line\">1/ln(10)      0.434294  (ln  log )</span><br><span class=\"line\">1/log(2)    3.321928  (log  log )</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"4-1-\"><a href=\"#4-1-\" class=\"headerlink\" title=\"4.1 \"></a>4.1 </h3><table>\n<thead>\n<tr>\n<th>$x$</th>\n<th>$\\log_{10} x$</th>\n<th>$\\ln x$</th>\n<th>$\\log_2 x$</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>2</td>\n<td>0.30103</td>\n<td>0.69315</td>\n<td>1</td>\n</tr>\n<tr>\n<td>$e$</td>\n<td>0.43429</td>\n<td>1</td>\n<td>1.44270</td>\n</tr>\n<tr>\n<td>10</td>\n<td>1</td>\n<td>2.30259</td>\n<td>3.32193</td>\n</tr>\n<tr>\n<td>100</td>\n<td>2</td>\n<td>4.60517</td>\n<td>6.64386</td>\n</tr>\n<tr>\n<td>1000</td>\n<td>3</td>\n<td>6.90776</td>\n<td>9.96578</td>\n</tr>\n</tbody></table>\n<h3 id=\"4-2-\"><a href=\"#4-2-\" class=\"headerlink\" title=\"4.2 \"></a>4.2 </h3><table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$\\lim_{x \\to 0^+} \\log_a x &#x3D; -\\infty$</td>\n<td>$a &gt; 1$</td>\n<td>$\\log_{10}(0.001) &#x3D; -3$</td>\n</tr>\n<tr>\n<td>$\\lim_{x \\to +\\infty} \\log_a x &#x3D; +\\infty$</td>\n<td>$a &gt; 1$</td>\n<td>$\\log_2(1024) &#x3D; 10$</td>\n</tr>\n<tr>\n<td>$\\log_a(1+x) \\approx \\frac{x}{\\ln a}$</td>\n<td>$x \\to 0$ ()</td>\n<td>$\\ln(1.01) \\approx 0.01$</td>\n</tr>\n</tbody></table>\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"5-1-\"><a href=\"#5-1-\" class=\"headerlink\" title=\"5.1 \"></a>5.1 </h3><table>\n<thead>\n<tr>\n<th> $f(x)$</th>\n<th> $f(x)$</th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$\\ln x$</td>\n<td>$\\frac{1}{x}$</td>\n<td>$\\frac{d}{dx} \\ln(5x) &#x3D; \\frac{1}{x}$</td>\n</tr>\n<tr>\n<td>$\\log_a x$</td>\n<td>$\\frac{1}{x \\ln a}$</td>\n<td>$\\frac{d}{dx} \\log_{10} x &#x3D; \\frac{1}{x \\ln 10}$</td>\n</tr>\n<tr>\n<td>$\\log_a f(x)$</td>\n<td>$\\frac{f(x)}{f(x) \\ln a}$</td>\n<td>$\\frac{d}{dx} \\ln(x^2+1) &#x3D; \\frac{2x}{x^2+1}$</td>\n</tr>\n</tbody></table>\n<h3 id=\"5-2-\"><a href=\"#5-2-\" class=\"headerlink\" title=\"5.2 \"></a>5.2 </h3><table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$\\int \\frac{1}{x} dx$</td>\n<td>$\\ln |x| + C$</td>\n<td>$\\int_1^e \\frac{1}{x} dx &#x3D; \\ln e - \\ln 1 &#x3D; 1$</td>\n</tr>\n<tr>\n<td>$\\int \\log_a x , dx$</td>\n<td>$\\frac{x \\ln x - x}{\\ln a} + C$</td>\n<td>-</td>\n</tr>\n<tr>\n<td>$\\int x^k \\ln x , dx$</td>\n<td>$\\frac{x^{k+1}}{k+1} \\ln x - \\frac{x^{k+1}}{(k+1)^2} + C$</td>\n<td>$k \\neq -1$</td>\n</tr>\n</tbody></table>\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\" 1\"></a> 1</h3><p><strong></strong> $\\log_2(100 \\times \\sqrt{10})$</p>\n<p><strong> 1</strong><br>$$<br>\\begin{aligned}<br>\\log_2(100 \\times \\sqrt{10}) &amp;&#x3D; \\log_2(100) + \\log_2(10^{0.5}) \\<br>&amp;&#x3D; \\log_2(100) + 0.5 \\times \\log_2(10) \\<br>&amp;\\approx 6.643856 + 0.5 \\times 3.321928 \\<br>&amp;\\approx 6.643856 + 1.660964 \\<br>&amp;\\approx 8.304820<br>\\end{aligned}<br>$$</p>\n<p><strong> 2 $\\ln$ </strong><br>$$<br>\\begin{aligned}<br>\\log_2(100 \\times \\sqrt{10}) &amp;&#x3D; \\frac{\\ln(100 \\times \\sqrt{10})}{\\ln 2} \\<br>&amp;&#x3D; \\frac{\\ln 100 + 0.5 \\ln 10}{\\ln 2} \\<br>&amp;&#x3D; \\frac{4.605170 + 0.5(2.302585)}{0.693147} \\<br>&amp;&#x3D; \\frac{5.756463}{0.693147} \\<br>&amp;\\approx 8.304820<br>\\end{aligned}<br>$$</p>\n<p><strong></strong>$2^{8.304820} \\approx 316.227$ $100 \\times \\sqrt{10} \\approx 316.227$</p>\n<hr>\n<h3 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\" 2\"></a> 2</h3><p><strong></strong> $O(\\log_2 n)$  10 </p>\n<p><strong></strong><br>$$ \\log_2 n &#x3D; \\frac{\\log_{10} n}{\\log_{10} 2} \\approx \\frac{\\log_{10} n}{0.301030} \\approx 3.321928 \\times \\log_{10} n $$</p>\n<p><strong></strong><br> O <br>$$ O(\\log_2 n) &#x3D; O(\\log_{10} n) &#x3D; O(\\ln n) $$</p>\n<p><strong></strong><br> $n &#x3D; 1,000,000$ </p>\n<ul>\n<li>$\\log_2 n \\approx 19.93$  20 </li>\n<li>$\\log_{10} n &#x3D; 6$</li>\n<li>$6 \\times 3.321928 \\approx 19.93$</li>\n</ul>\n<hr>\n<h3 id=\"-3-pH-\"><a href=\"#-3-pH-\" class=\"headerlink\" title=\" 3 pH \"></a> 3 pH </h3><p><strong></strong> pH  $\\text{pH} &#x3D; -\\log_{10}[H^+]$ $[H^+] &#x3D; 2.5 \\times 10^{-4} \\text{ mol&#x2F;L}$  pH </p>\n<p><strong></strong><br>$$<br>\\begin{aligned}<br>\\text{pH} &amp;&#x3D; -\\log_{10}(2.5 \\times 10^{-4}) \\<br>&amp;&#x3D; -(\\log_{10} 2.5 + \\log_{10} 10^{-4}) \\<br>&amp;&#x3D; -(0.397940 - 4) \\<br>&amp;&#x3D; -(-3.602060) \\<br>&amp;&#x3D; 3.602060<br>\\end{aligned}<br>$$</p>\n<p><strong></strong>$10^{-3.602060} \\approx 2.5 \\times 10^{-4}$</p>\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><table>\n<thead>\n<tr>\n<th> </th>\n<th> </th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$\\log(a + b) &#x3D; \\log a + \\log b$</td>\n<td>$\\log(a \\times b) &#x3D; \\log a + \\log b$</td>\n<td></td>\n</tr>\n<tr>\n<td>$\\log(a &#x2F; b) &#x3D; \\log a &#x2F; \\log b$</td>\n<td>$\\log(a &#x2F; b) &#x3D; \\log a - \\log b$</td>\n<td></td>\n</tr>\n<tr>\n<td>$\\log(a^n) &#x3D; (\\log a)^n$</td>\n<td>$\\log(a^n) &#x3D; n \\times \\log a$</td>\n<td></td>\n</tr>\n<tr>\n<td>$\\log(-x) &#x3D; -\\log x$</td>\n<td>$\\log(-x)$ </td>\n<td> $&gt; 0$</td>\n</tr>\n<tr>\n<td> $\\log$ </td>\n<td> $\\ln, \\log_{10}, \\log_2$</td>\n<td></td>\n</tr>\n<tr>\n<td>$\\log_0 x$  $\\log_1 x$</td>\n<td> $&gt; 0$  $\\neq 1$</td>\n<td></td>\n</tr>\n</tbody></table>\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">##  </span></span><br><span class=\"line\">log<span class=\"emphasis\">_a(x) = log_</span>b(x)  log<span class=\"emphasis\">_b(a)</span></span><br><span class=\"line\"><span class=\"emphasis\"></span></span><br><span class=\"line\"><span class=\"emphasis\">##  </span></span><br><span class=\"line\"><span class=\"emphasis\">ln(2)  0.693147    | 1/ln(2)  1.442695</span></span><br><span class=\"line\"><span class=\"emphasis\">ln(10)  2.302585   | 1/ln(10)  0.434294</span></span><br><span class=\"line\"><span class=\"emphasis\">log(2)  0.301030 | 1/log(2)  3.321928</span></span><br><span class=\"line\"><span class=\"emphasis\"></span></span><br><span class=\"line\"><span class=\"emphasis\">##  </span></span><br><span class=\"line\"><span class=\"emphasis\">   log(MN) = log M + log N</span></span><br><span class=\"line\"><span class=\"emphasis\">   log(M/N) = log M - log N  </span></span><br><span class=\"line\"><span class=\"emphasis\">   log(M^k) = k  log M</span></span><br><span class=\"line\"><span class=\"emphasis\">   log(M) = (1/n)  log M</span></span><br><span class=\"line\"><span class=\"emphasis\"></span></span><br><span class=\"line\"><span class=\"emphasis\">##  </span></span><br><span class=\"line\"><span class=\"emphasis\">y = log_</span>a(x)  &lt;==&gt;  a^y = x</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p> <strong></strong>  </p>\n<ol>\n<li><strong></strong><code>Log</code>&#x2F;<code>Log10</code>&#x2F;<code>Log2</code>  </li>\n<li><strong></strong> $\\times 1.442695$  $\\div 0.693147$  </li>\n<li><strong></strong>$x \\le 0$ </li>\n</ol>\n</blockquote>\n","excerpt":"","more":"<h3 id=\"2026-02-26-18-02-28\"><a href=\"#2026-02-26-18-02-28\" class=\"headerlink\" title=\"2026-02-26 18:02:28\"></a><strong>2026-02-26 18:02:28</strong></h3><p> Qwen3.5&#x3D;Plus </p>\n<hr>\n<blockquote>\n<p> <strong></strong>&#x2F;</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$\\log x$</td>\n<td></td>\n<td><strong>10</strong></td>\n<td></td>\n</tr>\n<tr>\n<td>$\\ln x$</td>\n<td></td>\n<td><strong>e</strong>  2.71828</td>\n<td></td>\n</tr>\n<tr>\n<td>$\\lg x$</td>\n<td></td>\n<td><strong>2</strong></td>\n<td></td>\n</tr>\n</tbody></table>\n</blockquote>\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h3 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h3><p> $a^n &#x3D; x$ $a&gt;0, a\\neq1, x&gt;0$<br>$$n &#x3D; \\log_a x$$</p>\n<p><strong></strong><br>$$ \\log_a x &#x3D; n \\iff a^n &#x3D; x $$</p>\n<p><strong></strong></p>\n<ul>\n<li> $2^3 &#x3D; 8$ $\\log_2 8 &#x3D; 3$</li>\n<li> $10^2 &#x3D; 100$ $\\log_{10} 100 &#x3D; 2$</li>\n<li> $e^1 &#x3D; e$ $\\ln e &#x3D; 1$</li>\n</ul>\n<h3 id=\"1-2-\"><a href=\"#1-2-\" class=\"headerlink\" title=\"1.2 \"></a>1.2 </h3><p></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$\\log_a 1 &#x3D; 0$</td>\n<td>1  0</td>\n<td>$\\log_{10} 1 &#x3D; 0$  $10^0&#x3D;1$</td>\n</tr>\n<tr>\n<td>$\\log_a a &#x3D; 1$</td>\n<td> 1</td>\n<td>$\\ln e &#x3D; 1$  $e^1&#x3D;e$</td>\n</tr>\n<tr>\n<td>$a^{\\log_a x} &#x3D; x$</td>\n<td></td>\n<td>$2^{\\log_2 5} &#x3D; 5$</td>\n</tr>\n<tr>\n<td>$\\log_a (a^x) &#x3D; x$</td>\n<td></td>\n<td>$\\log_3 (3^7) &#x3D; 7$</td>\n</tr>\n<tr>\n<td>$\\log_a x &#x3D; \\frac{1}{\\log_x a}$</td>\n<td></td>\n<td>$\\log_2 8 &#x3D; \\frac{1}{\\log_8 2} &#x3D; 3$</td>\n</tr>\n</tbody></table>\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h3><table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$\\log_a (M \\cdot N) &#x3D; \\log_a M + \\log_a N$</td>\n<td> &#x3D; </td>\n<td>$\\log_{10}(100 \\times 1000) &#x3D; 2 + 3 &#x3D; 5$</td>\n</tr>\n<tr>\n<td>$\\log_a \\left(\\frac{M}{N}\\right) &#x3D; \\log_a M - \\log_a N$</td>\n<td> &#x3D; </td>\n<td>$\\ln\\left(\\frac{e^5}{e^2}\\right) &#x3D; 5 - 2 &#x3D; 3$</td>\n</tr>\n</tbody></table>\n<h3 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h3><table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$\\log_a (M^k) &#x3D; k \\cdot \\log_a M$</td>\n<td> &#x3D; </td>\n<td>$\\log_2(8^3) &#x3D; 3 \\cdot \\log_2 8 &#x3D; 3 \\times 3 &#x3D; 9$</td>\n</tr>\n<tr>\n<td>$\\log_a (\\sqrt[n]{M}) &#x3D; \\frac{1}{n} \\cdot \\log_a M$</td>\n<td> &#x3D; </td>\n<td>$\\lg(\\sqrt{1024}) &#x3D; \\frac{1}{2} \\lg 1024 &#x3D; 5$</td>\n</tr>\n<tr>\n<td>$\\log_{a^n} M &#x3D; \\frac{1}{n} \\cdot \\log_a M$</td>\n<td></td>\n<td>$\\log_{100} 1000 &#x3D; \\frac{1}{2} \\log_{10} 1000 &#x3D; 1.5$</td>\n</tr>\n</tbody></table>\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>$$ \\boxed{\\log_a x &#x3D; \\frac{\\log_b x}{\\log_b a}} $$</p>\n<p><strong></strong></p>\n<h3 id=\"3-1--log-10-ln-log-2\"><a href=\"#3-1--log-10-ln-log-2\" class=\"headerlink\" title=\"3.1  ($\\log_{10}, \\ln, \\log_2$)\"></a>3.1  ($\\log_{10}, \\ln, \\log_2$)</h3><table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>$\\log_{10} \\to \\ln$</strong></td>\n<td>$\\ln x &#x3D; \\log_{10} x \\times \\ln 10$</td>\n<td>$\\times 2.302585$</td>\n<td>$\\ln 100 &#x3D; 2 \\times 2.3026 \\approx 4.605$</td>\n</tr>\n<tr>\n<td><strong>$\\ln \\to \\log_{10}$</strong></td>\n<td>$\\log_{10} x &#x3D; \\frac{\\ln x}{\\ln 10}$</td>\n<td>$\\div 2.302585$</td>\n<td>$\\log_{10} e &#x3D; 1 \\div 2.3026 \\approx 0.434$</td>\n</tr>\n<tr>\n<td><strong>$\\log_2 \\to \\ln$</strong></td>\n<td>$\\ln x &#x3D; \\log_2 x \\times \\ln 2$</td>\n<td>$\\times 0.693147$</td>\n<td>$\\ln 8 &#x3D; 3 \\times 0.6931 \\approx 2.079$</td>\n</tr>\n<tr>\n<td><strong>$\\ln \\to \\log_2$</strong></td>\n<td>$\\log_2 x &#x3D; \\frac{\\ln x}{\\ln 2}$</td>\n<td>$\\div 0.693147$</td>\n<td>$\\log_2 10 &#x3D; 2.3026 \\div 0.6931 \\approx 3.322$</td>\n</tr>\n<tr>\n<td><strong>$\\log_{10} \\to \\log_2$</strong></td>\n<td>$\\log_2 x &#x3D; \\frac{\\log_{10} x}{\\log_{10} 2}$</td>\n<td>$\\div 0.301030$</td>\n<td>$\\log_2 100 &#x3D; 2 \\div 0.3010 \\approx 6.644$</td>\n</tr>\n<tr>\n<td><strong>$\\log_2 \\to \\log_{10}$</strong></td>\n<td>$\\log_{10} x &#x3D; \\log_2 x \\times \\log_{10} 2$</td>\n<td>$\\times 0.301030$</td>\n<td>$\\log_{10} 8 &#x3D; 3 \\times 0.3010 \\approx 0.903$</td>\n</tr>\n</tbody></table>\n<h3 id=\"3-2-\"><a href=\"#3-2-\" class=\"headerlink\" title=\"3.2 \"></a>3.2 </h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># </span><br><span class=\"line\">ln(2)   0.69314718</span><br><span class=\"line\">ln(10)  2.30258509</span><br><span class=\"line\"></span><br><span class=\"line\"># </span><br><span class=\"line\">log(2)  0.30103000</span><br><span class=\"line\">log(e)  0.43429448</span><br><span class=\"line\"></span><br><span class=\"line\"># </span><br><span class=\"line\">log(10)  3.32192809</span><br><span class=\"line\">log(e)   1.44269504</span><br><span class=\"line\"></span><br><span class=\"line\"># </span><br><span class=\"line\">1/ln(2)       1.442695  (ln  log )</span><br><span class=\"line\">1/ln(10)      0.434294  (ln  log )</span><br><span class=\"line\">1/log(2)    3.321928  (log  log )</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"4-1-\"><a href=\"#4-1-\" class=\"headerlink\" title=\"4.1 \"></a>4.1 </h3><table>\n<thead>\n<tr>\n<th>$x$</th>\n<th>$\\log_{10} x$</th>\n<th>$\\ln x$</th>\n<th>$\\log_2 x$</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>2</td>\n<td>0.30103</td>\n<td>0.69315</td>\n<td>1</td>\n</tr>\n<tr>\n<td>$e$</td>\n<td>0.43429</td>\n<td>1</td>\n<td>1.44270</td>\n</tr>\n<tr>\n<td>10</td>\n<td>1</td>\n<td>2.30259</td>\n<td>3.32193</td>\n</tr>\n<tr>\n<td>100</td>\n<td>2</td>\n<td>4.60517</td>\n<td>6.64386</td>\n</tr>\n<tr>\n<td>1000</td>\n<td>3</td>\n<td>6.90776</td>\n<td>9.96578</td>\n</tr>\n</tbody></table>\n<h3 id=\"4-2-\"><a href=\"#4-2-\" class=\"headerlink\" title=\"4.2 \"></a>4.2 </h3><table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$\\lim_{x \\to 0^+} \\log_a x &#x3D; -\\infty$</td>\n<td>$a &gt; 1$</td>\n<td>$\\log_{10}(0.001) &#x3D; -3$</td>\n</tr>\n<tr>\n<td>$\\lim_{x \\to +\\infty} \\log_a x &#x3D; +\\infty$</td>\n<td>$a &gt; 1$</td>\n<td>$\\log_2(1024) &#x3D; 10$</td>\n</tr>\n<tr>\n<td>$\\log_a(1+x) \\approx \\frac{x}{\\ln a}$</td>\n<td>$x \\to 0$ ()</td>\n<td>$\\ln(1.01) \\approx 0.01$</td>\n</tr>\n</tbody></table>\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"5-1-\"><a href=\"#5-1-\" class=\"headerlink\" title=\"5.1 \"></a>5.1 </h3><table>\n<thead>\n<tr>\n<th> $f(x)$</th>\n<th> $f(x)$</th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$\\ln x$</td>\n<td>$\\frac{1}{x}$</td>\n<td>$\\frac{d}{dx} \\ln(5x) &#x3D; \\frac{1}{x}$</td>\n</tr>\n<tr>\n<td>$\\log_a x$</td>\n<td>$\\frac{1}{x \\ln a}$</td>\n<td>$\\frac{d}{dx} \\log_{10} x &#x3D; \\frac{1}{x \\ln 10}$</td>\n</tr>\n<tr>\n<td>$\\log_a f(x)$</td>\n<td>$\\frac{f(x)}{f(x) \\ln a}$</td>\n<td>$\\frac{d}{dx} \\ln(x^2+1) &#x3D; \\frac{2x}{x^2+1}$</td>\n</tr>\n</tbody></table>\n<h3 id=\"5-2-\"><a href=\"#5-2-\" class=\"headerlink\" title=\"5.2 \"></a>5.2 </h3><table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$\\int \\frac{1}{x} dx$</td>\n<td>$\\ln |x| + C$</td>\n<td>$\\int_1^e \\frac{1}{x} dx &#x3D; \\ln e - \\ln 1 &#x3D; 1$</td>\n</tr>\n<tr>\n<td>$\\int \\log_a x , dx$</td>\n<td>$\\frac{x \\ln x - x}{\\ln a} + C$</td>\n<td>-</td>\n</tr>\n<tr>\n<td>$\\int x^k \\ln x , dx$</td>\n<td>$\\frac{x^{k+1}}{k+1} \\ln x - \\frac{x^{k+1}}{(k+1)^2} + C$</td>\n<td>$k \\neq -1$</td>\n</tr>\n</tbody></table>\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\" 1\"></a> 1</h3><p><strong></strong> $\\log_2(100 \\times \\sqrt{10})$</p>\n<p><strong> 1</strong><br>$$<br>\\begin{aligned}<br>\\log_2(100 \\times \\sqrt{10}) &amp;&#x3D; \\log_2(100) + \\log_2(10^{0.5}) \\<br>&amp;&#x3D; \\log_2(100) + 0.5 \\times \\log_2(10) \\<br>&amp;\\approx 6.643856 + 0.5 \\times 3.321928 \\<br>&amp;\\approx 6.643856 + 1.660964 \\<br>&amp;\\approx 8.304820<br>\\end{aligned}<br>$$</p>\n<p><strong> 2 $\\ln$ </strong><br>$$<br>\\begin{aligned}<br>\\log_2(100 \\times \\sqrt{10}) &amp;&#x3D; \\frac{\\ln(100 \\times \\sqrt{10})}{\\ln 2} \\<br>&amp;&#x3D; \\frac{\\ln 100 + 0.5 \\ln 10}{\\ln 2} \\<br>&amp;&#x3D; \\frac{4.605170 + 0.5(2.302585)}{0.693147} \\<br>&amp;&#x3D; \\frac{5.756463}{0.693147} \\<br>&amp;\\approx 8.304820<br>\\end{aligned}<br>$$</p>\n<p><strong></strong>$2^{8.304820} \\approx 316.227$ $100 \\times \\sqrt{10} \\approx 316.227$</p>\n<hr>\n<h3 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\" 2\"></a> 2</h3><p><strong></strong> $O(\\log_2 n)$  10 </p>\n<p><strong></strong><br>$$ \\log_2 n &#x3D; \\frac{\\log_{10} n}{\\log_{10} 2} \\approx \\frac{\\log_{10} n}{0.301030} \\approx 3.321928 \\times \\log_{10} n $$</p>\n<p><strong></strong><br> O <br>$$ O(\\log_2 n) &#x3D; O(\\log_{10} n) &#x3D; O(\\ln n) $$</p>\n<p><strong></strong><br> $n &#x3D; 1,000,000$ </p>\n<ul>\n<li>$\\log_2 n \\approx 19.93$  20 </li>\n<li>$\\log_{10} n &#x3D; 6$</li>\n<li>$6 \\times 3.321928 \\approx 19.93$</li>\n</ul>\n<hr>\n<h3 id=\"-3-pH-\"><a href=\"#-3-pH-\" class=\"headerlink\" title=\" 3 pH \"></a> 3 pH </h3><p><strong></strong> pH  $\\text{pH} &#x3D; -\\log_{10}[H^+]$ $[H^+] &#x3D; 2.5 \\times 10^{-4} \\text{ mol&#x2F;L}$  pH </p>\n<p><strong></strong><br>$$<br>\\begin{aligned}<br>\\text{pH} &amp;&#x3D; -\\log_{10}(2.5 \\times 10^{-4}) \\<br>&amp;&#x3D; -(\\log_{10} 2.5 + \\log_{10} 10^{-4}) \\<br>&amp;&#x3D; -(0.397940 - 4) \\<br>&amp;&#x3D; -(-3.602060) \\<br>&amp;&#x3D; 3.602060<br>\\end{aligned}<br>$$</p>\n<p><strong></strong>$10^{-3.602060} \\approx 2.5 \\times 10^{-4}$</p>\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><table>\n<thead>\n<tr>\n<th> </th>\n<th> </th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>$\\log(a + b) &#x3D; \\log a + \\log b$</td>\n<td>$\\log(a \\times b) &#x3D; \\log a + \\log b$</td>\n<td></td>\n</tr>\n<tr>\n<td>$\\log(a &#x2F; b) &#x3D; \\log a &#x2F; \\log b$</td>\n<td>$\\log(a &#x2F; b) &#x3D; \\log a - \\log b$</td>\n<td></td>\n</tr>\n<tr>\n<td>$\\log(a^n) &#x3D; (\\log a)^n$</td>\n<td>$\\log(a^n) &#x3D; n \\times \\log a$</td>\n<td></td>\n</tr>\n<tr>\n<td>$\\log(-x) &#x3D; -\\log x$</td>\n<td>$\\log(-x)$ </td>\n<td> $&gt; 0$</td>\n</tr>\n<tr>\n<td> $\\log$ </td>\n<td> $\\ln, \\log_{10}, \\log_2$</td>\n<td></td>\n</tr>\n<tr>\n<td>$\\log_0 x$  $\\log_1 x$</td>\n<td> $&gt; 0$  $\\neq 1$</td>\n<td></td>\n</tr>\n</tbody></table>\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">##  </span></span><br><span class=\"line\">log<span class=\"emphasis\">_a(x) = log_</span>b(x)  log<span class=\"emphasis\">_b(a)</span></span><br><span class=\"line\"><span class=\"emphasis\"></span></span><br><span class=\"line\"><span class=\"emphasis\">##  </span></span><br><span class=\"line\"><span class=\"emphasis\">ln(2)  0.693147    | 1/ln(2)  1.442695</span></span><br><span class=\"line\"><span class=\"emphasis\">ln(10)  2.302585   | 1/ln(10)  0.434294</span></span><br><span class=\"line\"><span class=\"emphasis\">log(2)  0.301030 | 1/log(2)  3.321928</span></span><br><span class=\"line\"><span class=\"emphasis\"></span></span><br><span class=\"line\"><span class=\"emphasis\">##  </span></span><br><span class=\"line\"><span class=\"emphasis\">   log(MN) = log M + log N</span></span><br><span class=\"line\"><span class=\"emphasis\">   log(M/N) = log M - log N  </span></span><br><span class=\"line\"><span class=\"emphasis\">   log(M^k) = k  log M</span></span><br><span class=\"line\"><span class=\"emphasis\">   log(M) = (1/n)  log M</span></span><br><span class=\"line\"><span class=\"emphasis\"></span></span><br><span class=\"line\"><span class=\"emphasis\">##  </span></span><br><span class=\"line\"><span class=\"emphasis\">y = log_</span>a(x)  &lt;==&gt;  a^y = x</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p> <strong></strong>  </p>\n<ol>\n<li><strong></strong><code>Log</code>&#x2F;<code>Log10</code>&#x2F;<code>Log2</code>  </li>\n<li><strong></strong> $\\times 1.442695$  $\\div 0.693147$  </li>\n<li><strong></strong>$x \\le 0$ </li>\n</ol>\n</blockquote>\n"},{"title":" stackalloc ","date":"2026-01-24T05:33:17.000Z","_content":"\n### **2026-02-20 19:54:51**\n\n+ChatGpt\n\n---\n\n .NET stackalloc **** GC  Span\\<T\\>  API \n\n stackalloc  StackOverflowException  bug+\n\n## stackalloc \n\n### 1.  stackalloc\n\nstackalloc  .NET ******stack frame**\n\n\n- \n- \n- \n- GC  GC GC \n-  fixed  GC \n\n new T[]  GC \n\n### 2. \n\nstackalloc \n\n#### 2-1. Span<T> + stackalloc\n\n```csharp\nSpan<int> buffer = stackalloc int[] { 1, 2 };\n```\n\n-  int[2]  Span\\<T\\> \n-  unsafe \n-  .NET \n\n#### 2-2. /\n\n```csharp\nunsafe\n{\n    int* buffer = stackalloc int[] { 1, 2 };\n}\n```\n\n- int*\n- ****\n- \n\n>  .NET stackalloc  Span\\<T\\> \n\n## stackalloc \n\n### 1. \n\n```csharp\nSpan<byte> buffer = stackalloc byte[256];\n```\n\n\n-  newobj \n-  GC GC \n-  Gen 0 GC\n\nnew byte[256]\n\n### 2.  Span<T> \n\nSpan\\<T\\>  `ref struct`  stackalloc \n- Span\\<T\\>  async/await\n-  Span\\<T\\> \n-  Span\\<T\\> \n\n .NET  System.Text.JsonSocketPipelines  API \n\n## stackalloc \n\n### 1. \n\n stackalloc  StackOverflowException\n\n```csharp\nSpan<byte> buffer = stackalloc byte[1024 * 1024]; //  1MB \n```\n\n\n-  .NET  1MB~8MB\n-  stackalloc JIT ABI \n-  512KB  stackalloc \n\n### 2. \n\n stackalloc \n- OutOfMemoryException try-catch \n- StackOverflowException.NET ****\n\n stackalloc \n\n### 3. \n\nstackalloc \n\n```csharp\nSpan<int> GetStackAllocSpan()\n{\n    Span<int> buffer = stackalloc int[4];\n    return buffer; //   Span\n}\n```\n\n\n-  Span\\<T\\> \n-  lambda/ \n-  async/await \n\n\n\n## stackalloc + ArrayPool \n\n### 1. \n\n\n-   1KBstackalloc  GC \n-  > 1KB stackalloc\n-  new T[] GC \n\n**** stackalloc ArrayPool\\<T\\> \n\n### 2. \n\n```csharp\nvoid ProcessBuffer(int length)\n{\n    //  1024 \n    const int MAX_STACKALLOC_SIZE = 1024;\n\n    int[]? pooledArray = null;\n    // \n    Span<int> buffer = length <= MAX_STACKALLOC_SIZE \n        ? stackalloc int[length] \n        : (pooledArray = ArrayPool<int>.Shared.Rent(length)).AsSpan();\n\n    try\n    {\n        //  buffer\n        if (buffer.Length > 0)\n        {\n            buffer[0] = 42;\n            // ... \n        }\n    }\n    finally\n    {\n        // \n        if (pooledArray != null)\n        {\n            ArrayPool<int>.Shared.Return(pooledArray);\n        }\n    }\n}\n```\n\n### 3.  .NET \n\n .NET  BCL\n|  |        |                   |\n|------------|----------------|---------------------------|\n| 1KB | stackalloc  |  GC       |\n| 1KB~100KB | ArrayPool  |  GC  |\n| >100KB | new | / |\n\n ValueStringBuilderUtf8FormatterSystem.Text.Json \n\n## \n\n###  stackalloc\n\nstackalloc  .NET ****\n\n###  \n\n- \n- \n-  Span\\<T\\> \n\n###  \n\n-  1KB \n- \n- \n- \n\nstackalloc  .NET ","source":"_posts/perfer-stackalloc-usage.md","raw":"---\ntitle:  stackalloc \ndate: 2026-01-24 13:33:17\ntags:\n- C#\n- stackalloc\ncategories:\n- C#\n- stackalloc\n---\n\n### **2026-02-20 19:54:51**\n\n+ChatGpt\n\n---\n\n .NET stackalloc **** GC  Span\\<T\\>  API \n\n stackalloc  StackOverflowException  bug+\n\n## stackalloc \n\n### 1.  stackalloc\n\nstackalloc  .NET ******stack frame**\n\n\n- \n- \n- \n- GC  GC GC \n-  fixed  GC \n\n new T[]  GC \n\n### 2. \n\nstackalloc \n\n#### 2-1. Span<T> + stackalloc\n\n```csharp\nSpan<int> buffer = stackalloc int[] { 1, 2 };\n```\n\n-  int[2]  Span\\<T\\> \n-  unsafe \n-  .NET \n\n#### 2-2. /\n\n```csharp\nunsafe\n{\n    int* buffer = stackalloc int[] { 1, 2 };\n}\n```\n\n- int*\n- ****\n- \n\n>  .NET stackalloc  Span\\<T\\> \n\n## stackalloc \n\n### 1. \n\n```csharp\nSpan<byte> buffer = stackalloc byte[256];\n```\n\n\n-  newobj \n-  GC GC \n-  Gen 0 GC\n\nnew byte[256]\n\n### 2.  Span<T> \n\nSpan\\<T\\>  `ref struct`  stackalloc \n- Span\\<T\\>  async/await\n-  Span\\<T\\> \n-  Span\\<T\\> \n\n .NET  System.Text.JsonSocketPipelines  API \n\n## stackalloc \n\n### 1. \n\n stackalloc  StackOverflowException\n\n```csharp\nSpan<byte> buffer = stackalloc byte[1024 * 1024]; //  1MB \n```\n\n\n-  .NET  1MB~8MB\n-  stackalloc JIT ABI \n-  512KB  stackalloc \n\n### 2. \n\n stackalloc \n- OutOfMemoryException try-catch \n- StackOverflowException.NET ****\n\n stackalloc \n\n### 3. \n\nstackalloc \n\n```csharp\nSpan<int> GetStackAllocSpan()\n{\n    Span<int> buffer = stackalloc int[4];\n    return buffer; //   Span\n}\n```\n\n\n-  Span\\<T\\> \n-  lambda/ \n-  async/await \n\n\n\n## stackalloc + ArrayPool \n\n### 1. \n\n\n-   1KBstackalloc  GC \n-  > 1KB stackalloc\n-  new T[] GC \n\n**** stackalloc ArrayPool\\<T\\> \n\n### 2. \n\n```csharp\nvoid ProcessBuffer(int length)\n{\n    //  1024 \n    const int MAX_STACKALLOC_SIZE = 1024;\n\n    int[]? pooledArray = null;\n    // \n    Span<int> buffer = length <= MAX_STACKALLOC_SIZE \n        ? stackalloc int[length] \n        : (pooledArray = ArrayPool<int>.Shared.Rent(length)).AsSpan();\n\n    try\n    {\n        //  buffer\n        if (buffer.Length > 0)\n        {\n            buffer[0] = 42;\n            // ... \n        }\n    }\n    finally\n    {\n        // \n        if (pooledArray != null)\n        {\n            ArrayPool<int>.Shared.Return(pooledArray);\n        }\n    }\n}\n```\n\n### 3.  .NET \n\n .NET  BCL\n|  |        |                   |\n|------------|----------------|---------------------------|\n| 1KB | stackalloc  |  GC       |\n| 1KB~100KB | ArrayPool  |  GC  |\n| >100KB | new | / |\n\n ValueStringBuilderUtf8FormatterSystem.Text.Json \n\n## \n\n###  stackalloc\n\nstackalloc  .NET ****\n\n###  \n\n- \n- \n-  Span\\<T\\> \n\n###  \n\n-  1KB \n- \n- \n- \n\nstackalloc  .NET ","slug":"perfer-stackalloc-usage","published":1,"updated":"2026-02-20T11:55:02.368Z","comments":1,"layout":"post","photos":[],"_id":"cmm3ar6w6000d6gu8eujs56lz","content":"<h3 id=\"2026-02-20-19-54-51\"><a href=\"#2026-02-20-19-54-51\" class=\"headerlink\" title=\"2026-02-20 19:54:51\"></a><strong>2026-02-20 19:54:51</strong></h3><p>+ChatGpt</p>\n<hr>\n<p> .NET stackalloc <strong></strong> GC  Span&lt;T&gt;  API </p>\n<p> stackalloc  StackOverflowException  bug+</p>\n<h2 id=\"stackalloc-\"><a href=\"#stackalloc-\" class=\"headerlink\" title=\"stackalloc \"></a>stackalloc </h2><h3 id=\"1--stackalloc\"><a href=\"#1--stackalloc\" class=\"headerlink\" title=\"1.  stackalloc\"></a>1.  stackalloc</h3><p>stackalloc  .NET <strong></strong><strong>stack frame</strong></p>\n<p></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li>GC  GC GC </li>\n<li> fixed  GC </li>\n</ul>\n<p> new T[]  GC </p>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><p>stackalloc </p>\n<h4 id=\"2-1-Span-stackalloc\"><a href=\"#2-1-Span-stackalloc\" class=\"headerlink\" title=\"2-1. Span + stackalloc\"></a>2-1. Span<T> + stackalloc</h4><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; buffer = <span class=\"keyword\">stackalloc</span> <span class=\"built_in\">int</span>[] &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span> &#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li> int[2]  Span&lt;T&gt; </li>\n<li> unsafe </li>\n<li> .NET </li>\n</ul>\n<h4 id=\"2-2--\"><a href=\"#2-2--\" class=\"headerlink\" title=\"2-2. &#x2F;\"></a>2-2. &#x2F;</h4><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">unsafe</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"built_in\">int</span>* buffer = <span class=\"keyword\">stackalloc</span> <span class=\"built_in\">int</span>[] &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span> &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>int*</li>\n<li><strong></strong></li>\n<li></li>\n</ul>\n<blockquote>\n<p> .NET stackalloc  Span&lt;T&gt; </p>\n</blockquote>\n<h2 id=\"stackalloc-\"><a href=\"#stackalloc-\" class=\"headerlink\" title=\"stackalloc \"></a>stackalloc </h2><h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Span&lt;<span class=\"built_in\">byte</span>&gt; buffer = <span class=\"keyword\">stackalloc</span> <span class=\"built_in\">byte</span>[<span class=\"number\">256</span>];</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<ul>\n<li> newobj </li>\n<li> GC GC </li>\n<li> Gen 0 GC</li>\n</ul>\n<p>new byte[256]</p>\n<h3 id=\"2--Span-\"><a href=\"#2--Span-\" class=\"headerlink\" title=\"2.  Span \"></a>2.  Span<T> </h3><p>Span&lt;T&gt;  <code>ref struct</code>  stackalloc </p>\n<ul>\n<li>Span&lt;T&gt;  async&#x2F;await</li>\n<li> Span&lt;T&gt; </li>\n<li> Span&lt;T&gt; </li>\n</ul>\n<p> .NET  System.Text.JsonSocketPipelines  API </p>\n<h2 id=\"stackalloc-\"><a href=\"#stackalloc-\" class=\"headerlink\" title=\"stackalloc \"></a>stackalloc </h2><h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p> stackalloc  StackOverflowException</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Span&lt;<span class=\"built_in\">byte</span>&gt; buffer = <span class=\"keyword\">stackalloc</span> <span class=\"built_in\">byte</span>[<span class=\"number\">1024</span> * <span class=\"number\">1024</span>]; <span class=\"comment\">//  1MB </span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<ul>\n<li> .NET  1MB~8MB</li>\n<li> stackalloc JIT ABI </li>\n<li> 512KB  stackalloc </li>\n</ul>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><p> stackalloc </p>\n<ul>\n<li>OutOfMemoryException try-catch </li>\n<li>StackOverflowException.NET <strong></strong></li>\n</ul>\n<p> stackalloc </p>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h3><p>stackalloc </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Span&lt;<span class=\"built_in\">int</span>&gt; <span class=\"title\">GetStackAllocSpan</span>()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    Span&lt;<span class=\"built_in\">int</span>&gt; buffer = <span class=\"keyword\">stackalloc</span> <span class=\"built_in\">int</span>[<span class=\"number\">4</span>];</span><br><span class=\"line\">    <span class=\"keyword\">return</span> buffer; <span class=\"comment\">//   Span</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<ul>\n<li> Span&lt;T&gt; </li>\n<li> lambda&#x2F; </li>\n<li> async&#x2F;await </li>\n</ul>\n<p></p>\n<h2 id=\"stackalloc-ArrayPool-\"><a href=\"#stackalloc-ArrayPool-\" class=\"headerlink\" title=\"stackalloc + ArrayPool \"></a>stackalloc + ArrayPool </h2><h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p></p>\n<ul>\n<li>  1KBstackalloc  GC </li>\n<li> &gt; 1KB stackalloc</li>\n<li> new T[] GC </li>\n</ul>\n<p><strong></strong> stackalloc ArrayPool&lt;T&gt; </p>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">ProcessBuffer</span>(<span class=\"params\"><span class=\"built_in\">int</span> length</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">//  1024 </span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"built_in\">int</span> MAX_STACKALLOC_SIZE = <span class=\"number\">1024</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">int</span>[]? pooledArray = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    Span&lt;<span class=\"built_in\">int</span>&gt; buffer = length &lt;= MAX_STACKALLOC_SIZE </span><br><span class=\"line\">        ? <span class=\"keyword\">stackalloc</span> <span class=\"built_in\">int</span>[length] </span><br><span class=\"line\">        : (pooledArray = ArrayPool&lt;<span class=\"built_in\">int</span>&gt;.Shared.Rent(length)).AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">try</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//  buffer</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (buffer.Length &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            buffer[<span class=\"number\">0</span>] = <span class=\"number\">42</span>;</span><br><span class=\"line\">            <span class=\"comment\">// ... </span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">finally</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pooledArray != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            ArrayPool&lt;<span class=\"built_in\">int</span>&gt;.Shared.Return(pooledArray);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3--NET-\"><a href=\"#3--NET-\" class=\"headerlink\" title=\"3.  .NET \"></a>3.  .NET </h3><p> .NET  BCL</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1KB</td>\n<td>stackalloc </td>\n<td> GC </td>\n</tr>\n<tr>\n<td>1KB~100KB</td>\n<td>ArrayPool </td>\n<td> GC</td>\n</tr>\n<tr>\n<td>&gt;100KB</td>\n<td>new</td>\n<td>&#x2F;</td>\n</tr>\n</tbody></table>\n<p> ValueStringBuilderUtf8FormatterSystem.Text.Json </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"-stackalloc\"><a href=\"#-stackalloc\" class=\"headerlink\" title=\" stackalloc\"></a> stackalloc</h3><p>stackalloc  .NET <strong></strong></p>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h3><ul>\n<li></li>\n<li></li>\n<li> Span&lt;T&gt; </li>\n</ul>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h3><ul>\n<li> 1KB </li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p>stackalloc  .NET </p>\n","excerpt":"","more":"<h3 id=\"2026-02-20-19-54-51\"><a href=\"#2026-02-20-19-54-51\" class=\"headerlink\" title=\"2026-02-20 19:54:51\"></a><strong>2026-02-20 19:54:51</strong></h3><p>+ChatGpt</p>\n<hr>\n<p> .NET stackalloc <strong></strong> GC  Span&lt;T&gt;  API </p>\n<p> stackalloc  StackOverflowException  bug+</p>\n<h2 id=\"stackalloc-\"><a href=\"#stackalloc-\" class=\"headerlink\" title=\"stackalloc \"></a>stackalloc </h2><h3 id=\"1--stackalloc\"><a href=\"#1--stackalloc\" class=\"headerlink\" title=\"1.  stackalloc\"></a>1.  stackalloc</h3><p>stackalloc  .NET <strong></strong><strong>stack frame</strong></p>\n<p></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li>GC  GC GC </li>\n<li> fixed  GC </li>\n</ul>\n<p> new T[]  GC </p>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><p>stackalloc </p>\n<h4 id=\"2-1-Span-stackalloc\"><a href=\"#2-1-Span-stackalloc\" class=\"headerlink\" title=\"2-1. Span + stackalloc\"></a>2-1. Span<T> + stackalloc</h4><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; buffer = <span class=\"keyword\">stackalloc</span> <span class=\"built_in\">int</span>[] &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span> &#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li> int[2]  Span&lt;T&gt; </li>\n<li> unsafe </li>\n<li> .NET </li>\n</ul>\n<h4 id=\"2-2--\"><a href=\"#2-2--\" class=\"headerlink\" title=\"2-2. &#x2F;\"></a>2-2. &#x2F;</h4><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">unsafe</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"built_in\">int</span>* buffer = <span class=\"keyword\">stackalloc</span> <span class=\"built_in\">int</span>[] &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span> &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>int*</li>\n<li><strong></strong></li>\n<li></li>\n</ul>\n<blockquote>\n<p> .NET stackalloc  Span&lt;T&gt; </p>\n</blockquote>\n<h2 id=\"stackalloc-\"><a href=\"#stackalloc-\" class=\"headerlink\" title=\"stackalloc \"></a>stackalloc </h2><h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Span&lt;<span class=\"built_in\">byte</span>&gt; buffer = <span class=\"keyword\">stackalloc</span> <span class=\"built_in\">byte</span>[<span class=\"number\">256</span>];</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<ul>\n<li> newobj </li>\n<li> GC GC </li>\n<li> Gen 0 GC</li>\n</ul>\n<p>new byte[256]</p>\n<h3 id=\"2--Span-\"><a href=\"#2--Span-\" class=\"headerlink\" title=\"2.  Span \"></a>2.  Span<T> </h3><p>Span&lt;T&gt;  <code>ref struct</code>  stackalloc </p>\n<ul>\n<li>Span&lt;T&gt;  async&#x2F;await</li>\n<li> Span&lt;T&gt; </li>\n<li> Span&lt;T&gt; </li>\n</ul>\n<p> .NET  System.Text.JsonSocketPipelines  API </p>\n<h2 id=\"stackalloc-\"><a href=\"#stackalloc-\" class=\"headerlink\" title=\"stackalloc \"></a>stackalloc </h2><h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p> stackalloc  StackOverflowException</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Span&lt;<span class=\"built_in\">byte</span>&gt; buffer = <span class=\"keyword\">stackalloc</span> <span class=\"built_in\">byte</span>[<span class=\"number\">1024</span> * <span class=\"number\">1024</span>]; <span class=\"comment\">//  1MB </span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<ul>\n<li> .NET  1MB~8MB</li>\n<li> stackalloc JIT ABI </li>\n<li> 512KB  stackalloc </li>\n</ul>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><p> stackalloc </p>\n<ul>\n<li>OutOfMemoryException try-catch </li>\n<li>StackOverflowException.NET <strong></strong></li>\n</ul>\n<p> stackalloc </p>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h3><p>stackalloc </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Span&lt;<span class=\"built_in\">int</span>&gt; <span class=\"title\">GetStackAllocSpan</span>()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    Span&lt;<span class=\"built_in\">int</span>&gt; buffer = <span class=\"keyword\">stackalloc</span> <span class=\"built_in\">int</span>[<span class=\"number\">4</span>];</span><br><span class=\"line\">    <span class=\"keyword\">return</span> buffer; <span class=\"comment\">//   Span</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<ul>\n<li> Span&lt;T&gt; </li>\n<li> lambda&#x2F; </li>\n<li> async&#x2F;await </li>\n</ul>\n<p></p>\n<h2 id=\"stackalloc-ArrayPool-\"><a href=\"#stackalloc-ArrayPool-\" class=\"headerlink\" title=\"stackalloc + ArrayPool \"></a>stackalloc + ArrayPool </h2><h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p></p>\n<ul>\n<li>  1KBstackalloc  GC </li>\n<li> &gt; 1KB stackalloc</li>\n<li> new T[] GC </li>\n</ul>\n<p><strong></strong> stackalloc ArrayPool&lt;T&gt; </p>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">ProcessBuffer</span>(<span class=\"params\"><span class=\"built_in\">int</span> length</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">//  1024 </span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"built_in\">int</span> MAX_STACKALLOC_SIZE = <span class=\"number\">1024</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">int</span>[]? pooledArray = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    Span&lt;<span class=\"built_in\">int</span>&gt; buffer = length &lt;= MAX_STACKALLOC_SIZE </span><br><span class=\"line\">        ? <span class=\"keyword\">stackalloc</span> <span class=\"built_in\">int</span>[length] </span><br><span class=\"line\">        : (pooledArray = ArrayPool&lt;<span class=\"built_in\">int</span>&gt;.Shared.Rent(length)).AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">try</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//  buffer</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (buffer.Length &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            buffer[<span class=\"number\">0</span>] = <span class=\"number\">42</span>;</span><br><span class=\"line\">            <span class=\"comment\">// ... </span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">finally</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pooledArray != <span class=\"literal\">null</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            ArrayPool&lt;<span class=\"built_in\">int</span>&gt;.Shared.Return(pooledArray);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3--NET-\"><a href=\"#3--NET-\" class=\"headerlink\" title=\"3.  .NET \"></a>3.  .NET </h3><p> .NET  BCL</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1KB</td>\n<td>stackalloc </td>\n<td> GC </td>\n</tr>\n<tr>\n<td>1KB~100KB</td>\n<td>ArrayPool </td>\n<td> GC</td>\n</tr>\n<tr>\n<td>&gt;100KB</td>\n<td>new</td>\n<td>&#x2F;</td>\n</tr>\n</tbody></table>\n<p> ValueStringBuilderUtf8FormatterSystem.Text.Json </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"-stackalloc\"><a href=\"#-stackalloc\" class=\"headerlink\" title=\" stackalloc\"></a> stackalloc</h3><p>stackalloc  .NET <strong></strong></p>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h3><ul>\n<li></li>\n<li></li>\n<li> Span&lt;T&gt; </li>\n</ul>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h3><ul>\n<li> 1KB </li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p>stackalloc  .NET </p>\n"},{"title":"Span<T>","date":"2026-01-19T02:19:09.000Z","_content":"\n### **2026-01-19 10:30:49**\n\n\n\n---\n\n<!-- \n ReadOnlySpan<T>  Span<T>  Span<T>  ReadOnlySpan<T>  ReadOnlySpan<T> \n -->\n\n C# Span\\<T\\>  ReadOnlySpan\\<T\\>  ReadOnlySpan\\<T\\> **** ReadOnlySpan\\<T\\>  Span\\<T\\> \n\n## Span\\<T\\>  ReadOnlySpan\\<T\\> \n\nSpan\\<T\\>  ReadOnlySpan\\<T\\> ****\n\n|                 | ReadOnlySpan\\<T\\>                | Span\\<T\\>                        |\n|---------------------|--------------------------------|--------------------------------|\n|         |        |    |\n| /       | Span\\<T\\>  ReadOnlySpan\\<T\\> | ReadOnlySpan\\<T\\>  Span\\<T\\> |\n|         |  |  |\n| /       |                | Fill |\n\n  \nSpan\\<T\\>  .NET Core 2.1+/.NET 5+ **** GC \n\n>  ReadOnlySpan\\<T\\> Span\\<T\\>  Memory\\<T\\>\n\n## Span\\<T\\> ReadOnlySpan\\<T\\> \n\nSpan\\<T\\> ****/\n\n### 1. \n\nReadOnlySpan\\<T\\>  Span\\<T\\> \n\n```csharp\nint[] nums = { 1, 2, 3, 4, 5 };\n// ReadOnlySpan<T> \nReadOnlySpan<int> readOnlySpan = nums.AsSpan();\n// readOnlySpan[0] = 100; // \n\n// Span<T> \nSpan<int> writableSpan = nums.AsSpan();\nwritableSpan[0] = 100; // \nConsole.WriteLine(string.Join(\",\", nums)); // 100,2,3,4,5\n```\n\n### 2. \n\nSpan\\<T\\>  ReadOnlySpan\\<T\\> \n\n|                 |                                                                  |\n|---------------------|----------------------------------------------------------------------|\n| Fill(T)             |  Span\\<T\\>                                      |\n| Clear()             |  Span\\<T\\>  int  0string  null |\n| CopyTo(Span\\<T\\>)     |  ReadOnlySpan\\<T\\>  Span\\<T\\> |\n\n#### 1Fill \n\n```csharp\n//  byte \nbyte[] buffer = new byte[5];\nSpan<byte> bufferSpan = buffer.AsSpan();\n\n//  0xFF\nbufferSpan.Fill(0xFF);\n\n// 255,255,255,255,255\nConsole.WriteLine(string.Join(\",\", buffer));\n```\n\n#### 2Clear \n\n```csharp\nstring[] strs = { \"a\", \"b\", \"c\", \"d\" };\nSpan<string> strSpan = strs.AsSpan();\n\n//  Span  null\nstrSpan.Clear();\n\n// , , ,  null\nConsole.WriteLine(string.Join(\",\", strs));\n```\n\n### 3.  ReadOnlySpan\\<T\\>\n\nSpan\\<T\\>  ReadOnlySpan\\<T\\> Span\\<T\\> \n\n```csharp\nint[] arr = { 10, 20, 30 };\nSpan<int> span = arr.AsSpan();\n\n//  ReadOnlySpan<T>\nReadOnlySpan<int> readOnlySpan = span;\n\n// \nConsole.WriteLine(readOnlySpan[1]); // 20\n\n// ReadOnlySpan<T> \n// readOnlySpan[1] = 200; // \n```\n\n## / Span\\<T\\>\n\n ReadOnlySpan\\<T\\> Span\\<T\\>  MemoryExtensions.AsSpan  .NET  System.Memory NuGet \n\n```bash\n#  .NET \nInstall-Package System.Memory\n#  .NET CLI\ndotnet add package System.Memory\n```\n\n### 1.  Span\\<T\\>\n\n Span\\<T\\> Span\\<T\\> \n\n```csharp\n// \nchar[] chars = { 'H', 'e', 'l', 'l', 'o' };\n//  Span<char>\nSpan<char> charSpan = chars.AsSpan();\n\n//  Span \ncharSpan[4] = 'O'; //  'l'  'O'\n\nConsole.WriteLine(string.Join(\"\", chars)); // HellO\n```\n\n### 2.  Span<char>\n\n**** Span<char>  System.AccessViolationException\n\n```csharp\nstring str = \"Hello\";\n//  Span<char>\nSpan<char> strSpan = str.AsSpan();\n\n// \n// strSpan[0] = 'h'; \n```\n\n>  char  Span\\<T\\>\n> ```csharp\n> string str = \"Hello\";\n> char[] charArr = str.ToCharArray(); // \n> Span<char> charSpan = charArr.AsSpan();\n> charSpan[0] = 'h';\n> Console.WriteLine(string.Join(\"\", charArr)); // hello\n> ```\n\n### 3. List\\<T\\>  Span\\<T\\>\n\n ReadOnlySpan\\<T\\> List\\<T\\>  CollectionsMarshal.AsSpan.NET 5+ Span\\<T\\>\n\n```csharp\nList<int> numList = new List<int> { 1, 2, 3 };\n// .NET 5+ \nSpan<int> listSpan = CollectionsMarshal.AsSpan(numList);\n\n//  Span  List\nlistSpan[1] = 200;\nConsole.WriteLine(numList[1]); // 200\n```\n\n## Span\\<T\\>  ReadOnlySpan\\<T\\> + \n\n### 1.  + \n\nSpan\\<T\\>  ReadOnlySpan\\<T\\>  GC  ReadOnlySpan\\<T\\> \n\n```csharp\n// \nint[] source = { 1, 2, 3, 4, 5 };\nint[] subCopy = new int[3];\nArray.Copy(source, 1, subCopy, 0, 3); // \nsubCopy[0] = 200; // \nConsole.WriteLine(source[1]); // 2\n\n// Span<T> \nSpan<int> sourceSpan = source.AsSpan();\nSpan<int> subSpan = sourceSpan.Slice(1, 3); // \nsubSpan[0] = 200; // \nConsole.WriteLine(source[1]); // 200\n```\n\n### 2. \n\n/ string.SubstringArray.Copy Span\\<T\\> \n\n```csharp\n// 10 0x01\nbyte[] data = new byte[1000];\n\n// \nfor (int i = 0; i < 10; i++)\n{\n    data[i] = 0x01;\n}\n\n// Span<T> Slice + Fill \ndata.AsSpan(0, 10).Fill(0x01); // 10\n```\n\n### 3. \n\nSpan\\<T\\> / Slice  ArgumentOutOfRangeException\n\n```csharp\nint[] nums = { 1, 2, 3 };\nSpan<int> span = nums.AsSpan();\n\n// \n// Console.WriteLine(span[3]); // \n\n//  Slice\n// span.Slice(1, 3); // \n```\n\n## Span\\<T\\>  ReadOnlySpan\\<T\\> \n\n ReadOnlySpan\\<T\\>  CopyTo/TryCopyTo/Slice  Span\\<T\\> \n\n### 1. Fill\n\n\n\n```csharp\n//  1024  0\nbyte[] buffer = new byte[1024];\nSpan<byte> bufferSpan = buffer.AsSpan();\n\n// \nbufferSpan.Fill(0);\n\n// 10 0\nConsole.WriteLine(string.Join(\",\", bufferSpan.Slice(0, 10))); // 0,0,0,0,0,0,0,0,0,0\n```\n\n### 2. \n\n\n\n```csharp\n// \nint[] scores = { 80, 85, 90, 95 };\nSpan<int> scoreSpan = scores.AsSpan();\n\n//  99\nscoreSpan[1] = 99;\n\n// 80,99,90,95\nConsole.WriteLine(string.Join(\",\", scores));\n```\n\n### 3. Clear\n\n\n\n```csharp\n// \nchar[] password = { '1', '2', '3', '4', '5' };\nSpan<char> pwdSpan = password.AsSpan();\n\n//  '\\0'\npwdSpan.Clear();\n\n// ,,,,\nConsole.WriteLine(string.Join(\"\", password));\n```\n\n## Span\\<T\\>  & \n\n### \n\n1. ****/\n2. **** GC \n3. ****\n\n### \n\n1.  Memory\\<T\\>\n2.  Span<char>  char \n3. Span\\<T\\>  Span\\<T\\> \n\n## \n\n1. Span\\<T\\>  ReadOnlySpan\\<T\\>  ReadOnlySpan\\<T\\>\n2. Fill/Clear \n3.  GC \n4. \n\nSpan\\<T\\>  ReadOnlySpan\\<T\\>  C#  .NET \n\n## \n[Span\\<T\\>  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/api/system.span-1?view=net-8.0)\n[Memory\\<T\\>  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/api/system.memory-1?view=net-8.0)\n[CollectionsMarshal  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/api/system.runtime.interopservices.collectionsmarshal?view=net-9.0)\n[System.Memory - NuGet Gallery](https://www.nuget.org/packages/System.Memory)","source":"_posts/span-usage.md","raw":"---\ntitle: Span<T>\ndate: 2026-01-19 10:19:09\ntags:\n- C#\n- Span<T>\ncategories:\n- C#\n---\n\n### **2026-01-19 10:30:49**\n\n\n\n---\n\n<!-- \n ReadOnlySpan<T>  Span<T>  Span<T>  ReadOnlySpan<T>  ReadOnlySpan<T> \n -->\n\n C# Span\\<T\\>  ReadOnlySpan\\<T\\>  ReadOnlySpan\\<T\\> **** ReadOnlySpan\\<T\\>  Span\\<T\\> \n\n## Span\\<T\\>  ReadOnlySpan\\<T\\> \n\nSpan\\<T\\>  ReadOnlySpan\\<T\\> ****\n\n|                 | ReadOnlySpan\\<T\\>                | Span\\<T\\>                        |\n|---------------------|--------------------------------|--------------------------------|\n|         |        |    |\n| /       | Span\\<T\\>  ReadOnlySpan\\<T\\> | ReadOnlySpan\\<T\\>  Span\\<T\\> |\n|         |  |  |\n| /       |                | Fill |\n\n  \nSpan\\<T\\>  .NET Core 2.1+/.NET 5+ **** GC \n\n>  ReadOnlySpan\\<T\\> Span\\<T\\>  Memory\\<T\\>\n\n## Span\\<T\\> ReadOnlySpan\\<T\\> \n\nSpan\\<T\\> ****/\n\n### 1. \n\nReadOnlySpan\\<T\\>  Span\\<T\\> \n\n```csharp\nint[] nums = { 1, 2, 3, 4, 5 };\n// ReadOnlySpan<T> \nReadOnlySpan<int> readOnlySpan = nums.AsSpan();\n// readOnlySpan[0] = 100; // \n\n// Span<T> \nSpan<int> writableSpan = nums.AsSpan();\nwritableSpan[0] = 100; // \nConsole.WriteLine(string.Join(\",\", nums)); // 100,2,3,4,5\n```\n\n### 2. \n\nSpan\\<T\\>  ReadOnlySpan\\<T\\> \n\n|                 |                                                                  |\n|---------------------|----------------------------------------------------------------------|\n| Fill(T)             |  Span\\<T\\>                                      |\n| Clear()             |  Span\\<T\\>  int  0string  null |\n| CopyTo(Span\\<T\\>)     |  ReadOnlySpan\\<T\\>  Span\\<T\\> |\n\n#### 1Fill \n\n```csharp\n//  byte \nbyte[] buffer = new byte[5];\nSpan<byte> bufferSpan = buffer.AsSpan();\n\n//  0xFF\nbufferSpan.Fill(0xFF);\n\n// 255,255,255,255,255\nConsole.WriteLine(string.Join(\",\", buffer));\n```\n\n#### 2Clear \n\n```csharp\nstring[] strs = { \"a\", \"b\", \"c\", \"d\" };\nSpan<string> strSpan = strs.AsSpan();\n\n//  Span  null\nstrSpan.Clear();\n\n// , , ,  null\nConsole.WriteLine(string.Join(\",\", strs));\n```\n\n### 3.  ReadOnlySpan\\<T\\>\n\nSpan\\<T\\>  ReadOnlySpan\\<T\\> Span\\<T\\> \n\n```csharp\nint[] arr = { 10, 20, 30 };\nSpan<int> span = arr.AsSpan();\n\n//  ReadOnlySpan<T>\nReadOnlySpan<int> readOnlySpan = span;\n\n// \nConsole.WriteLine(readOnlySpan[1]); // 20\n\n// ReadOnlySpan<T> \n// readOnlySpan[1] = 200; // \n```\n\n## / Span\\<T\\>\n\n ReadOnlySpan\\<T\\> Span\\<T\\>  MemoryExtensions.AsSpan  .NET  System.Memory NuGet \n\n```bash\n#  .NET \nInstall-Package System.Memory\n#  .NET CLI\ndotnet add package System.Memory\n```\n\n### 1.  Span\\<T\\>\n\n Span\\<T\\> Span\\<T\\> \n\n```csharp\n// \nchar[] chars = { 'H', 'e', 'l', 'l', 'o' };\n//  Span<char>\nSpan<char> charSpan = chars.AsSpan();\n\n//  Span \ncharSpan[4] = 'O'; //  'l'  'O'\n\nConsole.WriteLine(string.Join(\"\", chars)); // HellO\n```\n\n### 2.  Span<char>\n\n**** Span<char>  System.AccessViolationException\n\n```csharp\nstring str = \"Hello\";\n//  Span<char>\nSpan<char> strSpan = str.AsSpan();\n\n// \n// strSpan[0] = 'h'; \n```\n\n>  char  Span\\<T\\>\n> ```csharp\n> string str = \"Hello\";\n> char[] charArr = str.ToCharArray(); // \n> Span<char> charSpan = charArr.AsSpan();\n> charSpan[0] = 'h';\n> Console.WriteLine(string.Join(\"\", charArr)); // hello\n> ```\n\n### 3. List\\<T\\>  Span\\<T\\>\n\n ReadOnlySpan\\<T\\> List\\<T\\>  CollectionsMarshal.AsSpan.NET 5+ Span\\<T\\>\n\n```csharp\nList<int> numList = new List<int> { 1, 2, 3 };\n// .NET 5+ \nSpan<int> listSpan = CollectionsMarshal.AsSpan(numList);\n\n//  Span  List\nlistSpan[1] = 200;\nConsole.WriteLine(numList[1]); // 200\n```\n\n## Span\\<T\\>  ReadOnlySpan\\<T\\> + \n\n### 1.  + \n\nSpan\\<T\\>  ReadOnlySpan\\<T\\>  GC  ReadOnlySpan\\<T\\> \n\n```csharp\n// \nint[] source = { 1, 2, 3, 4, 5 };\nint[] subCopy = new int[3];\nArray.Copy(source, 1, subCopy, 0, 3); // \nsubCopy[0] = 200; // \nConsole.WriteLine(source[1]); // 2\n\n// Span<T> \nSpan<int> sourceSpan = source.AsSpan();\nSpan<int> subSpan = sourceSpan.Slice(1, 3); // \nsubSpan[0] = 200; // \nConsole.WriteLine(source[1]); // 200\n```\n\n### 2. \n\n/ string.SubstringArray.Copy Span\\<T\\> \n\n```csharp\n// 10 0x01\nbyte[] data = new byte[1000];\n\n// \nfor (int i = 0; i < 10; i++)\n{\n    data[i] = 0x01;\n}\n\n// Span<T> Slice + Fill \ndata.AsSpan(0, 10).Fill(0x01); // 10\n```\n\n### 3. \n\nSpan\\<T\\> / Slice  ArgumentOutOfRangeException\n\n```csharp\nint[] nums = { 1, 2, 3 };\nSpan<int> span = nums.AsSpan();\n\n// \n// Console.WriteLine(span[3]); // \n\n//  Slice\n// span.Slice(1, 3); // \n```\n\n## Span\\<T\\>  ReadOnlySpan\\<T\\> \n\n ReadOnlySpan\\<T\\>  CopyTo/TryCopyTo/Slice  Span\\<T\\> \n\n### 1. Fill\n\n\n\n```csharp\n//  1024  0\nbyte[] buffer = new byte[1024];\nSpan<byte> bufferSpan = buffer.AsSpan();\n\n// \nbufferSpan.Fill(0);\n\n// 10 0\nConsole.WriteLine(string.Join(\",\", bufferSpan.Slice(0, 10))); // 0,0,0,0,0,0,0,0,0,0\n```\n\n### 2. \n\n\n\n```csharp\n// \nint[] scores = { 80, 85, 90, 95 };\nSpan<int> scoreSpan = scores.AsSpan();\n\n//  99\nscoreSpan[1] = 99;\n\n// 80,99,90,95\nConsole.WriteLine(string.Join(\",\", scores));\n```\n\n### 3. Clear\n\n\n\n```csharp\n// \nchar[] password = { '1', '2', '3', '4', '5' };\nSpan<char> pwdSpan = password.AsSpan();\n\n//  '\\0'\npwdSpan.Clear();\n\n// ,,,,\nConsole.WriteLine(string.Join(\"\", password));\n```\n\n## Span\\<T\\>  & \n\n### \n\n1. ****/\n2. **** GC \n3. ****\n\n### \n\n1.  Memory\\<T\\>\n2.  Span<char>  char \n3. Span\\<T\\>  Span\\<T\\> \n\n## \n\n1. Span\\<T\\>  ReadOnlySpan\\<T\\>  ReadOnlySpan\\<T\\>\n2. Fill/Clear \n3.  GC \n4. \n\nSpan\\<T\\>  ReadOnlySpan\\<T\\>  C#  .NET \n\n## \n[Span\\<T\\>  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/api/system.span-1?view=net-8.0)\n[Memory\\<T\\>  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/api/system.memory-1?view=net-8.0)\n[CollectionsMarshal  - Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/api/system.runtime.interopservices.collectionsmarshal?view=net-9.0)\n[System.Memory - NuGet Gallery](https://www.nuget.org/packages/System.Memory)","slug":"span-usage","published":1,"updated":"2026-01-19T02:31:02.552Z","comments":1,"layout":"post","photos":[],"_id":"cmm3ar6wn001i6gu83alyawy4","content":"<h3 id=\"2026-01-19-10-30-49\"><a href=\"#2026-01-19-10-30-49\" class=\"headerlink\" title=\"2026-01-19 10:30:49\"></a><strong>2026-01-19 10:30:49</strong></h3><p></p>\n<hr>\n<!-- \n ReadOnlySpan<T>  Span<T>  Span<T>  ReadOnlySpan<T>  ReadOnlySpan<T> \n -->\n\n<p> C# Span&lt;T&gt;  ReadOnlySpan&lt;T&gt;  ReadOnlySpan&lt;T&gt; <strong></strong> ReadOnlySpan&lt;T&gt;  Span&lt;T&gt; </p>\n<h2 id=\"Span--ReadOnlySpan-\"><a href=\"#Span--ReadOnlySpan-\" class=\"headerlink\" title=\"Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; \"></a>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; </h2><p>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; <strong></strong></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>ReadOnlySpan&lt;T&gt;</th>\n<th>Span&lt;T&gt;</th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>&#x2F;</td>\n<td>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt;</td>\n<td>ReadOnlySpan&lt;T&gt;  Span&lt;T&gt;</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>&#x2F;</td>\n<td></td>\n<td>Fill</td>\n</tr>\n</tbody></table>\n<p><br>Span&lt;T&gt;  .NET Core 2.1+&#x2F;.NET 5+ <strong></strong> GC </p>\n<blockquote>\n<p> ReadOnlySpan&lt;T&gt; Span&lt;T&gt;  Memory&lt;T&gt;</p>\n</blockquote>\n<h2 id=\"Span-ReadOnlySpan-\"><a href=\"#Span-ReadOnlySpan-\" class=\"headerlink\" title=\"Span&lt;T&gt; ReadOnlySpan&lt;T&gt; \"></a>Span&lt;T&gt; ReadOnlySpan&lt;T&gt; </h2><p>Span&lt;T&gt; <strong></strong>&#x2F;</p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p>ReadOnlySpan&lt;T&gt;  Span&lt;T&gt; </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">int</span>[] nums = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span> &#125;;</span><br><span class=\"line\"><span class=\"comment\">// ReadOnlySpan&lt;T&gt; </span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; readOnlySpan = nums.AsSpan();</span><br><span class=\"line\"><span class=\"comment\">// readOnlySpan[0] = 100; // </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Span&lt;T&gt; </span></span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; writableSpan = nums.AsSpan();</span><br><span class=\"line\">writableSpan[<span class=\"number\">0</span>] = <span class=\"number\">100</span>; <span class=\"comment\">// </span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, nums)); <span class=\"comment\">// 100,2,3,4,5</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><p>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Fill(T)</td>\n<td> Span&lt;T&gt; </td>\n</tr>\n<tr>\n<td>Clear()</td>\n<td> Span&lt;T&gt;  int  0string  null</td>\n</tr>\n<tr>\n<td>CopyTo(Span&lt;T&gt;)</td>\n<td> ReadOnlySpan&lt;T&gt;  Span&lt;T&gt; </td>\n</tr>\n</tbody></table>\n<h4 id=\"1Fill-\"><a href=\"#1Fill-\" class=\"headerlink\" title=\"1Fill \"></a>1Fill </h4><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  byte </span></span><br><span class=\"line\"><span class=\"built_in\">byte</span>[] buffer = <span class=\"keyword\">new</span> <span class=\"built_in\">byte</span>[<span class=\"number\">5</span>];</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">byte</span>&gt; bufferSpan = buffer.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  0xFF</span></span><br><span class=\"line\">bufferSpan.Fill(<span class=\"number\">0xFF</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 255,255,255,255,255</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, buffer));</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2Clear-\"><a href=\"#2Clear-\" class=\"headerlink\" title=\"2Clear \"></a>2Clear </h4><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">string</span>[] strs = &#123; <span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;d&quot;</span> &#125;;</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">string</span>&gt; strSpan = strs.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Span  null</span></span><br><span class=\"line\">strSpan.Clear();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// , , ,  null</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, strs));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3--ReadOnlySpan\"><a href=\"#3--ReadOnlySpan\" class=\"headerlink\" title=\"3.  ReadOnlySpan&lt;T&gt;\"></a>3.  ReadOnlySpan&lt;T&gt;</h3><p>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; Span&lt;T&gt; </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">int</span>[] arr = &#123; <span class=\"number\">10</span>, <span class=\"number\">20</span>, <span class=\"number\">30</span> &#125;;</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; span = arr.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  ReadOnlySpan&lt;T&gt;</span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; readOnlySpan = span;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">Console.WriteLine(readOnlySpan[<span class=\"number\">1</span>]); <span class=\"comment\">// 20</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ReadOnlySpan&lt;T&gt; </span></span><br><span class=\"line\"><span class=\"comment\">// readOnlySpan[1] = 200; // </span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"--Span\"><a href=\"#--Span\" class=\"headerlink\" title=\"&#x2F; Span&lt;T&gt;\"></a>&#x2F; Span&lt;T&gt;</h2><p> ReadOnlySpan&lt;T&gt; Span&lt;T&gt;  MemoryExtensions.AsSpan  .NET  System.Memory NuGet </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  .NET </span></span><br><span class=\"line\">Install-Package System.Memory</span><br><span class=\"line\"><span class=\"comment\">#  .NET CLI</span></span><br><span class=\"line\">dotnet add package System.Memory</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1--Span\"><a href=\"#1--Span\" class=\"headerlink\" title=\"1.  Span&lt;T&gt;\"></a>1.  Span&lt;T&gt;</h3><p> Span&lt;T&gt; Span&lt;T&gt; </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">char</span>[] chars = &#123; <span class=\"string\">&#x27;H&#x27;</span>, <span class=\"string\">&#x27;e&#x27;</span>, <span class=\"string\">&#x27;l&#x27;</span>, <span class=\"string\">&#x27;l&#x27;</span>, <span class=\"string\">&#x27;o&#x27;</span> &#125;;</span><br><span class=\"line\"><span class=\"comment\">//  Span&lt;char&gt;</span></span><br><span class=\"line\">Span&lt;<span class=\"built_in\">char</span>&gt; charSpan = chars.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Span </span></span><br><span class=\"line\">charSpan[<span class=\"number\">4</span>] = <span class=\"string\">&#x27;O&#x27;</span>; <span class=\"comment\">//  &#x27;l&#x27;  &#x27;O&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;&quot;</span>, chars)); <span class=\"comment\">// HellO</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2--Span\"><a href=\"#2--Span\" class=\"headerlink\" title=\"2.  Span\"></a>2.  Span<char></h3><p><strong></strong> Span<char>  System.AccessViolationException</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">string</span> str = <span class=\"string\">&quot;Hello&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">//  Span&lt;char&gt;</span></span><br><span class=\"line\">Span&lt;<span class=\"built_in\">char</span>&gt; strSpan = str.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"comment\">// strSpan[0] = &#x27;h&#x27;; </span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p> char  Span&lt;T&gt;</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">string</span> str = <span class=\"string\">&quot;Hello&quot;</span>;</span><br><span class=\"line\"><span class=\"built_in\">char</span>[] charArr = str.ToCharArray(); <span class=\"comment\">// </span></span><br><span class=\"line\">Span&lt;<span class=\"built_in\">char</span>&gt; charSpan = charArr.AsSpan();</span><br><span class=\"line\">charSpan[<span class=\"number\">0</span>] = <span class=\"string\">&#x27;h&#x27;</span>;</span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;&quot;</span>, charArr)); <span class=\"comment\">// hello</span></span><br></pre></td></tr></table></figure>\n</blockquote>\n<h3 id=\"3-List--Span\"><a href=\"#3-List--Span\" class=\"headerlink\" title=\"3. List&lt;T&gt;  Span&lt;T&gt;\"></a>3. List&lt;T&gt;  Span&lt;T&gt;</h3><p> ReadOnlySpan&lt;T&gt; List&lt;T&gt;  CollectionsMarshal.AsSpan.NET 5+ Span&lt;T&gt;</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;<span class=\"built_in\">int</span>&gt; numList = <span class=\"keyword\">new</span> List&lt;<span class=\"built_in\">int</span>&gt; &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> &#125;;</span><br><span class=\"line\"><span class=\"comment\">// .NET 5+ </span></span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; listSpan = CollectionsMarshal.AsSpan(numList);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Span  List</span></span><br><span class=\"line\">listSpan[<span class=\"number\">1</span>] = <span class=\"number\">200</span>;</span><br><span class=\"line\">Console.WriteLine(numList[<span class=\"number\">1</span>]); <span class=\"comment\">// 200</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Span--ReadOnlySpan-\"><a href=\"#Span--ReadOnlySpan-\" class=\"headerlink\" title=\"Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; + \"></a>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; + </h2><h3 id=\"1--\"><a href=\"#1--\" class=\"headerlink\" title=\"1.  + \"></a>1.  + </h3><p>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt;  GC  ReadOnlySpan&lt;T&gt; </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">int</span>[] source = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span> &#125;;</span><br><span class=\"line\"><span class=\"built_in\">int</span>[] subCopy = <span class=\"keyword\">new</span> <span class=\"built_in\">int</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\">Array.Copy(source, <span class=\"number\">1</span>, subCopy, <span class=\"number\">0</span>, <span class=\"number\">3</span>); <span class=\"comment\">// </span></span><br><span class=\"line\">subCopy[<span class=\"number\">0</span>] = <span class=\"number\">200</span>; <span class=\"comment\">// </span></span><br><span class=\"line\">Console.WriteLine(source[<span class=\"number\">1</span>]); <span class=\"comment\">// 2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Span&lt;T&gt; </span></span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; sourceSpan = source.AsSpan();</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; subSpan = sourceSpan.Slice(<span class=\"number\">1</span>, <span class=\"number\">3</span>); <span class=\"comment\">// </span></span><br><span class=\"line\">subSpan[<span class=\"number\">0</span>] = <span class=\"number\">200</span>; <span class=\"comment\">// </span></span><br><span class=\"line\">Console.WriteLine(source[<span class=\"number\">1</span>]); <span class=\"comment\">// 200</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><p>&#x2F; string.SubstringArray.Copy Span&lt;T&gt; </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 10 0x01</span></span><br><span class=\"line\"><span class=\"built_in\">byte</span>[] data = <span class=\"keyword\">new</span> <span class=\"built_in\">byte</span>[<span class=\"number\">1000</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"built_in\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    data[i] = <span class=\"number\">0x01</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Span&lt;T&gt; Slice + Fill </span></span><br><span class=\"line\">data.AsSpan(<span class=\"number\">0</span>, <span class=\"number\">10</span>).Fill(<span class=\"number\">0x01</span>); <span class=\"comment\">// 10</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h3><p>Span&lt;T&gt; &#x2F; Slice  ArgumentOutOfRangeException</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">int</span>[] nums = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> &#125;;</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; span = nums.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"comment\">// Console.WriteLine(span[3]); // </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Slice</span></span><br><span class=\"line\"><span class=\"comment\">// span.Slice(1, 3); // </span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Span--ReadOnlySpan-\"><a href=\"#Span--ReadOnlySpan-\" class=\"headerlink\" title=\"Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; \"></a>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; </h2><p> ReadOnlySpan&lt;T&gt;  CopyTo&#x2F;TryCopyTo&#x2F;Slice  Span&lt;T&gt; </p>\n<h3 id=\"1-Fill\"><a href=\"#1-Fill\" class=\"headerlink\" title=\"1. Fill\"></a>1. Fill</h3><p></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  1024  0</span></span><br><span class=\"line\"><span class=\"built_in\">byte</span>[] buffer = <span class=\"keyword\">new</span> <span class=\"built_in\">byte</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">byte</span>&gt; bufferSpan = buffer.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">bufferSpan.Fill(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 10 0</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, bufferSpan.Slice(<span class=\"number\">0</span>, <span class=\"number\">10</span>))); <span class=\"comment\">// 0,0,0,0,0,0,0,0,0,0</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><p></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">int</span>[] scores = &#123; <span class=\"number\">80</span>, <span class=\"number\">85</span>, <span class=\"number\">90</span>, <span class=\"number\">95</span> &#125;;</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; scoreSpan = scores.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  99</span></span><br><span class=\"line\">scoreSpan[<span class=\"number\">1</span>] = <span class=\"number\">99</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 80,99,90,95</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, scores));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-Clear\"><a href=\"#3-Clear\" class=\"headerlink\" title=\"3. Clear\"></a>3. Clear</h3><p></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">char</span>[] password = &#123; <span class=\"string\">&#x27;1&#x27;</span>, <span class=\"string\">&#x27;2&#x27;</span>, <span class=\"string\">&#x27;3&#x27;</span>, <span class=\"string\">&#x27;4&#x27;</span>, <span class=\"string\">&#x27;5&#x27;</span> &#125;;</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">char</span>&gt; pwdSpan = password.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  &#x27;\\0&#x27;</span></span><br><span class=\"line\">pwdSpan.Clear();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ,,,,</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;&quot;</span>, password));</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Span--\"><a href=\"#Span--\" class=\"headerlink\" title=\"Span&lt;T&gt;  &amp; \"></a>Span&lt;T&gt;  &amp; </h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li><strong></strong>&#x2F;</li>\n<li><strong></strong> GC </li>\n<li><strong></strong></li>\n</ol>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li> Memory&lt;T&gt;</li>\n<li> Span<char>  char </li>\n<li>Span&lt;T&gt;  Span&lt;T&gt; </li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt;  ReadOnlySpan&lt;T&gt;</li>\n<li>Fill&#x2F;Clear </li>\n<li> GC </li>\n<li></li>\n</ol>\n<p>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt;  C#  .NET </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.span-1?view=net-8.0\">Span&lt;T&gt;  - Microsoft Learn</a><br><a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.memory-1?view=net-8.0\">Memory&lt;T&gt;  - Microsoft Learn</a><br><a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.runtime.interopservices.collectionsmarshal?view=net-9.0\">CollectionsMarshal  - Microsoft Learn</a><br><a href=\"https://www.nuget.org/packages/System.Memory\">System.Memory - NuGet Gallery</a></p>\n","excerpt":"","more":"<h3 id=\"2026-01-19-10-30-49\"><a href=\"#2026-01-19-10-30-49\" class=\"headerlink\" title=\"2026-01-19 10:30:49\"></a><strong>2026-01-19 10:30:49</strong></h3><p></p>\n<hr>\n<!-- \n ReadOnlySpan<T>  Span<T>  Span<T>  ReadOnlySpan<T>  ReadOnlySpan<T> \n -->\n\n<p> C# Span&lt;T&gt;  ReadOnlySpan&lt;T&gt;  ReadOnlySpan&lt;T&gt; <strong></strong> ReadOnlySpan&lt;T&gt;  Span&lt;T&gt; </p>\n<h2 id=\"Span--ReadOnlySpan-\"><a href=\"#Span--ReadOnlySpan-\" class=\"headerlink\" title=\"Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; \"></a>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; </h2><p>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; <strong></strong></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>ReadOnlySpan&lt;T&gt;</th>\n<th>Span&lt;T&gt;</th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>&#x2F;</td>\n<td>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt;</td>\n<td>ReadOnlySpan&lt;T&gt;  Span&lt;T&gt;</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>&#x2F;</td>\n<td></td>\n<td>Fill</td>\n</tr>\n</tbody></table>\n<p><br>Span&lt;T&gt;  .NET Core 2.1+&#x2F;.NET 5+ <strong></strong> GC </p>\n<blockquote>\n<p> ReadOnlySpan&lt;T&gt; Span&lt;T&gt;  Memory&lt;T&gt;</p>\n</blockquote>\n<h2 id=\"Span-ReadOnlySpan-\"><a href=\"#Span-ReadOnlySpan-\" class=\"headerlink\" title=\"Span&lt;T&gt; ReadOnlySpan&lt;T&gt; \"></a>Span&lt;T&gt; ReadOnlySpan&lt;T&gt; </h2><p>Span&lt;T&gt; <strong></strong>&#x2F;</p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p>ReadOnlySpan&lt;T&gt;  Span&lt;T&gt; </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">int</span>[] nums = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span> &#125;;</span><br><span class=\"line\"><span class=\"comment\">// ReadOnlySpan&lt;T&gt; </span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; readOnlySpan = nums.AsSpan();</span><br><span class=\"line\"><span class=\"comment\">// readOnlySpan[0] = 100; // </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Span&lt;T&gt; </span></span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; writableSpan = nums.AsSpan();</span><br><span class=\"line\">writableSpan[<span class=\"number\">0</span>] = <span class=\"number\">100</span>; <span class=\"comment\">// </span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, nums)); <span class=\"comment\">// 100,2,3,4,5</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><p>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Fill(T)</td>\n<td> Span&lt;T&gt; </td>\n</tr>\n<tr>\n<td>Clear()</td>\n<td> Span&lt;T&gt;  int  0string  null</td>\n</tr>\n<tr>\n<td>CopyTo(Span&lt;T&gt;)</td>\n<td> ReadOnlySpan&lt;T&gt;  Span&lt;T&gt; </td>\n</tr>\n</tbody></table>\n<h4 id=\"1Fill-\"><a href=\"#1Fill-\" class=\"headerlink\" title=\"1Fill \"></a>1Fill </h4><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  byte </span></span><br><span class=\"line\"><span class=\"built_in\">byte</span>[] buffer = <span class=\"keyword\">new</span> <span class=\"built_in\">byte</span>[<span class=\"number\">5</span>];</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">byte</span>&gt; bufferSpan = buffer.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  0xFF</span></span><br><span class=\"line\">bufferSpan.Fill(<span class=\"number\">0xFF</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 255,255,255,255,255</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, buffer));</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2Clear-\"><a href=\"#2Clear-\" class=\"headerlink\" title=\"2Clear \"></a>2Clear </h4><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">string</span>[] strs = &#123; <span class=\"string\">&quot;a&quot;</span>, <span class=\"string\">&quot;b&quot;</span>, <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;d&quot;</span> &#125;;</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">string</span>&gt; strSpan = strs.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Span  null</span></span><br><span class=\"line\">strSpan.Clear();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// , , ,  null</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, strs));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3--ReadOnlySpan\"><a href=\"#3--ReadOnlySpan\" class=\"headerlink\" title=\"3.  ReadOnlySpan&lt;T&gt;\"></a>3.  ReadOnlySpan&lt;T&gt;</h3><p>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; Span&lt;T&gt; </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">int</span>[] arr = &#123; <span class=\"number\">10</span>, <span class=\"number\">20</span>, <span class=\"number\">30</span> &#125;;</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; span = arr.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  ReadOnlySpan&lt;T&gt;</span></span><br><span class=\"line\">ReadOnlySpan&lt;<span class=\"built_in\">int</span>&gt; readOnlySpan = span;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">Console.WriteLine(readOnlySpan[<span class=\"number\">1</span>]); <span class=\"comment\">// 20</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ReadOnlySpan&lt;T&gt; </span></span><br><span class=\"line\"><span class=\"comment\">// readOnlySpan[1] = 200; // </span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"--Span\"><a href=\"#--Span\" class=\"headerlink\" title=\"&#x2F; Span&lt;T&gt;\"></a>&#x2F; Span&lt;T&gt;</h2><p> ReadOnlySpan&lt;T&gt; Span&lt;T&gt;  MemoryExtensions.AsSpan  .NET  System.Memory NuGet </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  .NET </span></span><br><span class=\"line\">Install-Package System.Memory</span><br><span class=\"line\"><span class=\"comment\">#  .NET CLI</span></span><br><span class=\"line\">dotnet add package System.Memory</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1--Span\"><a href=\"#1--Span\" class=\"headerlink\" title=\"1.  Span&lt;T&gt;\"></a>1.  Span&lt;T&gt;</h3><p> Span&lt;T&gt; Span&lt;T&gt; </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">char</span>[] chars = &#123; <span class=\"string\">&#x27;H&#x27;</span>, <span class=\"string\">&#x27;e&#x27;</span>, <span class=\"string\">&#x27;l&#x27;</span>, <span class=\"string\">&#x27;l&#x27;</span>, <span class=\"string\">&#x27;o&#x27;</span> &#125;;</span><br><span class=\"line\"><span class=\"comment\">//  Span&lt;char&gt;</span></span><br><span class=\"line\">Span&lt;<span class=\"built_in\">char</span>&gt; charSpan = chars.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Span </span></span><br><span class=\"line\">charSpan[<span class=\"number\">4</span>] = <span class=\"string\">&#x27;O&#x27;</span>; <span class=\"comment\">//  &#x27;l&#x27;  &#x27;O&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;&quot;</span>, chars)); <span class=\"comment\">// HellO</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2--Span\"><a href=\"#2--Span\" class=\"headerlink\" title=\"2.  Span\"></a>2.  Span<char></h3><p><strong></strong> Span<char>  System.AccessViolationException</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">string</span> str = <span class=\"string\">&quot;Hello&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">//  Span&lt;char&gt;</span></span><br><span class=\"line\">Span&lt;<span class=\"built_in\">char</span>&gt; strSpan = str.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"comment\">// strSpan[0] = &#x27;h&#x27;; </span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p> char  Span&lt;T&gt;</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">string</span> str = <span class=\"string\">&quot;Hello&quot;</span>;</span><br><span class=\"line\"><span class=\"built_in\">char</span>[] charArr = str.ToCharArray(); <span class=\"comment\">// </span></span><br><span class=\"line\">Span&lt;<span class=\"built_in\">char</span>&gt; charSpan = charArr.AsSpan();</span><br><span class=\"line\">charSpan[<span class=\"number\">0</span>] = <span class=\"string\">&#x27;h&#x27;</span>;</span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;&quot;</span>, charArr)); <span class=\"comment\">// hello</span></span><br></pre></td></tr></table></figure>\n</blockquote>\n<h3 id=\"3-List--Span\"><a href=\"#3-List--Span\" class=\"headerlink\" title=\"3. List&lt;T&gt;  Span&lt;T&gt;\"></a>3. List&lt;T&gt;  Span&lt;T&gt;</h3><p> ReadOnlySpan&lt;T&gt; List&lt;T&gt;  CollectionsMarshal.AsSpan.NET 5+ Span&lt;T&gt;</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;<span class=\"built_in\">int</span>&gt; numList = <span class=\"keyword\">new</span> List&lt;<span class=\"built_in\">int</span>&gt; &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> &#125;;</span><br><span class=\"line\"><span class=\"comment\">// .NET 5+ </span></span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; listSpan = CollectionsMarshal.AsSpan(numList);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Span  List</span></span><br><span class=\"line\">listSpan[<span class=\"number\">1</span>] = <span class=\"number\">200</span>;</span><br><span class=\"line\">Console.WriteLine(numList[<span class=\"number\">1</span>]); <span class=\"comment\">// 200</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Span--ReadOnlySpan-\"><a href=\"#Span--ReadOnlySpan-\" class=\"headerlink\" title=\"Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; + \"></a>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; + </h2><h3 id=\"1--\"><a href=\"#1--\" class=\"headerlink\" title=\"1.  + \"></a>1.  + </h3><p>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt;  GC  ReadOnlySpan&lt;T&gt; </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">int</span>[] source = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span> &#125;;</span><br><span class=\"line\"><span class=\"built_in\">int</span>[] subCopy = <span class=\"keyword\">new</span> <span class=\"built_in\">int</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\">Array.Copy(source, <span class=\"number\">1</span>, subCopy, <span class=\"number\">0</span>, <span class=\"number\">3</span>); <span class=\"comment\">// </span></span><br><span class=\"line\">subCopy[<span class=\"number\">0</span>] = <span class=\"number\">200</span>; <span class=\"comment\">// </span></span><br><span class=\"line\">Console.WriteLine(source[<span class=\"number\">1</span>]); <span class=\"comment\">// 2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Span&lt;T&gt; </span></span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; sourceSpan = source.AsSpan();</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; subSpan = sourceSpan.Slice(<span class=\"number\">1</span>, <span class=\"number\">3</span>); <span class=\"comment\">// </span></span><br><span class=\"line\">subSpan[<span class=\"number\">0</span>] = <span class=\"number\">200</span>; <span class=\"comment\">// </span></span><br><span class=\"line\">Console.WriteLine(source[<span class=\"number\">1</span>]); <span class=\"comment\">// 200</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><p>&#x2F; string.SubstringArray.Copy Span&lt;T&gt; </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 10 0x01</span></span><br><span class=\"line\"><span class=\"built_in\">byte</span>[] data = <span class=\"keyword\">new</span> <span class=\"built_in\">byte</span>[<span class=\"number\">1000</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"built_in\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    data[i] = <span class=\"number\">0x01</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Span&lt;T&gt; Slice + Fill </span></span><br><span class=\"line\">data.AsSpan(<span class=\"number\">0</span>, <span class=\"number\">10</span>).Fill(<span class=\"number\">0x01</span>); <span class=\"comment\">// 10</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h3><p>Span&lt;T&gt; &#x2F; Slice  ArgumentOutOfRangeException</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">int</span>[] nums = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> &#125;;</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; span = nums.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"comment\">// Console.WriteLine(span[3]); // </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  Slice</span></span><br><span class=\"line\"><span class=\"comment\">// span.Slice(1, 3); // </span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Span--ReadOnlySpan-\"><a href=\"#Span--ReadOnlySpan-\" class=\"headerlink\" title=\"Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; \"></a>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt; </h2><p> ReadOnlySpan&lt;T&gt;  CopyTo&#x2F;TryCopyTo&#x2F;Slice  Span&lt;T&gt; </p>\n<h3 id=\"1-Fill\"><a href=\"#1-Fill\" class=\"headerlink\" title=\"1. Fill\"></a>1. Fill</h3><p></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//  1024  0</span></span><br><span class=\"line\"><span class=\"built_in\">byte</span>[] buffer = <span class=\"keyword\">new</span> <span class=\"built_in\">byte</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">byte</span>&gt; bufferSpan = buffer.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">bufferSpan.Fill(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 10 0</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, bufferSpan.Slice(<span class=\"number\">0</span>, <span class=\"number\">10</span>))); <span class=\"comment\">// 0,0,0,0,0,0,0,0,0,0</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><p></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">int</span>[] scores = &#123; <span class=\"number\">80</span>, <span class=\"number\">85</span>, <span class=\"number\">90</span>, <span class=\"number\">95</span> &#125;;</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">int</span>&gt; scoreSpan = scores.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  99</span></span><br><span class=\"line\">scoreSpan[<span class=\"number\">1</span>] = <span class=\"number\">99</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 80,99,90,95</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;,&quot;</span>, scores));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-Clear\"><a href=\"#3-Clear\" class=\"headerlink\" title=\"3. Clear\"></a>3. Clear</h3><p></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">char</span>[] password = &#123; <span class=\"string\">&#x27;1&#x27;</span>, <span class=\"string\">&#x27;2&#x27;</span>, <span class=\"string\">&#x27;3&#x27;</span>, <span class=\"string\">&#x27;4&#x27;</span>, <span class=\"string\">&#x27;5&#x27;</span> &#125;;</span><br><span class=\"line\">Span&lt;<span class=\"built_in\">char</span>&gt; pwdSpan = password.AsSpan();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  &#x27;\\0&#x27;</span></span><br><span class=\"line\">pwdSpan.Clear();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ,,,,</span></span><br><span class=\"line\">Console.WriteLine(<span class=\"built_in\">string</span>.Join(<span class=\"string\">&quot;&quot;</span>, password));</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Span--\"><a href=\"#Span--\" class=\"headerlink\" title=\"Span&lt;T&gt;  &amp; \"></a>Span&lt;T&gt;  &amp; </h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li><strong></strong>&#x2F;</li>\n<li><strong></strong> GC </li>\n<li><strong></strong></li>\n</ol>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li> Memory&lt;T&gt;</li>\n<li> Span<char>  char </li>\n<li>Span&lt;T&gt;  Span&lt;T&gt; </li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt;  ReadOnlySpan&lt;T&gt;</li>\n<li>Fill&#x2F;Clear </li>\n<li> GC </li>\n<li></li>\n</ol>\n<p>Span&lt;T&gt;  ReadOnlySpan&lt;T&gt;  C#  .NET </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.span-1?view=net-8.0\">Span&lt;T&gt;  - Microsoft Learn</a><br><a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.memory-1?view=net-8.0\">Memory&lt;T&gt;  - Microsoft Learn</a><br><a href=\"https://learn.microsoft.com/zh-cn/dotnet/api/system.runtime.interopservices.collectionsmarshal?view=net-9.0\">CollectionsMarshal  - Microsoft Learn</a><br><a href=\"https://www.nuget.org/packages/System.Memory\">System.Memory - NuGet Gallery</a></p>\n"},{"title":"","date":"2026-02-20T12:14:45.000Z","_content":"\n### **2026-02-20 21:08:05**\n\n\n\n---\n\n SkiaSharp \n\n## \n\n SkiaSharp  startPos  endPos \n\n## \n\n### 1. PEVector\n\n PEVector \n\n|  |  |  |\n|------|------|----------|\n| X/Y | xy |  $\\vec{v} = (X, Y)$ |\n| Length |  | $\\|\\vec{v}\\| = \\sqrt{X^2 + Y^2}$ |\n| Normalize() |  | $\\hat{v} = \\frac{\\vec{v}}{\\|\\vec{v}\\|}$ |\n| GetNormal() |  |  $\\vec{v}=(x,y)$ $(y, -x)$ |\n| Add(v1, v2) |  | $\\vec{v_1} + \\vec{v_2} = (x_1+x_2, y_1+y_2)$ |\n| Sub(v1, v2) |  | $\\vec{v_1} - \\vec{v_2} = (x_1-x_2, y_1-y_2)$ |\n| Scale(v, s) |  | $s \\cdot \\vec{v} = (s \\cdot x, s \\cdot y)$ |\n\n### 2. \n\n- **** 1 $\\hat{v} = \\frac{\\vec{v}}{|\\vec{v}|}$ $|\\vec{v}| \\neq 0$\n- **** $(x,y)$ $(y, -x)$  $(-y, x)$\n- ****$\\vec{v_1} - \\vec{v_2}$  $v_2$  $v_1$ \n\n## \n\n\n\n### 1/\n\n```csharp\nconst int Gap = 10; // \nvar startPos = new PEVector(200, 600); //  S(200,600)\nvar endPos = new PEVector(600, 200);   //  E(600,200)\ncanvas.DrawLine(startPos.ToSKPoint(), endPos.ToSKPoint(), linePaint); // \n```\n\n $S(x_s, y_s)$  $E(x_e, y_e)$ \n\n### 2\n\n```csharp\nvar direction = PEVector.Sub(endPos, startPos); // \n```\n\n\n$$\\vec{direction} = E - S = (x_e - x_s, y_e - y_s)$$\nSE\n\n### 3\n\n```csharp\ndirection.Normalize(); // \n```\n\n\n$$\\hat{direction} = \\frac{\\vec{direction}}{|\\vec{direction}|} = \\frac{(x_e - x_s, y_e - y_s)}{\\sqrt{(x_e - x_s)^2 + (y_e - y_s)^2}}$$\nGap\n\n### 4\n\n```csharp\nvar endHeadCenter = PEVector.Sub(endPos, PEVector.Scale(direction, Gap));\n```\n\n\n$$P_{center} = E - Gap \\cdot \\hat{direction}$$\n E-$\\hat{direction}$ Gap  $P_{center}$E\n\n### 5\n\n```csharp\n// \nvar directionToLeft = direction.GetNormal(); \n//  + Gap\nvar leftEndHeadPos = PEVector.Add(endHeadCenter, PEVector.Scale(directionToLeft, Gap));\n// E\ncanvas.DrawLine(leftEndHeadPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);\n```\n\n\n$$\\vec{n_{left}} = (y_{\\hat{direction}}, -x_{\\hat{direction}}) \\quad \\text{}$$\n$$P_{left} = P_{center} + Gap \\cdot \\vec{n_{left}}$$\n Gap  $P_{left}$ $P_{left}$  E \n\n### 6\n\n```csharp\n// \nvar directionToRight = PEVector.Scale(direction.GetNormal(), -1);\n//  + Gap\nvar rightEndHeadPos = PEVector.Add(endHeadCenter, PEVector.Scale(directionToRight, Gap));\n// E\ncanvas.DrawLine(rightEndHeadPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);\n```\n\n\n$$\\vec{n_{right}} = -\\vec{n_{left}} = (-y_{\\hat{direction}}, x_{\\hat{direction}}) \\quad \\text{}$$\n$$P_{right} = P_{center} + Gap \\cdot \\vec{n_{right}}$$\n Gap  $P_{right}$ $P_{right}$  E \n\n### 7\n\n/$P_{center}$$P_{left}$$P_{right}$\n```csharp\nif (ShowCircle)\n{\n    canvas.DrawCircle(endHeadCenter.ToSKPoint(), 3, new SKPaint { Color = SKColors.Red }); // \n    canvas.DrawCircle(leftEndHeadPos.ToSKPoint(), 3, new SKPaint { Color = SKColors.Green }); // \n    canvas.DrawCircle(rightEndHeadPos.ToSKPoint(), 3, new SKPaint { Color = SKColors.Green }); // \n}\n```\n\n## \n```csharp\nusing SkiaSharp;\nusing SkiaSharp.Views.Desktop;\nusing System;\n\npublic struct PEVector\n{\n    public double X;\n    public double Y;\n\n    public PEVector() { }\n\n    public PEVector(double x, double y)\n    {\n        X = x;\n        Y = y;\n    }\n\n    // \n    public readonly double Length => Math.Sqrt(X * X + Y * Y);\n\n    /// <summary>\n    /// 1\n    /// </summary>\n    public void Normalize()\n    {\n        var length = Length;\n        if (length < 1e-9) return; // 0\n        X /= length;\n        Y /= length;\n    }\n\n    /// <summary>\n    /// (x,y)  (y, -x)\n    /// </summary>\n    public PEVector GetNormal()\n    {\n        return new PEVector { X = Y, Y = -X };\n    }\n\n    /// <summary>\n    /// \n    /// </summary>\n    public static PEVector Add(PEVector v1, PEVector v2)\n    {\n        return new PEVector { X = v1.X + v2.X, Y = v1.Y + v2.Y };\n    }\n\n    /// <summary>\n    /// \n    /// </summary>\n    public static PEVector Sub(PEVector v1, PEVector v2)\n    {\n        return new PEVector { X = v1.X - v2.X, Y = v1.Y - v2.Y };\n    }\n\n    /// <summary>\n    /// \n    /// </summary>\n    public static PEVector Scale(PEVector v, double scale)\n    {\n        return new PEVector { X = v.X * scale, Y = v.Y * scale };\n    }\n}\n\npublic static class PEVectorExtensions\n{\n    /// <summary>\n    /// SkiaSharp\n    /// </summary>\n    public static SKPoint ToSKPoint(this PEVector v)\n    {\n        return new SKPoint((float)v.X, (float)v.Y);\n    }\n}\n\npublic class ArrowDrawing\n{\n    private void SKElement_PaintSurface(object sender, SKPaintSurfaceEventArgs e)\n    {\n        const int Gap = 10; // \n        bool ShowCircle = false; // \n\n        var canvas = e.Surface.Canvas;\n        canvas.Clear();\n\n        // \n        using var linePaint = new SKPaint { Color = SKColors.Black, StrokeWidth = 1 };\n\n        // 1. \n        var startPos = new PEVector(200, 600);\n        var endPos = new PEVector(600, 200);\n        // \n        canvas.DrawLine(startPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);\n\n        // 2. \n        var direction = PEVector.Sub(endPos, startPos);\n        // 3. \n        direction.Normalize();\n\n        // 4. Gap\n        var endHeadCenter = PEVector.Sub(endPos, PEVector.Scale(direction, Gap));\n\n        // 5. \n        var directionToLeft = direction.GetNormal(); // \n        var leftEndHeadPos = PEVector.Add(endHeadCenter, PEVector.Scale(directionToLeft, Gap));\n        canvas.DrawLine(leftEndHeadPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);\n\n        // 6. \n        var directionToRight = PEVector.Scale(direction.GetNormal(), -1); // \n        var rightEndHeadPos = PEVector.Add(endHeadCenter, PEVector.Scale(directionToRight, Gap));\n        canvas.DrawLine(rightEndHeadPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);\n\n        // \n        if (ShowCircle)\n        {\n            using var redPaint = new SKPaint { Color = SKColors.Red, StrokeWidth = 1, Style = SKPaintStyle.Fill };\n            using var greenPaint = new SKPaint { Color = SKColors.Green, StrokeWidth = 1, Style = SKPaintStyle.Fill };\n            canvas.DrawCircle(endHeadCenter.ToSKPoint(), 3, redPaint);\n            canvas.DrawCircle(leftEndHeadPos.ToSKPoint(), 3, greenPaint);\n            canvas.DrawCircle(rightEndHeadPos.ToSKPoint(), 3, greenPaint);\n        }\n    }\n}\n```\n\n### \n1. ******************+**\n2. ****\n   - $\\vec{direction} = E - S$\n   - $\\hat{direction} = \\vec{direction} / |\\vec{direction}|$\n   - $P_{center} = E - Gap \\cdot \\hat{direction}$\n   - $P_{left/right} = P_{center}  Gap \\cdot (y_{\\hat{direction}}, -x_{\\hat{direction}})$\n3. **** Gap $\\vec{direction} = S - E$","source":"_posts/vector-based-arrow-rendering-for-line-segments-md.md","raw":"---\ntitle: \ndate: 2026-02-20 20:14:45\ntags:\n- C#\n- SkiaSharp\n- Vector\ncategories:\n- C#\n- Vector\n---\n\n### **2026-02-20 21:08:05**\n\n\n\n---\n\n SkiaSharp \n\n## \n\n SkiaSharp  startPos  endPos \n\n## \n\n### 1. PEVector\n\n PEVector \n\n|  |  |  |\n|------|------|----------|\n| X/Y | xy |  $\\vec{v} = (X, Y)$ |\n| Length |  | $\\|\\vec{v}\\| = \\sqrt{X^2 + Y^2}$ |\n| Normalize() |  | $\\hat{v} = \\frac{\\vec{v}}{\\|\\vec{v}\\|}$ |\n| GetNormal() |  |  $\\vec{v}=(x,y)$ $(y, -x)$ |\n| Add(v1, v2) |  | $\\vec{v_1} + \\vec{v_2} = (x_1+x_2, y_1+y_2)$ |\n| Sub(v1, v2) |  | $\\vec{v_1} - \\vec{v_2} = (x_1-x_2, y_1-y_2)$ |\n| Scale(v, s) |  | $s \\cdot \\vec{v} = (s \\cdot x, s \\cdot y)$ |\n\n### 2. \n\n- **** 1 $\\hat{v} = \\frac{\\vec{v}}{|\\vec{v}|}$ $|\\vec{v}| \\neq 0$\n- **** $(x,y)$ $(y, -x)$  $(-y, x)$\n- ****$\\vec{v_1} - \\vec{v_2}$  $v_2$  $v_1$ \n\n## \n\n\n\n### 1/\n\n```csharp\nconst int Gap = 10; // \nvar startPos = new PEVector(200, 600); //  S(200,600)\nvar endPos = new PEVector(600, 200);   //  E(600,200)\ncanvas.DrawLine(startPos.ToSKPoint(), endPos.ToSKPoint(), linePaint); // \n```\n\n $S(x_s, y_s)$  $E(x_e, y_e)$ \n\n### 2\n\n```csharp\nvar direction = PEVector.Sub(endPos, startPos); // \n```\n\n\n$$\\vec{direction} = E - S = (x_e - x_s, y_e - y_s)$$\nSE\n\n### 3\n\n```csharp\ndirection.Normalize(); // \n```\n\n\n$$\\hat{direction} = \\frac{\\vec{direction}}{|\\vec{direction}|} = \\frac{(x_e - x_s, y_e - y_s)}{\\sqrt{(x_e - x_s)^2 + (y_e - y_s)^2}}$$\nGap\n\n### 4\n\n```csharp\nvar endHeadCenter = PEVector.Sub(endPos, PEVector.Scale(direction, Gap));\n```\n\n\n$$P_{center} = E - Gap \\cdot \\hat{direction}$$\n E-$\\hat{direction}$ Gap  $P_{center}$E\n\n### 5\n\n```csharp\n// \nvar directionToLeft = direction.GetNormal(); \n//  + Gap\nvar leftEndHeadPos = PEVector.Add(endHeadCenter, PEVector.Scale(directionToLeft, Gap));\n// E\ncanvas.DrawLine(leftEndHeadPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);\n```\n\n\n$$\\vec{n_{left}} = (y_{\\hat{direction}}, -x_{\\hat{direction}}) \\quad \\text{}$$\n$$P_{left} = P_{center} + Gap \\cdot \\vec{n_{left}}$$\n Gap  $P_{left}$ $P_{left}$  E \n\n### 6\n\n```csharp\n// \nvar directionToRight = PEVector.Scale(direction.GetNormal(), -1);\n//  + Gap\nvar rightEndHeadPos = PEVector.Add(endHeadCenter, PEVector.Scale(directionToRight, Gap));\n// E\ncanvas.DrawLine(rightEndHeadPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);\n```\n\n\n$$\\vec{n_{right}} = -\\vec{n_{left}} = (-y_{\\hat{direction}}, x_{\\hat{direction}}) \\quad \\text{}$$\n$$P_{right} = P_{center} + Gap \\cdot \\vec{n_{right}}$$\n Gap  $P_{right}$ $P_{right}$  E \n\n### 7\n\n/$P_{center}$$P_{left}$$P_{right}$\n```csharp\nif (ShowCircle)\n{\n    canvas.DrawCircle(endHeadCenter.ToSKPoint(), 3, new SKPaint { Color = SKColors.Red }); // \n    canvas.DrawCircle(leftEndHeadPos.ToSKPoint(), 3, new SKPaint { Color = SKColors.Green }); // \n    canvas.DrawCircle(rightEndHeadPos.ToSKPoint(), 3, new SKPaint { Color = SKColors.Green }); // \n}\n```\n\n## \n```csharp\nusing SkiaSharp;\nusing SkiaSharp.Views.Desktop;\nusing System;\n\npublic struct PEVector\n{\n    public double X;\n    public double Y;\n\n    public PEVector() { }\n\n    public PEVector(double x, double y)\n    {\n        X = x;\n        Y = y;\n    }\n\n    // \n    public readonly double Length => Math.Sqrt(X * X + Y * Y);\n\n    /// <summary>\n    /// 1\n    /// </summary>\n    public void Normalize()\n    {\n        var length = Length;\n        if (length < 1e-9) return; // 0\n        X /= length;\n        Y /= length;\n    }\n\n    /// <summary>\n    /// (x,y)  (y, -x)\n    /// </summary>\n    public PEVector GetNormal()\n    {\n        return new PEVector { X = Y, Y = -X };\n    }\n\n    /// <summary>\n    /// \n    /// </summary>\n    public static PEVector Add(PEVector v1, PEVector v2)\n    {\n        return new PEVector { X = v1.X + v2.X, Y = v1.Y + v2.Y };\n    }\n\n    /// <summary>\n    /// \n    /// </summary>\n    public static PEVector Sub(PEVector v1, PEVector v2)\n    {\n        return new PEVector { X = v1.X - v2.X, Y = v1.Y - v2.Y };\n    }\n\n    /// <summary>\n    /// \n    /// </summary>\n    public static PEVector Scale(PEVector v, double scale)\n    {\n        return new PEVector { X = v.X * scale, Y = v.Y * scale };\n    }\n}\n\npublic static class PEVectorExtensions\n{\n    /// <summary>\n    /// SkiaSharp\n    /// </summary>\n    public static SKPoint ToSKPoint(this PEVector v)\n    {\n        return new SKPoint((float)v.X, (float)v.Y);\n    }\n}\n\npublic class ArrowDrawing\n{\n    private void SKElement_PaintSurface(object sender, SKPaintSurfaceEventArgs e)\n    {\n        const int Gap = 10; // \n        bool ShowCircle = false; // \n\n        var canvas = e.Surface.Canvas;\n        canvas.Clear();\n\n        // \n        using var linePaint = new SKPaint { Color = SKColors.Black, StrokeWidth = 1 };\n\n        // 1. \n        var startPos = new PEVector(200, 600);\n        var endPos = new PEVector(600, 200);\n        // \n        canvas.DrawLine(startPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);\n\n        // 2. \n        var direction = PEVector.Sub(endPos, startPos);\n        // 3. \n        direction.Normalize();\n\n        // 4. Gap\n        var endHeadCenter = PEVector.Sub(endPos, PEVector.Scale(direction, Gap));\n\n        // 5. \n        var directionToLeft = direction.GetNormal(); // \n        var leftEndHeadPos = PEVector.Add(endHeadCenter, PEVector.Scale(directionToLeft, Gap));\n        canvas.DrawLine(leftEndHeadPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);\n\n        // 6. \n        var directionToRight = PEVector.Scale(direction.GetNormal(), -1); // \n        var rightEndHeadPos = PEVector.Add(endHeadCenter, PEVector.Scale(directionToRight, Gap));\n        canvas.DrawLine(rightEndHeadPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);\n\n        // \n        if (ShowCircle)\n        {\n            using var redPaint = new SKPaint { Color = SKColors.Red, StrokeWidth = 1, Style = SKPaintStyle.Fill };\n            using var greenPaint = new SKPaint { Color = SKColors.Green, StrokeWidth = 1, Style = SKPaintStyle.Fill };\n            canvas.DrawCircle(endHeadCenter.ToSKPoint(), 3, redPaint);\n            canvas.DrawCircle(leftEndHeadPos.ToSKPoint(), 3, greenPaint);\n            canvas.DrawCircle(rightEndHeadPos.ToSKPoint(), 3, greenPaint);\n        }\n    }\n}\n```\n\n### \n1. ******************+**\n2. ****\n   - $\\vec{direction} = E - S$\n   - $\\hat{direction} = \\vec{direction} / |\\vec{direction}|$\n   - $P_{center} = E - Gap \\cdot \\hat{direction}$\n   - $P_{left/right} = P_{center}  Gap \\cdot (y_{\\hat{direction}}, -x_{\\hat{direction}})$\n3. **** Gap $\\vec{direction} = S - E$","slug":"vector-based-arrow-rendering-for-line-segments-md","published":1,"updated":"2026-02-20T13:08:52.016Z","comments":1,"layout":"post","photos":[],"_id":"cmm3ar6wo001j6gu859ftc5ca","content":"<h3 id=\"2026-02-20-21-08-05\"><a href=\"#2026-02-20-21-08-05\" class=\"headerlink\" title=\"2026-02-20 21:08:05\"></a><strong>2026-02-20 21:08:05</strong></h3><p></p>\n<hr>\n<p> SkiaSharp </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> SkiaSharp  startPos  endPos </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"1-PEVector\"><a href=\"#1-PEVector\" class=\"headerlink\" title=\"1. PEVector\"></a>1. PEVector</h3><p> PEVector </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>X&#x2F;Y</td>\n<td>xy</td>\n<td> $\\vec{v} &#x3D; (X, Y)$</td>\n</tr>\n<tr>\n<td>Length</td>\n<td></td>\n<td>$|\\vec{v}| &#x3D; \\sqrt{X^2 + Y^2}$</td>\n</tr>\n<tr>\n<td>Normalize()</td>\n<td></td>\n<td>$\\hat{v} &#x3D; \\frac{\\vec{v}}{|\\vec{v}|}$</td>\n</tr>\n<tr>\n<td>GetNormal()</td>\n<td></td>\n<td> $\\vec{v}&#x3D;(x,y)$ $(y, -x)$</td>\n</tr>\n<tr>\n<td>Add(v1, v2)</td>\n<td></td>\n<td>$\\vec{v_1} + \\vec{v_2} &#x3D; (x_1+x_2, y_1+y_2)$</td>\n</tr>\n<tr>\n<td>Sub(v1, v2)</td>\n<td></td>\n<td>$\\vec{v_1} - \\vec{v_2} &#x3D; (x_1-x_2, y_1-y_2)$</td>\n</tr>\n<tr>\n<td>Scale(v, s)</td>\n<td></td>\n<td>$s \\cdot \\vec{v} &#x3D; (s \\cdot x, s \\cdot y)$</td>\n</tr>\n</tbody></table>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><ul>\n<li><strong></strong> 1 $\\hat{v} &#x3D; \\frac{\\vec{v}}{|\\vec{v}|}$ $|\\vec{v}| \\neq 0$</li>\n<li><strong></strong> $(x,y)$ $(y, -x)$  $(-y, x)$</li>\n<li><strong></strong>$\\vec{v_1} - \\vec{v_2}$  $v_2$  $v_1$ </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1&#x2F;\"></a>1&#x2F;</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"built_in\">int</span> Gap = <span class=\"number\">10</span>; <span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> startPos = <span class=\"keyword\">new</span> PEVector(<span class=\"number\">200</span>, <span class=\"number\">600</span>); <span class=\"comment\">//  S(200,600)</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> endPos = <span class=\"keyword\">new</span> PEVector(<span class=\"number\">600</span>, <span class=\"number\">200</span>);   <span class=\"comment\">//  E(600,200)</span></span><br><span class=\"line\">canvas.DrawLine(startPos.ToSKPoint(), endPos.ToSKPoint(), linePaint); <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n\n<p> $S(x_s, y_s)$  $E(x_e, y_e)$ </p>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> direction = PEVector.Sub(endPos, startPos); <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n\n<p><br>$$\\vec{direction} &#x3D; E - S &#x3D; (x_e - x_s, y_e - y_s)$$<br>SE</p>\n<h3 id=\"3\"><a href=\"#3\" class=\"headerlink\" title=\"3\"></a>3</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">direction.Normalize(); <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n\n<p><br>$$\\hat{direction} &#x3D; \\frac{\\vec{direction}}{|\\vec{direction}|} &#x3D; \\frac{(x_e - x_s, y_e - y_s)}{\\sqrt{(x_e - x_s)^2 + (y_e - y_s)^2}}$$<br>Gap</p>\n<h3 id=\"4\"><a href=\"#4\" class=\"headerlink\" title=\"4\"></a>4</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> endHeadCenter = PEVector.Sub(endPos, PEVector.Scale(direction, Gap));</span><br></pre></td></tr></table></figure>\n\n<p><br>$$P_{center} &#x3D; E - Gap \\cdot \\hat{direction}$$<br> E-$\\hat{direction}$ Gap  $P_{center}$E</p>\n<h3 id=\"5\"><a href=\"#5\" class=\"headerlink\" title=\"5\"></a>5</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> directionToLeft = direction.GetNormal(); </span><br><span class=\"line\"><span class=\"comment\">//  + Gap</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> leftEndHeadPos = PEVector.Add(endHeadCenter, PEVector.Scale(directionToLeft, Gap));</span><br><span class=\"line\"><span class=\"comment\">// E</span></span><br><span class=\"line\">canvas.DrawLine(leftEndHeadPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);</span><br></pre></td></tr></table></figure>\n\n<p><br>$$\\vec{n_{left}} &#x3D; (y_{\\hat{direction}}, -x_{\\hat{direction}}) \\quad \\text{}$$<br>$$P_{left} &#x3D; P_{center} + Gap \\cdot \\vec{n_{left}}$$<br> Gap  $P_{left}$ $P_{left}$  E </p>\n<h3 id=\"6\"><a href=\"#6\" class=\"headerlink\" title=\"6\"></a>6</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> directionToRight = PEVector.Scale(direction.GetNormal(), <span class=\"number\">-1</span>);</span><br><span class=\"line\"><span class=\"comment\">//  + Gap</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> rightEndHeadPos = PEVector.Add(endHeadCenter, PEVector.Scale(directionToRight, Gap));</span><br><span class=\"line\"><span class=\"comment\">// E</span></span><br><span class=\"line\">canvas.DrawLine(rightEndHeadPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);</span><br></pre></td></tr></table></figure>\n\n<p><br>$$\\vec{n_{right}} &#x3D; -\\vec{n_{left}} &#x3D; (-y_{\\hat{direction}}, x_{\\hat{direction}}) \\quad \\text{}$$<br>$$P_{right} &#x3D; P_{center} + Gap \\cdot \\vec{n_{right}}$$<br> Gap  $P_{right}$ $P_{right}$  E </p>\n<h3 id=\"7\"><a href=\"#7\" class=\"headerlink\" title=\"7\"></a>7</h3><p>&#x2F;$P_{center}$$P_{left}$$P_{right}$</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (ShowCircle)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    canvas.DrawCircle(endHeadCenter.ToSKPoint(), <span class=\"number\">3</span>, <span class=\"keyword\">new</span> SKPaint &#123; Color = SKColors.Red &#125;); <span class=\"comment\">// </span></span><br><span class=\"line\">    canvas.DrawCircle(leftEndHeadPos.ToSKPoint(), <span class=\"number\">3</span>, <span class=\"keyword\">new</span> SKPaint &#123; Color = SKColors.Green &#125;); <span class=\"comment\">// </span></span><br><span class=\"line\">    canvas.DrawCircle(rightEndHeadPos.ToSKPoint(), <span class=\"number\">3</span>, <span class=\"keyword\">new</span> SKPaint &#123; Color = SKColors.Green &#125;); <span class=\"comment\">// </span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> SkiaSharp;</span><br><span class=\"line\"><span class=\"keyword\">using</span> SkiaSharp.Views.Desktop;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">struct</span> PEVector</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">double</span> X;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">double</span> Y;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PEVector</span>()</span> &#123; &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PEVector</span>(<span class=\"params\"><span class=\"built_in\">double</span> x, <span class=\"built_in\">double</span> y</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        X = x;</span><br><span class=\"line\">        Y = y;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">readonly</span> <span class=\"built_in\">double</span> Length =&gt; Math.Sqrt(X * X + Y * Y);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> 1</span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Normalize</span>()</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> length = Length;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (length &lt; <span class=\"number\">1e-9</span>) <span class=\"keyword\">return</span>; <span class=\"comment\">// 0</span></span><br><span class=\"line\">        X /= length;</span><br><span class=\"line\">        Y /= length;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> (x,y)  (y, -x)</span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> PEVector <span class=\"title\">GetNormal</span>()</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> PEVector &#123; X = Y, Y = -X &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> </span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> PEVector <span class=\"title\">Add</span>(<span class=\"params\">PEVector v1, PEVector v2</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> PEVector &#123; X = v1.X + v2.X, Y = v1.Y + v2.Y &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> </span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> PEVector <span class=\"title\">Sub</span>(<span class=\"params\">PEVector v1, PEVector v2</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> PEVector &#123; X = v1.X - v2.X, Y = v1.Y - v2.Y &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> </span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> PEVector <span class=\"title\">Scale</span>(<span class=\"params\">PEVector v, <span class=\"built_in\">double</span> scale</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> PEVector &#123; X = v.X * scale, Y = v.Y * scale &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title\">PEVectorExtensions</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> SkiaSharp</span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> SKPoint <span class=\"title\">ToSKPoint</span>(<span class=\"params\"><span class=\"keyword\">this</span> PEVector v</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> SKPoint((<span class=\"built_in\">float</span>)v.X, (<span class=\"built_in\">float</span>)v.Y);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">ArrowDrawing</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">SKElement_PaintSurface</span>(<span class=\"params\"><span class=\"built_in\">object</span> sender, SKPaintSurfaceEventArgs e</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> <span class=\"built_in\">int</span> Gap = <span class=\"number\">10</span>; <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"built_in\">bool</span> ShowCircle = <span class=\"literal\">false</span>; <span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> canvas = e.Surface.Canvas;</span><br><span class=\"line\">        canvas.Clear();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">using</span> <span class=\"keyword\">var</span> linePaint = <span class=\"keyword\">new</span> SKPaint &#123; Color = SKColors.Black, StrokeWidth = <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 1. </span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> startPos = <span class=\"keyword\">new</span> PEVector(<span class=\"number\">200</span>, <span class=\"number\">600</span>);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> endPos = <span class=\"keyword\">new</span> PEVector(<span class=\"number\">600</span>, <span class=\"number\">200</span>);</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        canvas.DrawLine(startPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 2. </span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> direction = PEVector.Sub(endPos, startPos);</span><br><span class=\"line\">        <span class=\"comment\">// 3. </span></span><br><span class=\"line\">        direction.Normalize();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 4. Gap</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> endHeadCenter = PEVector.Sub(endPos, PEVector.Scale(direction, Gap));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 5. </span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> directionToLeft = direction.GetNormal(); <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> leftEndHeadPos = PEVector.Add(endHeadCenter, PEVector.Scale(directionToLeft, Gap));</span><br><span class=\"line\">        canvas.DrawLine(leftEndHeadPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 6. </span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> directionToRight = PEVector.Scale(direction.GetNormal(), <span class=\"number\">-1</span>); <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> rightEndHeadPos = PEVector.Add(endHeadCenter, PEVector.Scale(directionToRight, Gap));</span><br><span class=\"line\">        canvas.DrawLine(rightEndHeadPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ShowCircle)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">using</span> <span class=\"keyword\">var</span> redPaint = <span class=\"keyword\">new</span> SKPaint &#123; Color = SKColors.Red, StrokeWidth = <span class=\"number\">1</span>, Style = SKPaintStyle.Fill &#125;;</span><br><span class=\"line\">            <span class=\"keyword\">using</span> <span class=\"keyword\">var</span> greenPaint = <span class=\"keyword\">new</span> SKPaint &#123; Color = SKColors.Green, StrokeWidth = <span class=\"number\">1</span>, Style = SKPaintStyle.Fill &#125;;</span><br><span class=\"line\">            canvas.DrawCircle(endHeadCenter.ToSKPoint(), <span class=\"number\">3</span>, redPaint);</span><br><span class=\"line\">            canvas.DrawCircle(leftEndHeadPos.ToSKPoint(), <span class=\"number\">3</span>, greenPaint);</span><br><span class=\"line\">            canvas.DrawCircle(rightEndHeadPos.ToSKPoint(), <span class=\"number\">3</span>, greenPaint);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li><strong></strong><strong></strong><strong></strong><strong></strong><strong>+</strong></li>\n<li><strong></strong><ul>\n<li>$\\vec{direction} &#x3D; E - S$</li>\n<li>$\\hat{direction} &#x3D; \\vec{direction} &#x2F; |\\vec{direction}|$</li>\n<li>$P_{center} &#x3D; E - Gap \\cdot \\hat{direction}$</li>\n<li>$P_{left&#x2F;right} &#x3D; P_{center}  Gap \\cdot (y_{\\hat{direction}}, -x_{\\hat{direction}})$</li>\n</ul>\n</li>\n<li><strong></strong> Gap $\\vec{direction} &#x3D; S - E$</li>\n</ol>\n","excerpt":"","more":"<h3 id=\"2026-02-20-21-08-05\"><a href=\"#2026-02-20-21-08-05\" class=\"headerlink\" title=\"2026-02-20 21:08:05\"></a><strong>2026-02-20 21:08:05</strong></h3><p></p>\n<hr>\n<p> SkiaSharp </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> SkiaSharp  startPos  endPos </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"1-PEVector\"><a href=\"#1-PEVector\" class=\"headerlink\" title=\"1. PEVector\"></a>1. PEVector</h3><p> PEVector </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>X&#x2F;Y</td>\n<td>xy</td>\n<td> $\\vec{v} &#x3D; (X, Y)$</td>\n</tr>\n<tr>\n<td>Length</td>\n<td></td>\n<td>$|\\vec{v}| &#x3D; \\sqrt{X^2 + Y^2}$</td>\n</tr>\n<tr>\n<td>Normalize()</td>\n<td></td>\n<td>$\\hat{v} &#x3D; \\frac{\\vec{v}}{|\\vec{v}|}$</td>\n</tr>\n<tr>\n<td>GetNormal()</td>\n<td></td>\n<td> $\\vec{v}&#x3D;(x,y)$ $(y, -x)$</td>\n</tr>\n<tr>\n<td>Add(v1, v2)</td>\n<td></td>\n<td>$\\vec{v_1} + \\vec{v_2} &#x3D; (x_1+x_2, y_1+y_2)$</td>\n</tr>\n<tr>\n<td>Sub(v1, v2)</td>\n<td></td>\n<td>$\\vec{v_1} - \\vec{v_2} &#x3D; (x_1-x_2, y_1-y_2)$</td>\n</tr>\n<tr>\n<td>Scale(v, s)</td>\n<td></td>\n<td>$s \\cdot \\vec{v} &#x3D; (s \\cdot x, s \\cdot y)$</td>\n</tr>\n</tbody></table>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><ul>\n<li><strong></strong> 1 $\\hat{v} &#x3D; \\frac{\\vec{v}}{|\\vec{v}|}$ $|\\vec{v}| \\neq 0$</li>\n<li><strong></strong> $(x,y)$ $(y, -x)$  $(-y, x)$</li>\n<li><strong></strong>$\\vec{v_1} - \\vec{v_2}$  $v_2$  $v_1$ </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1&#x2F;\"></a>1&#x2F;</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"built_in\">int</span> Gap = <span class=\"number\">10</span>; <span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> startPos = <span class=\"keyword\">new</span> PEVector(<span class=\"number\">200</span>, <span class=\"number\">600</span>); <span class=\"comment\">//  S(200,600)</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> endPos = <span class=\"keyword\">new</span> PEVector(<span class=\"number\">600</span>, <span class=\"number\">200</span>);   <span class=\"comment\">//  E(600,200)</span></span><br><span class=\"line\">canvas.DrawLine(startPos.ToSKPoint(), endPos.ToSKPoint(), linePaint); <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n\n<p> $S(x_s, y_s)$  $E(x_e, y_e)$ </p>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> direction = PEVector.Sub(endPos, startPos); <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n\n<p><br>$$\\vec{direction} &#x3D; E - S &#x3D; (x_e - x_s, y_e - y_s)$$<br>SE</p>\n<h3 id=\"3\"><a href=\"#3\" class=\"headerlink\" title=\"3\"></a>3</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">direction.Normalize(); <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n\n<p><br>$$\\hat{direction} &#x3D; \\frac{\\vec{direction}}{|\\vec{direction}|} &#x3D; \\frac{(x_e - x_s, y_e - y_s)}{\\sqrt{(x_e - x_s)^2 + (y_e - y_s)^2}}$$<br>Gap</p>\n<h3 id=\"4\"><a href=\"#4\" class=\"headerlink\" title=\"4\"></a>4</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> endHeadCenter = PEVector.Sub(endPos, PEVector.Scale(direction, Gap));</span><br></pre></td></tr></table></figure>\n\n<p><br>$$P_{center} &#x3D; E - Gap \\cdot \\hat{direction}$$<br> E-$\\hat{direction}$ Gap  $P_{center}$E</p>\n<h3 id=\"5\"><a href=\"#5\" class=\"headerlink\" title=\"5\"></a>5</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> directionToLeft = direction.GetNormal(); </span><br><span class=\"line\"><span class=\"comment\">//  + Gap</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> leftEndHeadPos = PEVector.Add(endHeadCenter, PEVector.Scale(directionToLeft, Gap));</span><br><span class=\"line\"><span class=\"comment\">// E</span></span><br><span class=\"line\">canvas.DrawLine(leftEndHeadPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);</span><br></pre></td></tr></table></figure>\n\n<p><br>$$\\vec{n_{left}} &#x3D; (y_{\\hat{direction}}, -x_{\\hat{direction}}) \\quad \\text{}$$<br>$$P_{left} &#x3D; P_{center} + Gap \\cdot \\vec{n_{left}}$$<br> Gap  $P_{left}$ $P_{left}$  E </p>\n<h3 id=\"6\"><a href=\"#6\" class=\"headerlink\" title=\"6\"></a>6</h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> directionToRight = PEVector.Scale(direction.GetNormal(), <span class=\"number\">-1</span>);</span><br><span class=\"line\"><span class=\"comment\">//  + Gap</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> rightEndHeadPos = PEVector.Add(endHeadCenter, PEVector.Scale(directionToRight, Gap));</span><br><span class=\"line\"><span class=\"comment\">// E</span></span><br><span class=\"line\">canvas.DrawLine(rightEndHeadPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);</span><br></pre></td></tr></table></figure>\n\n<p><br>$$\\vec{n_{right}} &#x3D; -\\vec{n_{left}} &#x3D; (-y_{\\hat{direction}}, x_{\\hat{direction}}) \\quad \\text{}$$<br>$$P_{right} &#x3D; P_{center} + Gap \\cdot \\vec{n_{right}}$$<br> Gap  $P_{right}$ $P_{right}$  E </p>\n<h3 id=\"7\"><a href=\"#7\" class=\"headerlink\" title=\"7\"></a>7</h3><p>&#x2F;$P_{center}$$P_{left}$$P_{right}$</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (ShowCircle)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    canvas.DrawCircle(endHeadCenter.ToSKPoint(), <span class=\"number\">3</span>, <span class=\"keyword\">new</span> SKPaint &#123; Color = SKColors.Red &#125;); <span class=\"comment\">// </span></span><br><span class=\"line\">    canvas.DrawCircle(leftEndHeadPos.ToSKPoint(), <span class=\"number\">3</span>, <span class=\"keyword\">new</span> SKPaint &#123; Color = SKColors.Green &#125;); <span class=\"comment\">// </span></span><br><span class=\"line\">    canvas.DrawCircle(rightEndHeadPos.ToSKPoint(), <span class=\"number\">3</span>, <span class=\"keyword\">new</span> SKPaint &#123; Color = SKColors.Green &#125;); <span class=\"comment\">// </span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> SkiaSharp;</span><br><span class=\"line\"><span class=\"keyword\">using</span> SkiaSharp.Views.Desktop;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">struct</span> PEVector</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">double</span> X;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">double</span> Y;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PEVector</span>()</span> &#123; &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PEVector</span>(<span class=\"params\"><span class=\"built_in\">double</span> x, <span class=\"built_in\">double</span> y</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        X = x;</span><br><span class=\"line\">        Y = y;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">readonly</span> <span class=\"built_in\">double</span> Length =&gt; Math.Sqrt(X * X + Y * Y);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> 1</span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Normalize</span>()</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> length = Length;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (length &lt; <span class=\"number\">1e-9</span>) <span class=\"keyword\">return</span>; <span class=\"comment\">// 0</span></span><br><span class=\"line\">        X /= length;</span><br><span class=\"line\">        Y /= length;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> (x,y)  (y, -x)</span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> PEVector <span class=\"title\">GetNormal</span>()</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> PEVector &#123; X = Y, Y = -X &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> </span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> PEVector <span class=\"title\">Add</span>(<span class=\"params\">PEVector v1, PEVector v2</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> PEVector &#123; X = v1.X + v2.X, Y = v1.Y + v2.Y &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> </span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> PEVector <span class=\"title\">Sub</span>(<span class=\"params\">PEVector v1, PEVector v2</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> PEVector &#123; X = v1.X - v2.X, Y = v1.Y - v2.Y &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> </span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> PEVector <span class=\"title\">Scale</span>(<span class=\"params\">PEVector v, <span class=\"built_in\">double</span> scale</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> PEVector &#123; X = v.X * scale, Y = v.Y * scale &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> <span class=\"title\">PEVectorExtensions</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> SkiaSharp</span></span><br><span class=\"line\">    <span class=\"comment\"><span class=\"doctag\">///</span> <span class=\"doctag\">&lt;/summary&gt;</span></span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> SKPoint <span class=\"title\">ToSKPoint</span>(<span class=\"params\"><span class=\"keyword\">this</span> PEVector v</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> SKPoint((<span class=\"built_in\">float</span>)v.X, (<span class=\"built_in\">float</span>)v.Y);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">ArrowDrawing</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">SKElement_PaintSurface</span>(<span class=\"params\"><span class=\"built_in\">object</span> sender, SKPaintSurfaceEventArgs e</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> <span class=\"built_in\">int</span> Gap = <span class=\"number\">10</span>; <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"built_in\">bool</span> ShowCircle = <span class=\"literal\">false</span>; <span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> canvas = e.Surface.Canvas;</span><br><span class=\"line\">        canvas.Clear();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">using</span> <span class=\"keyword\">var</span> linePaint = <span class=\"keyword\">new</span> SKPaint &#123; Color = SKColors.Black, StrokeWidth = <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 1. </span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> startPos = <span class=\"keyword\">new</span> PEVector(<span class=\"number\">200</span>, <span class=\"number\">600</span>);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> endPos = <span class=\"keyword\">new</span> PEVector(<span class=\"number\">600</span>, <span class=\"number\">200</span>);</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        canvas.DrawLine(startPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 2. </span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> direction = PEVector.Sub(endPos, startPos);</span><br><span class=\"line\">        <span class=\"comment\">// 3. </span></span><br><span class=\"line\">        direction.Normalize();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 4. Gap</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> endHeadCenter = PEVector.Sub(endPos, PEVector.Scale(direction, Gap));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 5. </span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> directionToLeft = direction.GetNormal(); <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> leftEndHeadPos = PEVector.Add(endHeadCenter, PEVector.Scale(directionToLeft, Gap));</span><br><span class=\"line\">        canvas.DrawLine(leftEndHeadPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 6. </span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> directionToRight = PEVector.Scale(direction.GetNormal(), <span class=\"number\">-1</span>); <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> rightEndHeadPos = PEVector.Add(endHeadCenter, PEVector.Scale(directionToRight, Gap));</span><br><span class=\"line\">        canvas.DrawLine(rightEndHeadPos.ToSKPoint(), endPos.ToSKPoint(), linePaint);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ShowCircle)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">using</span> <span class=\"keyword\">var</span> redPaint = <span class=\"keyword\">new</span> SKPaint &#123; Color = SKColors.Red, StrokeWidth = <span class=\"number\">1</span>, Style = SKPaintStyle.Fill &#125;;</span><br><span class=\"line\">            <span class=\"keyword\">using</span> <span class=\"keyword\">var</span> greenPaint = <span class=\"keyword\">new</span> SKPaint &#123; Color = SKColors.Green, StrokeWidth = <span class=\"number\">1</span>, Style = SKPaintStyle.Fill &#125;;</span><br><span class=\"line\">            canvas.DrawCircle(endHeadCenter.ToSKPoint(), <span class=\"number\">3</span>, redPaint);</span><br><span class=\"line\">            canvas.DrawCircle(leftEndHeadPos.ToSKPoint(), <span class=\"number\">3</span>, greenPaint);</span><br><span class=\"line\">            canvas.DrawCircle(rightEndHeadPos.ToSKPoint(), <span class=\"number\">3</span>, greenPaint);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li><strong></strong><strong></strong><strong></strong><strong></strong><strong>+</strong></li>\n<li><strong></strong><ul>\n<li>$\\vec{direction} &#x3D; E - S$</li>\n<li>$\\hat{direction} &#x3D; \\vec{direction} &#x2F; |\\vec{direction}|$</li>\n<li>$P_{center} &#x3D; E - Gap \\cdot \\hat{direction}$</li>\n<li>$P_{left&#x2F;right} &#x3D; P_{center}  Gap \\cdot (y_{\\hat{direction}}, -x_{\\hat{direction}})$</li>\n</ul>\n</li>\n<li><strong></strong> Gap $\\vec{direction} &#x3D; S - E$</li>\n</ol>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cmm3ar6w400096gu879syb8xf","category_id":"cmm3ar6w100046gu8db1h5otc","_id":"cmm3ar6w7000e6gu80j5l0fhq"},{"post_id":"cmm3ar6vw00016gu8dahu03wp","category_id":"cmm3ar6w100046gu8db1h5otc","_id":"cmm3ar6w9000o6gu8a6dh4qdl"},{"post_id":"cmm3ar6vw00016gu8dahu03wp","category_id":"cmm3ar6w8000h6gu8d0vf0g59","_id":"cmm3ar6wa000r6gu8dob041vt"},{"post_id":"cmm3ar6w5000a6gu80djqexyh","category_id":"cmm3ar6w9000k6gu83dkld2yp","_id":"cmm3ar6wa000s6gu89bgka07i"},{"post_id":"cmm3ar6w6000d6gu8eujs56lz","category_id":"cmm3ar6w100046gu8db1h5otc","_id":"cmm3ar6wa000y6gu886nh6bmq"},{"post_id":"cmm3ar6w6000d6gu8eujs56lz","category_id":"cmm3ar6w9000p6gu8azt68s7f","_id":"cmm3ar6wb00116gu8etf96ulz"},{"post_id":"cmm3ar6vz00036gu87gttgji2","category_id":"cmm3ar6w100046gu8db1h5otc","_id":"cmm3ar6wb00126gu8b2yz7t4m"},{"post_id":"cmm3ar6vz00036gu87gttgji2","category_id":"cmm3ar6w8000h6gu8d0vf0g59","_id":"cmm3ar6wb00146gu867vm989u"},{"post_id":"cmm3ar6w300076gu886z0b1qx","category_id":"cmm3ar6w100046gu8db1h5otc","_id":"cmm3ar6wb00156gu8g17825lm"},{"post_id":"cmm3ar6w300076gu886z0b1qx","category_id":"cmm3ar6w8000h6gu8d0vf0g59","_id":"cmm3ar6wb00186gu8agt6hi6y"},{"post_id":"cmm3ar6wn001i6gu83alyawy4","category_id":"cmm3ar6w100046gu8db1h5otc","_id":"cmm3ar6wp001m6gu8bvbv2g5z"},{"post_id":"cmm3ar6wo001j6gu859ftc5ca","category_id":"cmm3ar6w100046gu8db1h5otc","_id":"cmm3ar6wq001r6gu88tu1f9ml"},{"post_id":"cmm3ar6wo001j6gu859ftc5ca","category_id":"cmm3ar6wp001l6gu8615i063f","_id":"cmm3ar6wq001s6gu82bhv3cdm"}],"PostTag":[{"post_id":"cmm3ar6vw00016gu8dahu03wp","tag_id":"cmm3ar6w200056gu88e1udkmc","_id":"cmm3ar6w9000j6gu84v7v6q0c"},{"post_id":"cmm3ar6vw00016gu8dahu03wp","tag_id":"cmm3ar6w5000c6gu8ev4q7838","_id":"cmm3ar6w9000l6gu86ovv2d7g"},{"post_id":"cmm3ar6vw00016gu8dahu03wp","tag_id":"cmm3ar6w8000g6gu8321s69ym","_id":"cmm3ar6w9000n6gu8fcic1uq8"},{"post_id":"cmm3ar6vz00036gu87gttgji2","tag_id":"cmm3ar6w200056gu88e1udkmc","_id":"cmm3ar6wa000v6gu8agqdctjv"},{"post_id":"cmm3ar6vz00036gu87gttgji2","tag_id":"cmm3ar6w5000c6gu8ev4q7838","_id":"cmm3ar6wa000w6gu8er4o24p8"},{"post_id":"cmm3ar6vz00036gu87gttgji2","tag_id":"cmm3ar6wa000q6gu89lcu354k","_id":"cmm3ar6wb00106gu83jhqdetd"},{"post_id":"cmm3ar6w300076gu886z0b1qx","tag_id":"cmm3ar6w200056gu88e1udkmc","_id":"cmm3ar6wb00176gu86n560slk"},{"post_id":"cmm3ar6w300076gu886z0b1qx","tag_id":"cmm3ar6w5000c6gu8ev4q7838","_id":"cmm3ar6wb00196gu8ghg5hka0"},{"post_id":"cmm3ar6w300076gu886z0b1qx","tag_id":"cmm3ar6w8000g6gu8321s69ym","_id":"cmm3ar6wc001b6gu81w4dhjcj"},{"post_id":"cmm3ar6w400096gu879syb8xf","tag_id":"cmm3ar6w200056gu88e1udkmc","_id":"cmm3ar6wc001c6gu8g2f8bphv"},{"post_id":"cmm3ar6w400096gu879syb8xf","tag_id":"cmm3ar6wb00166gu84wva3fqz","_id":"cmm3ar6wc001e6gu8hesxc68o"},{"post_id":"cmm3ar6w5000a6gu80djqexyh","tag_id":"cmm3ar6wb001a6gu80i7xas7n","_id":"cmm3ar6wc001f6gu8dgig9egv"},{"post_id":"cmm3ar6w6000d6gu8eujs56lz","tag_id":"cmm3ar6w200056gu88e1udkmc","_id":"cmm3ar6wc001g6gu8g5rn31bx"},{"post_id":"cmm3ar6w6000d6gu8eujs56lz","tag_id":"cmm3ar6wc001d6gu8gd6q62rq","_id":"cmm3ar6wc001h6gu8evdfgiqf"},{"post_id":"cmm3ar6wn001i6gu83alyawy4","tag_id":"cmm3ar6w200056gu88e1udkmc","_id":"cmm3ar6wp001o6gu8gb60goei"},{"post_id":"cmm3ar6wn001i6gu83alyawy4","tag_id":"cmm3ar6wp001k6gu82bkjawhv","_id":"cmm3ar6wp001p6gu83mpofvi5"},{"post_id":"cmm3ar6wo001j6gu859ftc5ca","tag_id":"cmm3ar6w200056gu88e1udkmc","_id":"cmm3ar6wq001t6gu87uqh7ree"},{"post_id":"cmm3ar6wo001j6gu859ftc5ca","tag_id":"cmm3ar6wp001n6gu89ktf7rq9","_id":"cmm3ar6wq001u6gu81b5oda3a"},{"post_id":"cmm3ar6wo001j6gu859ftc5ca","tag_id":"cmm3ar6wp001q6gu8grd911bw","_id":"cmm3ar6wq001v6gu84exqannr"}],"Tag":[{"name":"C#","_id":"cmm3ar6w200056gu88e1udkmc"},{"name":"Array","_id":"cmm3ar6w5000c6gu8ev4q7838"},{"name":"ArrayPool","_id":"cmm3ar6w8000g6gu8321s69ym"},{"name":"ArrayList","_id":"cmm3ar6wa000q6gu89lcu354k"},{"name":"ReadOnlySpan","_id":"cmm3ar6wb00166gu84wva3fqz"},{"name":"Math","_id":"cmm3ar6wb001a6gu80i7xas7n"},{"name":"stackalloc","_id":"cmm3ar6wc001d6gu8gd6q62rq"},{"name":"Span<T>","_id":"cmm3ar6wp001k6gu82bkjawhv"},{"name":"SkiaSharp","_id":"cmm3ar6wp001n6gu89ktf7rq9"},{"name":"Vector","_id":"cmm3ar6wp001q6gu8grd911bw"}]}}